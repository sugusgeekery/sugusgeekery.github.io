var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,a=(t,o,n)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n,r=(e,t)=>{for(var o in t||(t={}))i.call(t,o)&&a(e,o,t[o]);if(n)for(var o of n(t))s.call(t,o)&&a(e,o,t[o]);return e},d=(e,n)=>t(e,o(n));import{c as p,a as c,l,D as u,U as m,I as f,r as I,b as g,d as h,p as v,e as y,o as L,f as U,g as w,w as b,h as S,u as x,i as D,j as A,F as P,k as T,y as C,_ as M}from"./vendor.54beb8e3.js";let R;const N={},G=function(e,t){if(!t)return e();if(void 0===R){const e=document.createElement("link").relList;R=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in N)return;N[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":R,t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise(((e,t)=>{n.addEventListener("load",e),n.addEventListener("error",t)})):void 0}))).then((()=>e()))};var O=[{path:"/",redirect:"/login"},{path:"/loginout",name:"LoginoutView",meta:{title:"好品供应商"},component:()=>G((()=>import("./Index.b3722d18.js")),["/assets/Index.b3722d18.js","/assets/Index.e9a9c355.css","/assets/vendor.54beb8e3.js","/assets/logo.bfa88f5a.js"]),children:[{path:"/login",name:"LoginView",meta:{title:"登录"},component:()=>G((()=>import("./Index.2caf4ade.js")),["/assets/Index.2caf4ade.js","/assets/Index.9b005340.css","/assets/vendor.54beb8e3.js","/assets/verification.d87d2f67.js"])},{path:"/register",name:"RegisterView",meta:{title:"注册"},component:()=>G((()=>import("./Index.715a24c6.js")),["/assets/Index.715a24c6.js","/assets/Index.7a21d003.css","/assets/vendor.54beb8e3.js","/assets/verification.d87d2f67.js"])}]},{path:"/account",name:"AccountView",meta:{title:"账号管理"},component:()=>G((()=>import("./Index.bacbbf06.js")),["/assets/Index.bacbbf06.js","/assets/vendor.54beb8e3.js","/assets/Navigation.0ff97e81.js","/assets/Navigation.6c6070c0.css"]),children:[{path:"information",name:"InformationView",meta:{title:"资料信息"},component:()=>G((()=>import("./Index.7b6c6d20.js")),["/assets/Index.7b6c6d20.js","/assets/Index.f53ef3d2.css","/assets/vendor.54beb8e3.js","/assets/validate.a5cb3ebf.js","/assets/Selection.c5e00a06.js","/assets/Selection.4a5692f4.css","/assets/headicon.cb66ce3a.js"])},{path:"application",name:"ApplicationView",meta:{title:"资质申请"},component:()=>G((()=>import("./Index.df3fe5c3.js")),["/assets/Index.df3fe5c3.js","/assets/Index.a06c268d.css","/assets/vendor.54beb8e3.js","/assets/validate.a5cb3ebf.js","/assets/Selection.c5e00a06.js","/assets/Selection.4a5692f4.css","/assets/headicon.cb66ce3a.js"])}]},{path:"/bidding",name:"BiddingView",meta:{title:"竞价"},component:()=>G((()=>import("./Index.27e30c68.js")),["/assets/Index.27e30c68.js","/assets/Index.33b2b248.css","/assets/vendor.54beb8e3.js","/assets/Navigation.0ff97e81.js","/assets/Navigation.6c6070c0.css","/assets/validate.a5cb3ebf.js","/assets/ArrangementScheme.376fb490.js","/assets/ArrangementScheme.6d5cffa9.css"])},{path:"/home",name:"HomeView",meta:{title:"首页"},component:()=>G((()=>import("./Index.acf7b861.js")),["/assets/Index.acf7b861.js","/assets/Index.00a55aa4.css","/assets/vendor.54beb8e3.js","/assets/Navigation.0ff97e81.js","/assets/Navigation.6c6070c0.css"])},{path:"/order",name:"OrderView",meta:{title:"好品供应商"},component:()=>G((()=>import("./Index.d8084304.js")),["/assets/Index.d8084304.js","/assets/vendor.54beb8e3.js","/assets/Navigation.0ff97e81.js","/assets/Navigation.6c6070c0.css"]),children:[{path:"/orderHome",name:"OrderHomeView",meta:{title:"订单中心"},component:()=>G((()=>import("./Index.8da2eb05.js")),["/assets/Index.8da2eb05.js","/assets/Index.4a405b29.css","/assets/vendor.54beb8e3.js"])},{path:"/orderDetail",name:"OrderDetailView",meta:{title:"订单详情"},component:()=>G((()=>import("./Index.a0188705.js")),["/assets/Index.a0188705.js","/assets/Index.5d1feb82.css","/assets/vendor.54beb8e3.js","/assets/ArrangementScheme.376fb490.js","/assets/ArrangementScheme.6d5cffa9.css"]),children:[{path:"/order/report",name:"ReportView",meta:{title:"DFM报告"},component:()=>G((()=>import("./Index.f36eab30.js")),["/assets/Index.f36eab30.js","/assets/Index.ba9cc6da.css","/assets/vendor.54beb8e3.js","/assets/upload.13485518.js","/assets/pictrue_add.294a7a44.js","/assets/pictrue_add.68419e11.css","/assets/select_green.c30f614b.js"])},{path:"/order/design",name:"DesignView",meta:{title:"方案设计&验收"},component:()=>G((()=>import("./Index.02487a64.js")),["/assets/Index.02487a64.js","/assets/Index.4473c4c8.css","/assets/vendor.54beb8e3.js","/assets/upload.13485518.js","/assets/pictrue_add.294a7a44.js","/assets/pictrue_add.68419e11.css"])},{path:"/order/process",name:"ProcessView",meta:{title:"加工&装配&注塑流程"},component:()=>G((()=>import("./Index.50065f1c.js")),["/assets/Index.50065f1c.js","/assets/Index.ace9ee6e.css","/assets/vendor.54beb8e3.js","/assets/upload.13485518.js"])},{path:"/order/prototype",name:"PrototypeView",meta:{title:"样件发送&验收"},component:()=>G((()=>import("./Index.b246a120.js")),["/assets/Index.b246a120.js","/assets/Index.5a9eacbe.css","/assets/vendor.54beb8e3.js","/assets/upload.13485518.js","/assets/select_green.c30f614b.js"])}]}]}];const B=p({history:c(),routes:O}),E="出了点小问题",j={AppID:"6103ec4a2189",AppKey:"cc239b39cd09383aba9b1310db8cf334"};let F="",$="",V="",_="";console.log({VITE_APP_MODE:"release",BASE_URL:"/",MODE:"release",DEV:!0,PROD:!1}),F="http://testsupplierapi.hotpick.com",$="http://testsupplierapi.hotpick.com/upload",V="wx483c7d15d7b94566",_="http://testsupplier.hotpick.com",j.AppID="a0d328dd6c4b",j.AppKey="6b522e0af482b7fa1911764b693172cb",console.log("\n        项目环境：预发布（测试）环境（release）；\n        项目版本：2.1.0；\n        项目更新内容：\n            1、无；\n；\n\n    ");const k=e=>(e=e.toString())[1]?e:"0"+e,Q=({date:e=new Date,formatType:t="yyyy-mm-dd hh:mm:ss"}={})=>{const o=e.getFullYear(),n=e.getMonth()+1,i=e.getDate(),s=e.getHours(),a=e.getMinutes(),r=e.getSeconds();switch(t){case"yyyy":return[o].map(k).join("");case"mm":return[n].map(k).join("");case"dd":return[i].map(k).join("");case"yyyymmdd":return[o,n,i].map(k).join("");case"yyyy-mm-dd":return[o,n,i].map(k).join("-");case"yyyy/mm/dd":return[o,n,i].map(k).join("/");case"yyyy.mm.dd":return[o,n,i].map(k).join(".");case"hhmmss":return[s,a,r].map(k).join("");case"hh:mm:ss":return[s,a,r].map(k).join(":");case"yyyymmddhhmmss":return[o,n,i].map(k).join("")+""+[s,a,r].map(k).join("");case"yyyy-mm-dd hh:mm:ss":return[o,n,i].map(k).join("-")+" "+[s,a,r].map(k).join(":");case"yyyy/mm/dd hh:mm:ss":return[o,n,i].map(k).join("/")+" "+[s,a,r].map(k).join(":");default:return[o,n,i].map(k).join("-")+" "+[s,a,r].map(k).join(":")}},z=(e,t)=>{const o=new RegExp(`(^|&)${e}=([^&]*)(&|$)`);let n=t||window.location.href;n.indexOf("?")>-1&&(n=n.split("?")[1]);const i=n.match(o);return i?i[2]:""},H=e=>{const{appid:t="",scope:o="snsapi_login",redirectUri:n="",state:i="",login_type:s="jssdk",self_redirect:a=!1,styletype:r="",sizetype:d="",bgcolor:p="",rst:c="",style:l="",href:u=""}=e;return`https://open.weixin.qq.com/connect/qrconnect?appid=${t}&scope=${o}&redirect_uri=${n}&state=${i}&login_type=${s}&self_redirect=${a?"true":"false"}&styletype=${r}&sizetype=${d}&bgcolor=${p}&rst=${c}&style=${l}&href=${u}`};l.createInstance({driver:[l.INDEXEDDB,l.WEBSQL,l.LOCALSTORAGE],name:"supplier"}),l.createInstance({driver:[l.LOCALSTORAGE,l.INDEXEDDB,l.WEBSQL],name:"supplier"});const q=e=>{const t=window.localStorage.getItem(`supplier___${e}`);return t?JSON.parse(t):t},J=e=>{const t=window.sessionStorage.getItem(`supplier___${e}`);return t?JSON.parse(t):t},X=(e,t)=>{window.sessionStorage.setItem(`supplier___${e}`,JSON.stringify(t))};var Z,W;(W=Z||(Z={})).UpdateInitInfo="UpdateInitInfo",W.UpdateLoginInfo="UpdateLoginInfo",W.UpdateAccountInfo="UpdateAccountInfo",W.UpdateVerificationCodeNumber="UpdateVerificationCodeNumber",W.UpdateLoginNavIndex="UpdateLoginNavIndex",W.UpdateRegisterNavIndex="UpdateRegisterNavIndex",W.UpdateIsCheckProtocol="UpdateIsCheckProtocol",W.UpdateIsShowProtocol="UpdateIsShowProtocol",W.UpdateNavigationIndex="UpdateNavigationIndex",W.UpdateNavigationList="UpdateNavigationList";var Y={[Z.UpdateInitInfo](e,t){const{initInfo:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.initInfo=Object.assign(o,n)}(e,t,o)},[Z.UpdateLoginInfo](e,t){const{loginInfo:o}=e,{token:n}=t||{};n&&X("token",n);!function(e,t,n){for(const o in t)n[o]=t[o];e.loginInfo=Object.assign(o,n)}(e,t,o)},[Z.UpdateAccountInfo](e,t){const{accountInfo:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.accountInfo=Object.assign(o,n)}(e,t,o)},[Z.UpdateVerificationCodeNumber](e,t){e.verificationCodeNumber=t},[Z.UpdateLoginNavIndex](e,t){e.loginNavIndex=t},[Z.UpdateRegisterNavIndex](e,t){e.registerNavIndex=t},[Z.UpdateIsCheckProtocol](e,t){e.isCheckProtocol=t},[Z.UpdateIsShowProtocol](e,t){e.isShowProtocol=t},[Z.UpdateNavigationIndex](e,t){e.navigationIndex=t},[Z.UpdateNavigationList](e,t){e.navigationList=t}};const K={baseURL:F,transformResponse:[function(e){return e}],timeout:18e4,withCredentials:!1,responseType:"json",xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxRedirects:5,maxContentLength:2e3,validateStatus:e=>e>=200&&e<300};let ee=!1;const te=u.create(K);te.interceptors.request.use(((e={})=>Promise.resolve(e)),((e={})=>Promise.reject(e))),te.interceptors.response.use(((e={})=>{const{status:t=0,data:o={},statusText:n=E}=e,{message:i=E}=o;return t>=200&&t<300?Promise.resolve(d(r({},o),{message:i||n||E})):Promise.resolve({code:"000",message:i||n||E})}),((e={})=>{const t=e.toString().match(/(timeout)/gi),o=~~e.toString().match(/([\d]{3})/gi)[0],{response:n={}}=e,{status:i=o,data:s={},statusText:a=E}=n;let{message:r=E,type:d=0}=s;switch(i){case 401:if(!ee){ee=!0;m({message:1==d?"你已经被超级管理员强制下线":2==d?"该账号已在其他地方登录":3==d?"资料正在审核中，请重新登录":"登录已失效，请重新登录",title:"温馨提示",confirmButtonText:"确定",cancelButtonText:"取消",showClose:!1,closeOnClickModal:!1,closeOnPressEscape:!1,center:!0,roundButton:!1,showConfirmButton:!0,showCancelButton:!1}).then((e=>{ee=!1,"confirm"===e&&B.push("/login")})).catch((e=>{ee=!1,f.info("已取消登录")}))}default:t&&t.length>0&&(r="网络响应超时！请稍后重试！")}return Promise.resolve({message:r||a||E,code:"000"})}));var oe=async({method:e="post",url:t="",data:o={},params:n={},headers:i={}}={})=>{const s={url:t,method:e,params:Object.assign({},r({},n)),data:o,headers:r({token:J("token")||q("token")||""},i)};return te(s)};const ne=(e={})=>oe({url:"/supplier/common/getStpRender",params:e}),ie=(e={})=>oe({url:"/supplier/common/getMouldOrderType",method:"GET",params:e});var se,ae;(ae=se||(se={})).Init="Init",ae.GetVerificationCode="GetVerificationCode",ae.UpdateVerificationCodeNumber="UpdateVerificationCodeNumber",ae.VerificationCodelogin="VerificationCodelogin",ae.WechatLogin="WechatLogin",ae.PhoneLogin="PhoneLogin",ae.Register="Register",ae.GetAccountInfo="GetAccountInfo",ae.UpdateNavigationIndex="UpdateNavigationIndex",ae.Logout="Logout";var re={[se.Init](e,t){const{state:o,dispatch:n,commit:i}=e;i(Z.UpdateInitInfo,r({},t||{}))},async[se.GetVerificationCode](e,t={}){try{const{dispatch:o}=e,{phone:n="",type:i=0}=t||{};if(!n)return void f.error("请输入手机号");const{success:s,message:a}=await((e={})=>oe({url:"/supplier/oauth/sendCode",method:"GET",params:e}))({phone:n,type:i});s?(f.success(a),o(se.UpdateVerificationCodeNumber)):f.error(a)}catch(o){throw new Error(o)}},[se.UpdateVerificationCodeNumber](e){const{commit:t}=e;let o=60;const n=setInterval((()=>{o?(o--,t(Z.UpdateVerificationCodeNumber,o)):clearInterval(n)}),1e3)},async[se.VerificationCodelogin](e,t){try{const{dispatch:o,commit:n}=e,{success:i,message:s,data:a}=await((e={})=>oe({url:"/supplier/oauth/loginByCode",data:e}))(t);if(i){const{token:e}=a||{};n(Z.UpdateLoginInfo,{token:e}),o(se.GetAccountInfo)}else f.error(s)}catch(o){throw new Error(o)}},async[se.PhoneLogin](e,t){try{const{dispatch:o,commit:n}=e,{success:i,message:s,data:a}=await((e={})=>oe({url:"/supplier/common/loginByPhone",method:"GET",params:e}))(t);if(i){const{token:e}=a||{};n(Z.UpdateLoginInfo,{token:e}),o(se.GetAccountInfo)}else f.error(s)}catch(o){throw new Error(o)}},async[se.WechatLogin](e,t){try{const{dispatch:o,commit:n}=e,{success:i,message:s,data:a}=await((e={})=>oe({url:"/supplier/oauth/wxLogin",data:e}))(t);if(i){const{accessToken:e="",exist:t=!1,openId:i="",supplierInfo:s,token:r}=a||{};n(Z.UpdateLoginInfo,{accessToken:e,exist:t,openId:i,supplierInfo:s,token:r}),t?o(se.GetAccountInfo):i?(n(Z.UpdateRegisterNavIndex,1),B.push("/register")):f.error("请扫码重试！")}else f.error(s)}catch(o){throw new Error(o)}},async[se.Register](e,t){try{const{state:o,dispatch:n,commit:i}=e,{loginInfo:s}=o,{accessToken:a,openId:p}=s||{},{success:c,message:l,data:u}=await((e={})=>oe({url:"/supplier/oauth/register",data:e}))(d(r({},t),{accessToken:a,openId:p}));if(c){const{exist:e,supplierInfo:t,token:o}=u||{};i(Z.UpdateLoginInfo,{exist:e,supplierInfo:t,token:o,isFirstExist:!0}),n(se.GetAccountInfo)}else f.error(l)}catch(o){throw new Error(o)}},async[se.GetAccountInfo](e){try{const{state:t,dispatch:o,commit:n}=e,{loginInfo:i}=t,{isFirstExist:s}=i||{},{success:a,message:d,data:p}=await((e={})=>oe({url:"/supplier/userManage/getLoginedUserInfo",method:"GET",params:e}))({});if(a){const{wxOpenId:e}=p||{};n(Z.UpdateAccountInfo,r({},p||{})),s?n(Z.UpdateRegisterNavIndex,2):B.push("/home")}else f.error(d)}catch(t){throw new Error(t)}},async[se.Logout](e){try{const{state:t,dispatch:o,commit:n}=e,{success:i,message:s,data:a}=await((e={})=>oe({url:"/supplier/oauth/logout",method:"GET",params:e}))();i?(n(Z.UpdateLoginInfo,{accessToken:"",exist:"",openId:"",supplierInfo:{},token:"",isFirstExist:!1}),n(Z.UpdateAccountInfo,{}),B.push("/login")):f.error(s)}catch(t){throw new Error(t)}},[se.UpdateNavigationIndex](e,t){const{state:o,dispatch:n,commit:i}=e,{navigationIndex:s=-1,itemIndex:a=-1}=t||{},{navigationList:r=[]}=o,{itemList:d=[]}=r[s]||{};if(d.length>0){const{path:e,query:t}=d[a]||{};i(Z.UpdateNavigationIndex,s),r[s].itemIndex=a,i(Z.UpdateNavigationList,r),B.push({path:e,query:t})}else{const{path:e,query:t}=r[s]||{};i(Z.UpdateNavigationIndex,s),B.push({path:e,query:t})}}};var de,pe;(pe=de||(de={})).UpdateInitInfo="UpdateInitInfo",pe.UpdateProvinceCityDistrict="UpdateProvinceCityDistrict",pe.UpdateUserInfo="UpdateUserInfo",pe.UpdateCompanyInfo="UpdateCompanyInfo",pe.UpdateUserQualify="UpdateUserQualify",pe.UpdateCompanyQualify="UpdateCompanyQualify";var ce={[de.UpdateInitInfo](e,t){const{initInfo:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.initInfo=Object.assign(o,n)}(e,t,o)},[de.UpdateProvinceCityDistrict](e,t){e.provinceCityDistrict=t},[de.UpdateUserInfo](e,t){const{userInfo:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.userInfo=Object.assign(o,n)}(e,t,o)},[de.UpdateCompanyInfo](e,t){const{companyInfo:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.companyInfo=Object.assign(o,n)}(e,t,o)},[de.UpdateUserQualify](e,t){const{userQualify:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.userQualify=Object.assign(o,n)}(e,t,o)},[de.UpdateCompanyQualify](e,t){const{companyQualify:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.companyQualify=Object.assign(o,n)}(e,t,o)}};var le,ue;(ue=le||(le={})).GetProvinceCityCountry="GetProvinceCityCountry",ue.UploadForm="UploadForm",ue.ChangeSupplierType="ChangeSupplierType",ue.GetInformationDefInfo="GetInformationDefInfo",ue.GetQualifyDefInfo="GetQualifyDefInfo",ue.UpdateDefLoginInfo="UpdateDefLoginInfo",ue.GetUserInfo="GetUserInfo",ue.SaveUserInfo="SaveUserInfo",ue.GetCompanyInfo="GetCompanyInfo",ue.SaveCompanyInfo="SaveCompanyInfo",ue.GetPersonQualifyInfo="GetPersonQualifyInfo",ue.SavePersonQualifyInfo="SavePersonQualifyInfo",ue.GetCompQualifyInfo="GetCompQualifyInfo",ue.GetCompQualifyLabelInfo="GetCompQualifyLabelInfo",ue.SaveCompanyQualifyInfo="SaveCompanyQualifyInfo";var me={namespaced:!0,state:{initInfo:{loginInfo:{},accountInfo:{},type:0,typeStr:"",typeList:[{text:"公司",type:1,isSelected:!1},{text:"个人",type:2,isSelected:!1}]},provinceCityDistrict:[],userInfo:{sexList:["无","男","女"],sex:0,email:"",headImgUrl:"",phoneNo:"",telephoneNo:"",userName:""},companyInfo:{address:"",cityId:0,cityName:"",companyName:"",companyPhoneNo:"",description:"",districtId:0,districtName:"",officialWebsite:"",provinceId:0,provinceName:"",publishTime:"",staffSize:0,staffsizeList:[{value:1,label:"1-50人"},{value:2,label:"51-100人"},{value:3,label:"101-200人"},{value:4,label:"201-500人"},{value:5,label:"501-1000人"},{value:6,label:"1001及以上"}]},userQualify:{idcardBackImgId:0,idcardBackImgUrl:"",idcardFrontImgId:0,idcardFrontImgUrl:"",labelList:[],state:0,stateDesc:""},companyQualify:{businessLicenseImgId:0,businessLicenseImgUrl:"",creditCode:"",labelList:[],operIdcardBackendId:0,operIdcardBackendUrl:"",operIdcardFrontId:0,operIdcardFrontUrl:"",operIdcardNo:"",operName:"",operPhoneNo:"",state:0,stateDesc:""}},getters:{},actions:{[le.GetInformationDefInfo](e,t){const{state:o,rootState:n,dispatch:i,commit:s}=e,{loginInfo:a,accountInfo:d}=n,{type:p=0}=d||{},c=1===p?"公司":2===p?"个人":"";s(de.UpdateInitInfo,r({type:p,typeStr:c,loginInfo:a,accountInfo:d},t)),i(le.GetUserInfo),i(le.GetCompanyInfo)},[le.GetQualifyDefInfo](e,t){const{state:o,rootState:n,dispatch:i,commit:s}=e,{loginInfo:a,accountInfo:d}=n,{type:p=0}=d||{},c=1===p?"公司":2===p?"个人":"";s(de.UpdateInitInfo,r({type:p,typeStr:c,loginInfo:a,accountInfo:d},t)),1===p?i(le.GetCompQualifyInfo):2===p&&i(le.GetPersonQualifyInfo)},[le.UpdateDefLoginInfo](e){const{state:t,dispatch:o,commit:n}=e,{initInfo:i}=t,{loginInfo:s}=i;s.isFirstExist=!1,n(de.UpdateInitInfo,{loginInfo:s}),n("UpdateLoginInfo",{isFirstExist:!1},{root:!0})},async[le.GetProvinceCityCountry](e){try{const{state:o,dispatch:n,commit:i}=e,{success:s,message:a,data:r}=await(t={},oe({url:"/supplier/common/wechat",method:"GET",params:t}));if(s){const{provinceCityDistrict:e=[]}=r||{},t=function(e){const o=[];for(const n of e){const{code:e=0,name:i="",children:s=[]}=n;s&&s.length?o.push({label:i,value:e,children:t(s)}):o.push({label:i,value:e})}return o},o=t(e);i(de.UpdateProvinceCityDistrict,o)}else f.error(a)}catch(o){throw new Error(o)}var t},async[le.ChangeSupplierType](e){try{const{state:t,dispatch:o,commit:n}=e,{initInfo:i}=t,{typeList:s}=i,{type:a,typeStr:r}=(e=>{for(const[t,o]of e.entries()){const{type:e,text:t,isSelected:n}=o;if(n)return{type:e,typeStr:t}}return{type:0,typeStr:""}})(s);if(!a)return void f.error("请选择供应商类型！");const{success:d,message:p,data:c}=await((e={})=>oe({url:"/supplier/userManage/changeSupplierType",data:e}))({type:a});d?(n(de.UpdateInitInfo,{type:a,typeStr:r,typeList:(e=>{for(const[t,o]of e.entries())e[t].isSelected=!1;return e})(s)}),n("UpdateAccountInfo",{type:a},{root:!0})):f.error(p)}catch(t){throw new Error(t)}},async[le.GetUserInfo](e){try{const{state:o,dispatch:n,commit:i}=e,{success:s,message:a,data:d}=await(t={},oe({url:"/supplier/userManage/getUserInfo",method:"GET",params:t}));s?i(de.UpdateUserInfo,r({},d||{})):f.error(a)}catch(o){throw new Error(o)}var t},[le.UploadForm]:(e,t)=>new Promise((async(o,n)=>{try{const{state:i,dispatch:s,commit:a}=e,{file:r}=t||{},d=new FormData;d.append("files",r);const{success:p,message:c,data:l}=await((e={})=>oe({url:"/supplier/common/uploadForm",headers:{"Content-Type":"multipart/form-data;"},data:e}))(d);if(p){const{pics:e=[]}=l||{};o(e[0])}else f.error(c),n({})}catch(i){throw new Error(i)}})),async[le.SaveUserInfo](e){try{const{state:t,dispatch:o,commit:n}=e,{userInfo:i,initInfo:s,companyInfo:a}=t,{email:r,headImgUrl:d,phoneNo:p,userName:c,sex:l,telephoneNo:u}=i||{};if(!d)return void f.error("请上传头像！");if(!c)return void f.error("请输入真实姓名！");if(!p)return void f.error("请输入手机号！");const{success:m,message:I,data:g}=await((e={})=>oe({url:"/supplier/userManage/saveUserInfo",data:e}))({email:r,headImgUrl:d,mobilePhoneNo:p,realName:c,sex:l,telephoneNo:u});m?(f.success(I),1===s.type&&o(le.SaveCompanyInfo)):f.error(I)}catch(t){throw new Error(t)}},async[le.GetCompanyInfo](e){try{const{state:o,dispatch:n,commit:i}=e,{success:s,message:a,data:d}=await(t={},oe({url:"/supplier/userManage/getCompanyInfo",method:"GET",params:t}));s?i(de.UpdateCompanyInfo,r({},d||{})):f.error(a)}catch(o){throw new Error(o)}var t},async[le.SaveCompanyInfo](e){try{const{state:t,dispatch:o,commit:n}=e,{userInfo:i,companyInfo:s}=t,{address:a,cityId:r,companyName:d,companyPhoneNo:p,description:c,districtId:l,officialWebsite:u="",provinceId:m,publishTime:I,staffSize:g}=s||{};if(!d)return void f.error("请输入公司名称！");if(!g)return void f.error("请输入公司人数！");if(!I)return void f.error("请选择成立时间！");if(!I)return void f.error("请选择成立时间！");if(!p)return void f.error("请输入公司电话！");if(!(m&&r&&l&&a))return void f.error("请选择公司地址！");if(!c)return void f.error("请输入公司详情！");const{success:h,message:v,data:y}=await((e={})=>oe({url:"/supplier/userManage/saveCompanyinfo",data:e}))({address:a,cityId:r,companyName:d,companyPhoneNo:p,description:c,districtId:l,officialWebsite:u,provinceId:m,publishTime:I,staffSize:g});h?f.success(v):f.error(v)}catch(t){throw new Error(t)}},async[le.GetPersonQualifyInfo](e){try{const{state:o,dispatch:n,commit:i}=e,{success:s,message:a,data:d}=await(t={},oe({url:"/supplier/userManage/getPersonQualifyInfoV1",method:"GET",params:t}));s?(i(de.UpdateUserQualify,r({},d||{})),n(le.GetCompQualifyLabelInfo,1)):f.error(a)}catch(o){throw new Error(o)}var t},async[le.SavePersonQualifyInfo](e){try{const{state:t,dispatch:o,commit:n}=e,{userQualify:i}=t,{idcardBackImgId:s,idcardFrontImgId:a,labelList:r=[]}=i||{},d=(e=>{const t=[];for(const o of e){const{isSelected:e,id:n}=o;e&&t.push(n)}return t})(r);if(!a)return void f.error("请上传身份证正面照！");if(!s)return void f.error("请上传身份证背面照！");if(!d.length)return void f.error("请选择你拥有的生产能力标签！");const{success:p,message:c,data:l}=await((e={})=>oe({url:"/supplier/userManage/savePersonQualifyInfoV1",data:e}))({idcardBackImgId:s,idcardFrontImgId:a,label:d.join(",")});p?f.success(c):f.error(c)}catch(t){throw new Error(t)}},async[le.GetCompQualifyInfo](e){try{const{state:o,dispatch:n,commit:i}=e,{success:s,message:a,data:d}=await(t={},oe({url:"/supplier/userManage/getCompQualifyInfoV1",method:"GET",params:t}));s?(i(de.UpdateCompanyQualify,r({},d||{})),n(le.GetCompQualifyLabelInfo,2)):f.error(a)}catch(o){throw new Error(o)}var t},async[le.GetCompQualifyLabelInfo](e,t=1){try{const{state:o,dispatch:n,commit:i}=e,{companyQualify:s}=o,{label:a}=s,{success:r,message:d,data:p}=await((e={})=>oe({url:"/supplier/userManage/getLabelList",method:"GET",params:e}))({});if(r){const e=((e,t)=>{const o=t&&t.split(",")||[];if(e&&e.length)for(const[n,i]of e.entries()){const{id:t}=i;e[n].isSelected=~~(o&&o.includes(t))}return e})(p||[],a);1===t?i(de.UpdateUserQualify,{labelList:e}):2===t&&i(de.UpdateCompanyQualify,{labelList:e})}else f.error(d)}catch(o){throw new Error(o)}},async[le.SaveCompanyQualifyInfo](e){try{const{state:t,dispatch:o,commit:n}=e,{companyQualify:i}=t,{businessLicenseImgId:s,creditCode:a,labelList:r=[],operIdcardBackendId:d,operIdcardFrontId:p,operIdcardNo:c,operName:l,operPhoneNo:u}=i||{},m=(e=>{const t=[];for(const o of e){const{isSelected:e,id:n}=o;e&&t.push(n)}return t})(r);if(!a)return void f.error("请输入统一社会信用代码！");if(!s)return void f.error("请上传营业执照！");if(!l)return void f.error("请输入法人姓名！");if(!c)return void f.error("请输入身份证号码！");if(!u)return void f.error("请输入手机电话！");if(!p)return void f.error("请上传身份证正面照！");if(!d)return void f.error("请上传身份证背面照！");if(!m.length)return void f.error("请选择你拥有的生产能力标签！");const{success:I,message:g,data:h}=await((e={})=>oe({url:"/supplier/userManage/saveCompanyQualifyInfoV1",data:e}))({businessLicenseImgId:s,creditCode:a,label:m.join(","),operIdcardBackendId:d,operIdcardFrontId:p,operIdcardNo:c,operName:l,operPhoneNo:u});I?f.success(g):f.error(g)}catch(t){throw new Error(t)}}},mutations:ce};var fe;!function(e){e.UpdateInitInfo="UpdateInitInfo",e.UpdateOrderMessageList="UpdateOrderMessageList",e.UpdateJob="UpdateJob",e.UpdateUserMessageList="UpdateUserMessageList"}(fe||(fe={}));var Ie={[fe.UpdateInitInfo](e,t){const{initInfo:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.initInfo=Object.assign(o,n)}(e,t,o)},[fe.UpdateOrderMessageList](e,t){e.orderMessageList=t},[fe.UpdateJob](e,t){const{job:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.job=Object.assign(o,n)}(e,t,o)},[fe.UpdateUserMessageList](e,t){e.userMessageList=t}};var ge;!function(e){e.Init="Init",e.GetStatistics="GetStatistics",e.GetToBeDeal="GetToBeDeal",e.UpdatePageNum="UpdatePageNum",e.UpdatePageSize="UpdatePageSize"}(ge||(ge={}));var he={namespaced:!0,state:{initInfo:{},orderMessageList:[{text:"新竞价单",path:"/bidding",count:0},{text:"未完成订单",path:"/orderHome",count:0},{text:"待处理订单",path:"/orderHome",count:0},{text:"新消息",path:"",count:0}],job:{pageNum:1,pageSize:10,pageSizes:[10,20,50,100],total:0,list:[]},userMessageList:[]},getters:{},actions:{[ge.Init](e,t){const{state:o,rootState:n,dispatch:i,commit:s}=e,{accountInfo:a}=n;s(fe.UpdateInitInfo,d(r({},t||{}),{accountInfo:a})),i(ge.GetStatistics),i(ge.GetToBeDeal)},async[ge.GetStatistics](e){try{const{state:t,dispatch:o,commit:n}=e,{success:i,message:s,data:a}=await((e={})=>oe({url:"/supplier/mainPage/getStatistics",method:"GET",params:e}))();if(i){const{inCompleteOrderCount:e,messageCount:t,newBiddingCount:o,pendingOrderCount:i}=a||{},s=[];s.push({text:"新竞价单",path:"/bidding",count:o||0}),s.push({text:"未完成订单",path:"/orderHome",count:e||0}),s.push({text:"待处理订单",path:"/orderHome",count:i||0}),s.push({text:"新消息",path:"",count:t||0}),n(fe.UpdateOrderMessageList,s)}else f.error(s)}catch(t){throw new Error(t)}},async[ge.GetToBeDeal](e){try{const{state:t,dispatch:o,commit:n}=e,{success:i,message:s,data:a}=await((e={})=>oe({url:"/supplier/mainPage/getToBeDeal",method:"GET",params:e}))();if(i){const{list:e=[],total:t=0}=a||{};n(fe.UpdateJob,{list:e,total:Number(t)})}else f.error(s)}catch(t){throw new Error(t)}},[ge.UpdatePageNum](e,t){const{state:o,dispatch:n,commit:i}=e;i(fe.UpdateJob,{pageNum:t}),n(ge.GetToBeDeal)},[ge.UpdatePageSize](e,t){const{state:o,dispatch:n,commit:i}=e;i(fe.UpdateJob,{pageSize:t}),n(ge.UpdatePageNum,1)}},mutations:Ie};var ve;!function(e){e.UpdateInitInfo="UpdateInitInfo",e.UpdateBiddingIndex="UpdateBiddingIndex",e.UpdateBiddingList="UpdateBiddingList",e.UpdateBiddingDetail="UpdateBiddingDetail",e.UpdateMaterialAndColor="UpdateMaterialAndColor",e.UpdateTechnology="UpdateTechnology",e.UpdateArrangementScheme="UpdateArrangementScheme",e.UpdateProductInfo="UpdateProductInfo"}(ve||(ve={}));var ye={[ve.UpdateInitInfo](e,t){const{initInfo:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.initInfo=Object.assign(o,n)}(e,t,o)},[ve.UpdateBiddingIndex](e,t){e.biddingIndex=t},[ve.UpdateBiddingList](e,t){e.biddingList=t},[ve.UpdateBiddingDetail](e,t){const{biddingDetail:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.biddingDetail=Object.assign(o,n)}(e,t,o)},[ve.UpdateMaterialAndColor](e,t){const{materialAndColor:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.materialAndColor=Object.assign(o,n)}(e,t,o)},[ve.UpdateTechnology](e,t){const{technology:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.technology=Object.assign(o,n)}(e,t,o)},[ve.UpdateArrangementScheme](e,t){const{arrangementScheme:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.arrangementScheme=Object.assign(o,n)}(e,t,o)},[ve.UpdateProductInfo](e,t){const{productInfo:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.productInfo=Object.assign(o,n)}(e,t,o)}};const Le=(e={})=>oe({url:"/supplier/orderCenter/getPolyteneMatchedMould",method:"GET",params:e});var Ue;!function(e){e.Init="Init",e.GetMouldOrderType="GetMouldOrderType",e.UpdateBiddingIndex="UpdateBiddingIndex",e.GetBiddingList="GetBiddingList",e.CaculateCountdown="CaculateCountdown",e.UpdatePageNum="UpdatePageNum",e.UpdatePageSize="UpdatePageSize",e.UpdateMinPrice="UpdateMinPrice",e.UpdateMaxPrice="UpdateMaxPrice",e.UpdatePayDate="UpdatePayDate",e.UpdateUnit="UpdateUnit",e.UpdateMouldTypes="UpdateMouldTypes",e.UpdateProvinceCityCountry="UpdateProvinceCityCountry",e.JoinBidding="JoinBidding",e.RemoveBidding="RemoveBidding",e.GetBiddingDetail="GetBiddingDetail",e.UpdateProductInfoIndex="UpdateProductInfoIndex",e.GetMouldBiddingDetail="GetMouldBiddingDetail",e.GetTechnology="GetTechnology",e.GetMaterialAndColor="GetMaterialAndColor",e.GetArrangementScheme="GetArrangementScheme",e.GetProductInfo="GetProductInfo"}(Ue||(Ue={}));var we,be,Se={namespaced:!0,state:{initInfo:{},biddingIndex:0,biddingList:[{text:"竞价单",type:0,pageNum:1,pageSize:10,pageSizes:[10,20,50,100],total:0,minPrice:"",maxPrice:"",payDate:"",unit:"day",unitDes:"天",units:[{label:"天",value:"day"},{label:"小时",value:"hour"}],mouldTypes:[],projectIndex:0,projectList:[],provinceCityCountry:[],setTimeInterval:0,list:[]},{text:"竞价中",type:1,pageNum:1,pageSize:10,pageSizes:[10,20,50,100],total:0,minPrice:"",maxPrice:"",payDate:"",unit:"day",unitDes:"天",units:[{label:"天",value:"day"},{label:"小时",value:"hour"}],mouldTypes:[],projectIndex:0,projectList:[],provinceCityCountry:[],setTimeInterval:0,list:[]},{text:"我的中标",type:1,pageNum:1,pageSize:10,pageSizes:[10,20,50,100],total:0,minPrice:"",maxPrice:"",payDate:"",provinceCityCountry:[],list:[]},{text:"竞价历史",type:0,pageNum:1,pageSize:10,pageSizes:[10,20,50,100],total:0,minPrice:"",maxPrice:"",payDate:"",provinceCityCountry:[],list:[]}],biddingDetail:{isShow:!1,isEdit:!1,headId:0,biddingIndex:0,biddingHeadInfo:{accuracy:0,address:"",amount:"",anerror:0,termTime:"",unit:"",unitDesc:"",workPeriod:""},biddingState:0,joinBiddingInfo:{amount:0,supplierBiddingId:0,workPeriod:0},lifetime:"",productInfoIndex:-1,productInfos:[],realMouldNo:"",selectedUserBiddingInfo:{amount:0,supplierBiddingId:0,workPeriod:0},status:"",toleranceValue:"",type:"",typeDesc:""},technology:{isShow:!1,list:[]},materialAndColor:{isShow:!1,additiveType:"",additiveValue:"",brandNumber:"",colorType:0,colorValue:"",materialName:"",purpose:"",specialType:""},arrangementScheme:{isShow:!1,mouldLabeImages:[],isMatchedMould:0,matchedPlan:{attachment:[],attachmentAddress:"",cylinderNum:0,gateItems:[],gateType:"",hotRunnerHeight:"",hotRunnerNum:0,hotRunnerType:"",id:0,isHardnessMould:0,isMouldTemperature:0,isSimpleMould:0,looseCoreNum:0,moldingCycle:0,mouldCoreCncHeight:"",mouldCoreHeight:"",mouldCoreLength:"",mouldCoreWidth:"",mouldDelivery:0,mouldLabeImage:"",mouldType:"",orderMouldId:0,predictGateWeight:"",supplierName:""},moldingMaterialType:0},productInfo:{isShow:!1,id:0,productImage:"",productHeight:"",productLength:"",productNo:"",productNum:0,productWeight:"",productWidth:"",surfaceTreatment:"",fileUrl:""}},getters:{},actions:{[Ue.Init](e,t){const{state:o,dispatch:n,commit:i}=e;i(ve.UpdateInitInfo,r({},t||{}))},async[Ue.GetMouldOrderType](e){try{const{state:t,dispatch:o,commit:n}=e,{biddingIndex:i=0,biddingList:s=[]}=t,{type:a=0,pageNum:r=1,pageSize:d=10}=s[i]||{},{success:p,message:c,data:l}=await ie();if(p){const e=(e=>{const t=[];for(const[o,n]of e.entries()){const{index:e,label:o}=n;t.push({text:o,type:e})}return t})(l||{});s[i].mouldTypes=[],s[i].projectIndex=e.length?0:-1,s[i].projectList=e,n(ve.UpdateBiddingList,s)}else f.error(c)}catch(t){throw new Error(t)}},[Ue.UpdateBiddingIndex](e,t){const{state:o,dispatch:n,commit:i}=e;i(ve.UpdateBiddingIndex,t),n(Ue.GetMouldOrderType),n(Ue.UpdatePageNum,1)},async[Ue.GetBiddingList](e){try{const{state:t,dispatch:o,commit:n}=e,{biddingIndex:i=0,biddingList:s=[]}=t,{type:a=0,pageNum:r=1,pageSize:d=10}=s[i]||{};let p=null;if(0===i||1===i){const{mouldTypes:e,minPrice:t,maxPrice:o,payDate:n,unit:c}=s[i]||{};p=await((e={})=>oe({url:"/supplier/userMouldBidding/selectByUser",method:"GET",params:e}))({type:a,pageNum:r,pageSize:d,workPeriod:n,minAmount:t,maxAmount:o,mouldTypes:e&&e.join(","),unit:c})}else 2!==i&&3!==i||(p=await((e={})=>oe({url:"/supplier/userMouldBidding/selectMyBidding",method:"GET",params:e}))({type:a,pageNum:r,pageSize:d}));const{success:c,message:l,data:u}=p;if(c){const{list:e=[],total:t=0}=u||{};s[i].list=e,s[i].total=Number(t),n(ve.UpdateBiddingList,s),o(Ue.CaculateCountdown)}else f.error(l)}catch(t){throw new Error(t)}},[Ue.CaculateCountdown](e,t=!0){const{state:o,dispatch:n,commit:i}=e,{biddingIndex:s=0,biddingList:a=[]}=o,{setTimeInterval:r}=a[s]||{};if(0===s||1===s){const{list:e=[]}=a[s]||{};if(e.length){const o=e=>{if(e&&e.length)for(const[t,o]of e.entries()){const{termTime:n}=o;if(e[t].countdown={isTimeout:!1,year:0,month:0,day:0,hour:0,minute:0,second:0},n){const o=n.replace("-","/"),i=(new Date(o).getTime()-(new Date).getTime())/1e3,s=Math.abs(i);if(e[t].countdown.isTimeout=i<0,i<0)continue;e[t].countdown.year=Math.floor(s/31536e3),e[t].countdown.month=Math.floor(s/2592e3),e[t].countdown.day=Math.floor(s/86400),e[t].countdown.hour=Math.floor(s%86400/3600),e[t].countdown.minute=Math.floor(s%3600/60),e[t].countdown.second=Math.floor(s%60/1)}}a[s].list=JSON.parse(JSON.stringify(e)),i(ve.UpdateBiddingList,a)};if(o(e),r&&clearInterval(r),t){const t=setInterval((()=>{o(e)}),1e3);a[s].setTimeInterval=t,i(ve.UpdateBiddingList,a)}}else r&&clearInterval(r)}},[Ue.UpdatePageNum](e,t){const{state:o,dispatch:n,commit:i}=e,{biddingIndex:s=0,biddingList:a=[]}=o;a[s].pageNum=t,i(ve.UpdateBiddingList,a),n(Ue.GetBiddingList)},[Ue.UpdatePageSize](e,t){const{state:o,dispatch:n,commit:i}=e,{biddingIndex:s=0,biddingList:a=[]}=o;a[s].pageSize=t,i(ve.UpdateBiddingList,a),n(Ue.UpdatePageNum,1)},[Ue.UpdateMinPrice](e,t){const{state:o,dispatch:n,commit:i}=e,{biddingIndex:s=0,biddingList:a=[]}=o;a[s].minPrice=Number(t),i(ve.UpdateBiddingList,a),n(Ue.UpdatePageNum,1)},[Ue.UpdateMaxPrice](e,t){const{state:o,dispatch:n,commit:i}=e,{biddingIndex:s=0,biddingList:a=[]}=o;a[s].maxPrice=Number(t),i(ve.UpdateBiddingList,a),n(Ue.UpdatePageNum,1)},[Ue.UpdatePayDate](e,t){const{state:o,dispatch:n,commit:i}=e,{biddingIndex:s=0,biddingList:a=[]}=o;a[s].payDate=t,i(ve.UpdateBiddingList,a),n(Ue.UpdatePageNum,1)},[Ue.UpdateUnit](e,t){const{state:o,dispatch:n,commit:i}=e,{biddingIndex:s=0,biddingList:a=[]}=o,{units:r=[]}=a[s]||{};a[s].unit=((e,t,o,n)=>{if(e.length)for(const i of e)if(i[t]===o)return i[n];return""})(r,"label",t,"value"),a[s].unitDes=t,i(ve.UpdateBiddingList,a),n(Ue.UpdatePageNum,1)},[Ue.UpdateMouldTypes](e,t){const{state:o,dispatch:n,commit:i}=e,{biddingIndex:s=0,biddingList:a=[]}=o;a[s].mouldTypes=t,i(ve.UpdateBiddingList,a),n(Ue.UpdatePageNum,1)},[Ue.UpdateProvinceCityCountry](e,t){const{state:o,dispatch:n,commit:i}=e,{biddingIndex:s=0,biddingList:a=[]}=o;a[s].provinceCityCountry=t,i(ve.UpdateBiddingList,a),n(Ue.UpdatePageNum,1)},[Ue.GetBiddingDetail](e,t){const{state:o,dispatch:n,commit:i}=e,{biddingIndex:s=0,biddingList:a=[]}=o,{list:r=[]}=a[s]||{};let d="";if(s>1){const{biddingHeadId:e=""}=r[t]||{};d=e}else{const{id:e}=r[t]||{};d=e}i(ve.UpdateBiddingDetail,{headId:d,biddingIndex:s}),n(Ue.GetMouldBiddingDetail)},async[Ue.GetMouldBiddingDetail](e){try{const{state:t,dispatch:o,commit:n}=e,{biddingDetail:i}=t,{headId:s=""}=i||{},{success:a,message:p,data:c}=await((e={})=>{const{headId:t=""}=e;return oe({url:`/supplier/userMouldBidding/getMouldBiddingDetail/${t}`,method:"GET",params:{}})})({headId:s});if(a){const{productInfos:e=[]}=c||{},t=e.length?0:-1,o=e.map((e=>(e.productImage&&(e.productImageFull=$+e.productImage),e.fileUrl&&(e.fileUrlFull=$+e.fileUrl),e)));n(ve.UpdateBiddingDetail,d(r({},c||{}),{productInfos:o,productInfoIndex:t,isShow:!0}))}else f.error(p)}catch(t){throw new Error(t)}},async[Ue.JoinBidding](e){try{const{state:t,dispatch:o,commit:n}=e,{biddingDetail:i}=t,{joinBiddingInfo:s,biddingState:a,headId:r}=i||{},{supplierBiddingId:d,amount:p,workPeriod:c,unit:l}=s||{};let u=null;u=1===a?await((e={})=>oe({url:"/supplier/userMouldBidding/updateMouldBidding",data:e}))({amount:p,id:d,workPeriod:c,unit:l}):await((e={})=>oe({url:"/supplier/userMouldBidding/joinMouldBidding",data:e}))({amount:p,biddingHeadId:r,workPeriod:c,unit:l});const{success:m,message:I,data:g}=u;m?(f.success(I),o(Ue.GetBiddingList),o(Ue.GetMouldBiddingDetail)):f.error(I)}catch(t){throw new Error(t)}},async[Ue.RemoveBidding](e){try{const{state:t,dispatch:o,commit:n}=e,{biddingDetail:i}=t,{joinBiddingInfo:s,biddingState:a,headId:r}=i||{},{supplierBiddingId:d,amount:p,workPeriod:c}=s||{},{success:l,message:u,data:m}=await((e={})=>oe({url:"/supplier/userMouldBidding/removeMouldBidding",data:e}))({amount:p,id:r,workPeriod:c});l?(f.success(u),o(Ue.GetBiddingList),o(Ue.GetMouldBiddingDetail)):f.error(u)}catch(t){throw new Error(t)}},async[Ue.GetTechnology](e,t=-1){try{const{state:o,dispatch:n,commit:i}=e,{biddingDetail:s}=o,{productInfos:a=[]}=s||{},{id:r}=a[t]||{},{success:d,message:p,data:c}=await((e={})=>{const{headId:t=""}=e;return oe({url:`/supplier/userMouldBidding/getProductTechnology/${t}`,method:"GET",params:{}})})({headId:r});d?(i(ve.UpdateBiddingDetail,{productInfoIndex:t}),i(ve.UpdateTechnology,{list:c||[],isShow:!0})):f.error(p)}catch(o){throw new Error(o)}},async[Ue.GetMaterialAndColor](e,t=-1){try{const{state:o,dispatch:n,commit:i}=e,{biddingDetail:s}=o,{productInfos:a=[]}=s||{},{id:p}=a[t]||{},{success:c,message:l,data:u}=await((e={})=>{const{headId:t=""}=e;return oe({url:`/supplier/userMouldBidding/getMaterialAndColor/${t}`,method:"GET",params:{}})})({headId:p});c?(i(ve.UpdateBiddingDetail,{productInfoIndex:t}),i(ve.UpdateMaterialAndColor,d(r({},u||{}),{isShow:!0}))):f.error(l)}catch(o){throw new Error(o)}},async[Ue.GetArrangementScheme](e,t=-1){try{const{state:o,dispatch:n,commit:i}=e,{biddingDetail:s}=o,{productInfos:a=[]}=s||{},{orderMouldId:p,moldingMaterialType:c,productNo:l,id:u}=a[t]||{};let m=null;switch(c){case 1:m=await Le({orderMouldId:p});break;case 2:m=await((e={})=>oe({url:"/supplier/orderCenter/getSilicagelMould",method:"GET",params:e}))({orderMouldId:p});break;case 3:m=await((e={})=>oe({url:"/supplier/orderCenter/getMetalMould",method:"GET",params:e}))({orderMouldId:p});break;default:m=await Le({orderMouldId:p})}const{success:I,message:g,data:h}=m;if(I){const e=h||{},{matchedPlan:o}=e||{},{mouldLabeImage:n,gateItems:s}=o||{};o.gateItems=((e,t,o)=>{if(e&&e.length)for(const[n,i]of e.entries()){const{productIds:s}=i;e[n].productNo=s===t?o:""}return e})(s,u,l);let a=n?n.split(","):[];a.length&&(a=a.map((e=>$+e))),i(ve.UpdateBiddingDetail,{productInfoIndex:t}),i(ve.UpdateArrangementScheme,d(r({},e),{mouldLabeImages:a,matchedPlan:o,isShow:!0}))}else f.error(g)}catch(o){throw new Error(o)}},[Ue.GetProductInfo](e,t=-1){try{const{state:o,dispatch:n,commit:i}=e,{biddingDetail:s}=o,{productInfos:a=[]}=s||{},p=a[t]||{};i(ve.UpdateBiddingDetail,{productInfoIndex:t}),i(ve.UpdateProductInfo,d(r({},p),{isShow:!0}))}catch(o){throw new Error(o)}}},mutations:ye};(be=we||(we={})).Dfm="dfm",be.Design="plan_design",be.Machining="machining",be.Injection="injection",be.Hotrunner="hotrunner";var xe;(xe||(xe={})).OrderObject="OrderObject";const De={[xe.OrderObject](e){const{order:t}=e,{list:o=[],index:n=-1}=t||{};return o[n]||{}}};var Ae;!function(e){e.UpdateInitInfo="UpdateInitInfo",e.UpdateAdvantage="UpdateAdvantage",e.UpdateOrder="UpdateOrder",e.UpdateNavigationList="UpdateNavigationList",e.UpdateNavigationIndex="UpdateNavigationIndex",e.UpdateCountdown="UpdateCountdown",e.UpdateMould="UpdateMould",e.UpdateArrangementScheme="UpdateArrangementScheme",e.UpdateContact="UpdateContact"}(Ae||(Ae={}));var Pe={[Ae.UpdateInitInfo](e,t){const{initInfo:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.initInfo=Object.assign(o,n)}(e,t,o)},[Ae.UpdateAdvantage](e,t){const{advantage:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.advantage=Object.assign(o,n)}(e,t,o)},[Ae.UpdateOrder](e,t){const{order:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.order=Object.assign(o,n)}(e,t,o)},[Ae.UpdateNavigationList](e,t){e.navigationList=t},[Ae.UpdateNavigationIndex](e,t){e.navigationIndex=t},[Ae.UpdateCountdown](e,t){const{countdown:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.countdown=Object.assign(o,n)}(e,t,o)},[Ae.UpdateMould](e,t){const{mould:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.mould=Object.assign(o,n)}(e,t,o)},[Ae.UpdateArrangementScheme](e,t){const{arrangementScheme:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.arrangementScheme=Object.assign(o,n)}(e,t,o)},[Ae.UpdateContact](e,t){e.contact=t}};function Te(e="",t=""){e&&fetch(e,{headers:new Headers({Origin:location.origin}),mode:"cors"}).then((e=>(console.log(e),e.blob()))).then((e=>{console.log(e);const o=window.URL.createObjectURL(e);!function(e="",t=""){if(e){const o=document.createElement("a");o.download=t,o.href=e,document.body.appendChild(o),o.click(),o.remove()}}(o,t),window.URL.revokeObjectURL(o)}))}var Ce;!function(e){e.Init="Init",e.GetMouldOrderType="GetMouldOrderType",e.GetOrderStatus="GetOrderStatus",e.GetMyBidAdvantage="GetMyBidAdvantage",e.GetOrderList="GetOrderList",e.UpdatePageNum="UpdatePageNum",e.UpdatePageSize="UpdatePageSize",e.UpdateProjectIndex="UpdateProjectIndex",e.UpdateStatusIndex="UpdateStatusIndex",e.UpdateOrderNo="UpdateOrderNo",e.GetOrderDetail="GetOrderDetail",e.UpdateNavigationIndex="UpdateNavigationIndex",e.GetCountdown="GetCountdown",e.ExportDfm="ExportDfm",e.GetMould="GetMould",e.NeedChangeDrawing="NeedChangeDrawing",e.DfmApprovalDrawing="DfmApprovalDrawing",e.GetArrangementScheme="GetArrangementScheme",e.GetContact="GetContact"}(Ce||(Ce={}));var Me={[Ce.Init](e,t){const{state:o,dispatch:n,commit:i}=e;i(Ae.UpdateInitInfo,r({},t||{}))},async[Ce.GetMouldOrderType](e){try{const{state:t,dispatch:o,commit:n}=e,{success:i,message:s,data:a}=await ie();if(i){const e=(e=>{const t=[{text:"项目类型",type:""}];for(const[o,n]of e.entries()){const{index:e,label:o}=n;t.push({text:o,type:e})}return t})(a||{});n(Ae.UpdateOrder,{projectList:e})}else f.error(s)}catch(t){throw new Error(t)}},async[Ce.GetOrderStatus](e){try{const{state:t,dispatch:o,commit:n}=e,{success:i,message:s,data:a}=await((e={})=>oe({url:"/supplier/common/getOrderStatus",method:"GET",params:e}))();if(i){const e=(e=>{const t=[{text:"全部状态",status:""}];for(const[o,n]of e.entries()){const{index:e,label:o}=n;t.push({text:o,status:e})}return t})(a||{});n(Ae.UpdateOrder,{statusList:e})}else f.error(s)}catch(t){throw new Error(t)}},async[Ce.GetMyBidAdvantage](e){try{const{state:t,dispatch:o,commit:n}=e,{success:i,message:s,data:a}=await((e={})=>oe({url:"/supplier/orderCenter/getMyBidAdvantage",method:"GET",params:e}))();if(i){const{accuracy:e,anerror:t}=a||{};n(Ae.UpdateAdvantage,{accuracy:e,anerror:t}),o(Ce.GetMouldOrderType),o(Ce.GetOrderStatus)}else f.error(s)}catch(t){throw new Error(t)}},async[Ce.GetOrderList](e){try{const{state:t,dispatch:o,commit:n}=e,{order:i}=t,{pageNum:s=1,pageSize:a=10,orderNo:r="",projectIndex:d=0,projectList:p=[],statusIndex:c=0,statusList:l=[]}=i,{type:u=""}=p[d]||{},{status:m=""}=l[c]||{},{success:I,message:g,data:h}=await((e={})=>oe({url:"/supplier/orderCenter/list",method:"GET",params:e}))({pageNum:s,pageSize:a,status:m,type:u,param:r});if(I){const{list:e=[],total:t}=h||{};n(Ae.UpdateOrder,{list:e,total:Number(t)})}else f.error(g)}catch(t){throw new Error(t)}},[Ce.UpdatePageNum](e,t){const{state:o,dispatch:n,commit:i}=e;i(Ae.UpdateOrder,{pageNum:t}),n(Ce.GetOrderList)},[Ce.UpdatePageSize](e,t){const{state:o,dispatch:n,commit:i}=e;i(Ae.UpdateOrder,{pageSize:t}),n(Ce.UpdatePageNum,1)},[Ce.UpdateProjectIndex](e,t){const{state:o,dispatch:n,commit:i}=e;i(Ae.UpdateOrder,{projectIndex:t}),n(Ce.UpdatePageNum,1)},[Ce.UpdateStatusIndex](e,t){const{state:o,dispatch:n,commit:i}=e;i(Ae.UpdateOrder,{statusIndex:t}),n(Ce.UpdatePageNum,1)},[Ce.UpdateOrderNo](e,t){const{state:o,dispatch:n,commit:i}=e;i(Ae.UpdateOrder,{orderNo:t}),n(Ce.UpdatePageNum,1)},[Ce.GetOrderDetail](e,t){const{state:o,dispatch:n,commit:i}=e,{order:s}=o,{list:a=[]}=s||{},{type:d,mouldStatus:p=1}=a[t]||{};i(Ae.UpdateOrder,{index:t});const c=[];switch(d){case we.Dfm:n("order/report/Init",r({},a[t]),{root:!0}),c.push({text:"DFM报告",path:"/order/report",sequenceNumber:1,status:p>1?2:1===p?1:0});break;case we.Design:n("order/report/Init",r({},a[t]),{root:!0}),n("order/design/Init",r({},a[t]),{root:!0}),c.push({text:"DFM报告",path:"/order/report",sequenceNumber:1,status:p>1?2:1===p?1:0},{text:"方案设计",path:"/order/design",sequenceNumber:2,status:p>2?2:2===p?1:0});break;case we.Machining:n("order/report/Init",r({},a[t]),{root:!0}),n("order/design/Init",r({},a[t]),{root:!0}),n("order/process/Init",r({},a[t]),{root:!0}),n("order/prototype/Init",r({},a[t]),{root:!0}),c.push({text:"DFM报告验收",path:"/order/report",sequenceNumber:1,status:p>1?2:1===p?1:0},{text:"设计验收",path:"/order/design",sequenceNumber:2,status:p>2?2:2===p?1:0},{text:"加工",path:"/order/process",sequenceNumber:3,status:p>3?2:3===p?1:0},{text:"样件验收",path:"/order/prototype",sequenceNumber:4,status:p>5?2:5===p?1:0});break;case we.Injection:n("order/report/Init",r({},a[t]),{root:!0}),n("order/design/Init",r({},a[t]),{root:!0}),n("order/process/Init",r({},a[t]),{root:!0}),c.push({text:"DFM报告验收",path:"/order/report",sequenceNumber:1,status:p>1?2:1===p?1:0},{text:"设计验收",path:"/order/design",sequenceNumber:2,status:p>2?2:2===p?1:0},{text:"试模",path:"/order/process",sequenceNumber:3,status:p>4?2:4===p?1:0});break;case we.Hotrunner:n("order/design/Init",r({},a[t]),{root:!0}),c.push({text:"方案设计",path:"/order/design",sequenceNumber:1,status:p>1?2:1===p?1:0})}const l=(e=>{let t=-1;if(e&&e.length)for(const[o,n]of e.entries()){const{status:e}=n;if(1===e)return o;if(2!==e)break;t=o}return t})(c);i(Ae.UpdateNavigationList,c),n(Ce.UpdateNavigationIndex,l)},[Ce.UpdateNavigationIndex](e,t){const{state:o,dispatch:n,commit:i}=e,{navigationList:s=[]}=o,{path:a,status:r=0}=s[t]||{};r?(i(Ae.UpdateNavigationIndex,t),B.push({path:a})):f.error("还未到该步骤！")},async[Ce.GetCountdown](e,t=!0){try{const{state:o,dispatch:n,commit:i}=e,{order:s,countdown:a}=o,{list:d=[],index:p=-1}=s||{},{id:c}=d[p]||{},{success:l,message:u,data:m}=await((e={})=>oe({url:"/supplier/orderCenter/getRemainTime",method:"GET",params:e}))({orderId:c});if(l){const e=r(r({},a),m||{}),o=e=>{const{remainSeconds:t}=e,o=Math.abs(t);e.isTimeout=t<0,e.hour=Math.floor(o/3600),e.minute=Math.floor(o%3600/60),e.second=o%60,i(Ae.UpdateCountdown,r({},e))};o(e),e.setTimeInterval&&clearInterval(e.setTimeInterval),t&&0===e.state&&(e.setTimeInterval=setInterval((()=>{e.remainSeconds--,o(e)}),1e3),i(Ae.UpdateCountdown,r({},e)))}else f.error(u)}catch(o){throw new Error(o)}},async[Ce.GetContact](e){try{const{state:t,dispatch:o,commit:n}=e,{order:i}=t,{list:s=[],index:a=-1}=i||{},{orderNo:r,type:d}=s[a]||{};if(we.Dfm!==d||!r)return void n(Ae.UpdateContact,[]);const{success:p,message:c,data:l}=await((e={})=>oe({url:"/supplier/dfmReport/getSupplierByOrderNo",method:"GET",params:e}))({orderNo:r});p?n(Ae.UpdateContact,l||[]):f.error(c)}catch(t){throw new Error(t)}},async[Ce.ExportDfm](e){try{const{state:t,dispatch:o,commit:n}=e,{order:i}=t,{list:s=[],index:a=-1}=i||{},{id:r}=s[a]||{};if(!r)return;const d=I.service({lock:!0,text:"下载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),{success:p,message:c,data:l}=await((e={})=>oe({url:"/supplier/dfmReport/exportDfm",method:"GET",params:e}))({supplierOrderId:r});p?l&&Te($+l,l):f.error(c),d.close()}catch(t){throw new Error(t)}},async[Ce.GetMould](e){try{const{state:t,dispatch:o,commit:n}=e,{order:i}=t,{list:s=[],index:a=-1}=i||{},{id:r}=s[a]||{},{success:d,message:p,data:c}=await((e={})=>oe({url:"/supplier/dfmReport/selectProducts",method:"GET",params:e}))({orderId:r});d?n(Ae.UpdateMould,c||{}):f.error(p)}catch(t){throw new Error(t)}},async[Ce.NeedChangeDrawing](e,t){try{const{state:o,dispatch:n,commit:i}=e,{mould:s}=o,{index:a=-1}=t||{},{mouldProductList:r=[]}=s||{},{productId:d=""}=r[a]||{},{success:p,message:c,data:l}=await((e={})=>oe({url:"/supplier/dfmReport/needChangeDrawing",data:e}))({productId:d});p?(f.success(c),n(Ce.GetMould),n(Ce.GetCountdown)):f.error(c)}catch(o){throw new Error(o)}},async[Ce.DfmApprovalDrawing](e,t){try{const{state:o,dispatch:n,commit:i}=e,{mould:s}=o,{opinion:a=-1,index:r=-1}=t||{},{mouldProductList:d=[]}=s||{},{productId:p=""}=d[r]||{},{success:c,message:l,data:u}=await((e={})=>oe({url:"/supplier/dfmReport/approvalDrawing",data:e}))({productId:p,opinion:a});c?(f.success(l),n(Ce.GetMould),n(Ce.GetCountdown)):f.error(l)}catch(o){throw new Error(o)}},async[Ce.GetArrangementScheme](e){try{const{state:t,dispatch:o,commit:n}=e,{mould:i}=t,{mouldId:s}=i||{},{success:a,message:p,data:c}=await((e={})=>oe({url:"/supplier/orderCenter/getPolyteneMatchedMould",method:"GET",params:e}))({orderMouldId:s});if(a){const e=c||{},{matchedPlan:t}=e||{},{mouldLabeImage:o}=t||{};let i=o?o.split(","):[];i.length&&(i=i.map((e=>$+e))),n(Ae.UpdateArrangementScheme,d(r({},e),{mouldLabeImages:i,isShow:!0}))}else f.error(p)}catch(t){throw new Error(t)}}};var Re;!function(e){e.UpdateInitInfo="UpdateInitInfo",e.UpdateReportList="UpdateReportList",e.UpdateTimestamp="UpdateTimestamp",e.UpdateReasonContent="UpdateReasonContent"}(Re||(Re={}));var Ne={[Re.UpdateInitInfo](e,t){const{initInfo:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.initInfo=Object.assign(o,n)}(e,t,o)},[Re.UpdateReportList](e,t){e.reportList=t},[Re.UpdateTimestamp](e,t){e.timestamp=t},[Re.UpdateReasonContent](e,t){const{reasonContent:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.reasonContent=Object.assign(o,n)}(e,t,o)}};var Ge;!function(e){e.Init="Init",e.GetDfmReportList="GetDfmReportList",e.DeleteReportFile="DeleteReportFile",e.DeleteReportApprovalFile="DeleteReportApprovalFile",e.UpdateReportData="UpdateReportData",e.CommitReport="CommitReport",e.ApprovalDfmReport="ApprovalDfmReport",e.GetReasonContent="GetReasonContent"}(Ge||(Ge={}));var Oe={namespaced:!0,state:{initInfo:{},timestamp:0,reportList:[],reasonContent:{isShow:!1,title:"驳回原因",content:"",fileList:[]}},getters:{},actions:{[Ge.Init](e,t){const{state:o,dispatch:n,commit:i}=e;i(Re.UpdateInitInfo,t)},async[Ge.GetDfmReportList](e){try{const{state:t,dispatch:o,commit:n}=e,{initInfo:i}=t,{type:s,id:a}=i||{};let r={};switch(s){case we.Dfm:case we.Design:r=await((e={})=>oe({url:"/supplier/dfmReport/getReportsByOrder",method:"GET",params:e}))({supplierOrderId:a});break;case we.Machining:r=await((e={})=>oe({url:"/supplier/machining/getDfmReportList",method:"GET",params:e}))({supplierOrderId:a});break;case we.Injection:r=await((e={})=>oe({url:"/supplier/injectModel/getDfmReportList",method:"GET",params:e}))({supplierOrderId:a})}const{success:d,message:p,data:c}=r;if(d){const e=(e=>{for(const[t,o]of e.entries()){const{required:n,fileList:i=[],machiningApprovalInfo:s,injectionApprovalInfo:a}=o;e[t].required=!n}return e})(c||[]);return void n(Re.UpdateReportList,e)}f.error(p)}catch(t){throw new Error(t)}},[Ge.DeleteReportFile](e,t){const{state:o,dispatch:n,commit:i}=e,{reportList:s=[]}=o,{index:a,key:r}=t||{};s[a].fileList.splice(r,1),i(Re.UpdateReportList,s)},[Ge.DeleteReportApprovalFile](e,t){const{state:o,dispatch:n,commit:i}=e,{reportList:s=[],initInfo:a}=o,{type:r}=a||{},{index:d,text:p,name:c,key:l}=t||{};switch(r){case we.Dfm:break;case we.Machining:s[d].machiningApprovalInfo.approvalFiles.splice(l,1),s[d].machiningApprovalInfo.approvalFilesUrl.splice(l,1);break;case we.Injection:s[d].injectionApprovalInfo.approvalFiles.splice(l,1),s[d].injectionApprovalInfo.approvalFilesUrl.splice(l,1)}i(Re.UpdateReportList,s)},[Ge.UpdateReportData](e,t){const{state:o,dispatch:n,commit:i}=e,{reportList:s=[]}=o,{index:a,text:r,name:d,value:p}=t||{};r?s[a][r][d]=p:s[a][d]=p,i(Re.UpdateReportList,JSON.parse(JSON.stringify(s)))},async[Ge.CommitReport](e,t){try{const{state:o,dispatch:n,commit:i}=e,{reportList:s=[],initInfo:a}=o,{id:r}=a||{},{type:d}=t||{},p=[];if(s&&s.length)for(const[e,t]of s.entries()){const{describe:e,reportTitleId:o,fileList:n=[],required:i}=t,s=(e=>{const t=[];if(e&&e.length)for(const o of e){const{fileId:e}=o;e&&t.push(e)}return t})(n);if(2===d&&!i){if(!e)return void f.error("请输入报告描述");if(!s||!s.length)return void f.error("请上传图片")}p.push({reportTitleId:o,required:Number(!i),images:s,describe:e})}let c=null;switch(d){case 1:c=await((e={})=>oe({url:"/supplier/dfmReport/saveReport",data:e}))({supplierOrderId:r,dfmReportInfoList:p});break;case 2:c=await((e={})=>oe({url:"/supplier/dfmReport/commitReport",data:e}))({supplierOrderId:r,dfmReportInfoList:p})}const{success:l,message:u,data:m}=c;l?(f.success(u),n(Ge.GetDfmReportList),n("order/GetCountdown",null,{root:!0})):f.error(u)}catch(o){throw new Error(o)}},async[Ge.ApprovalDfmReport](e,t){try{const{state:o,dispatch:n,commit:i}=e,{reportList:s=[],initInfo:a}=o,{type:r,id:d}=a||{},{index:p}=t||{},{reportId:c,machiningApprovalInfo:l,injectionApprovalInfo:u}=s[p]||{};let m={};switch(r){case we.Dfm:break;case we.Machining:if(0===l.opinion&&!l.approvalContent)return void f.error("请输入驳回原因");m=await((e={})=>oe({url:"/supplier/machining/approvalDfmReport",data:e}))({approvalContent:l.approvalContent,dfmReportId:c,opinion:l.opinion,approvalFileIds:(e=>{const t=[];if(e&&e.length)for(const o of e){const{fileId:e}=o;e&&t.push(e)}return t})(l.approvalFiles)});break;case we.Injection:if(0===u.opinion&&!u.approvalContent)return void f.error("请输入驳回原因");m=await((e={})=>oe({url:"/supplier/injectModel/approvalDfmReport",data:e}))({approvalContent:u.approvalContent,dfmReportId:c,opinion:u.opinion,approvalFileIds:(e=>{const t=[];if(e&&e.length)for(const o of e){const{fileId:e}=o;e&&t.push(e)}return t})(u.approvalFiles)})}const{success:I,message:g,data:h}=m;I?(f.success(g),n(Ge.GetDfmReportList),n("order/GetCountdown",null,{root:!0})):f.error(g)}catch(o){throw new Error(o)}},[Ge.GetReasonContent](e,t){const{state:o,dispatch:n,commit:i}=e,{approvalContent:s="",approvalFiles:a=[]}=t||{},p=s,c=(e=>{const t=[];if(e&&e.length)for(const o of e){const{filePath:e}=o;e&&t.push(d(r({},o),{filePath:$+e}))}return t})(a);i(Re.UpdateReasonContent,{isShow:!0,content:p,fileList:c})}},mutations:Ne};var Be,Ee;(Ee=Be||(Be={})).BOMObject="BOMObject",Ee.ReasonObject="ReasonObject";const je={[Be.BOMObject](e){const{BOMInfo:t}=e,{navList:o=[],navIndex:n=0}=t||{};return o[n]||{}},[Be.ReasonObject](e){const{BOMInfo:t}=e,{reasonList:o=[],reasonIndex:n=0}=t||{};return o[n]||{}}};var Fe;!function(e){e.UpdateInitInfo="UpdateInitInfo",e.UpdateDesign="UpdateDesign",e.UpdateBOMTable="UpdateBOMTable",e.UpdateBOMImageInfo="UpdateBOMImageInfo",e.UpdateBOMInfo="UpdateBOMInfo",e.UpdateReasonContent="UpdateReasonContent",e.UpdateConfirmModel="UpdateConfirmModel",e.UpdateDesignVersion="UpdateDesignVersion"}(Fe||(Fe={}));var $e={[Fe.UpdateInitInfo](e,t){const{initInfo:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.initInfo=Object.assign(o,n)}(e,t,o)},[Fe.UpdateDesign](e,t){const{design:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.design=Object.assign(o,n)}(e,t,o)},[Fe.UpdateBOMTable](e,t){const{BOMTable:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.BOMTable=Object.assign(o,n)}(e,t,o)},[Fe.UpdateBOMImageInfo](e,t){const{BOMImageInfo:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.BOMImageInfo=Object.assign(o,n)}(e,t,o)},[Fe.UpdateBOMInfo](e,t){const{BOMInfo:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.BOMInfo=Object.assign(o,n)}(e,t,o)},[Fe.UpdateReasonContent](e,t){const{reasonContent:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.reasonContent=Object.assign(o,n)}(e,t,o)},[Fe.UpdateConfirmModel](e,t){const{confirmModel:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.confirmModel=Object.assign(o,n)}(e,t,o)},[Fe.UpdateDesignVersion](e,t){const{designVersion:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.designVersion=Object.assign(o,n)}(e,t,o)}};const Ve=(e={})=>oe({url:"/supplier/planDesign/getApprovalFilePath",data:e}),_e=(e={},t={})=>oe({url:"/supplier/planDesign/threeFaceDesign/commit",data:e,params:t});var ke;!function(e){e.Init="Init",e.GetDesignList="GetDesignList",e.UpdateVersionIndex="UpdateVersionIndex",e.UpdateOpinion="UpdateOpinion",e.UpdateCause="UpdateCause",e.AddReasonFile="AddReasonFile",e.DeleteReasonFile="DeleteReasonFile",e.UpdateFileList="UpdateFileList",e.CommitFile="CommitFile",e.ApprovalDesign="ApprovalDesign",e.GetApprovalFilePath="GetApprovalFilePath",e.UpdateBOMInfo="UpdateBOMInfo",e.UpdateReasonIndex="UpdateReasonIndex",e.UpdateNavIndex="UpdateNavIndex",e.UpdateBOMInfoPageSize="UpdateBOMInfoPageSize",e.UpdateBOMInfoPageNum="UpdateBOMInfoPageNum",e.GetBOMInfo="GetBOMInfo",e.ImportBom="ImportBom",e.ImportBomImage="ImportBomImage",e.SaveBomList="SaveBomList",e.ApprovalBomImage="ApprovalBomImage",e.ApprovalBom="ApprovalBom",e.GetReasonContent="GetReasonContent",e.GetConfirmModel="GetConfirmModel",e.ClearConfirmModel="ClearConfirmModel",e.UpdateConfirmModel="UpdateConfirmModel"}(ke||(ke={}));var Qe={namespaced:!0,state:{initInfo:{},design:{designList:[],stepInfoList:[],fileList:[]},BOMTable:{isShow:!1,pageNum:1,pageSize:10,pageSizes:[10,20,50,100,200],total:0,pages:0,list:[],isEdit:!1},BOMImageInfo:{isShow:!1,pageNum:1,pageSize:10,pageSizes:[10,20,50,100,200],total:0,pages:0,bomDesignFiles:[],list:[],isEdit:!1},BOMInfo:{isShow:!1,editType:0,bomDesignFiles:[],reasonIndex:0,reasonList:[],navIndex:0,navList:[{text:"模胚",bomType:1,bomName:"模胚-BOM模板.xls",bomPath:"/bom/模胚-BOM模板.xls",pageNum:1,pageSize:10,pageSizes:[10,20,50,100,200],total:0,pages:0,list:[]},{text:"模仁",bomType:2,bomName:"模仁-BOM模板.xls",bomPath:"/bom/模仁-BOM模板.xls",pageNum:1,pageSize:10,pageSizes:[10,20,50,100,200],total:0,pages:0,list:[]},{text:"标准件",bomType:3,bomName:"标准件-BOM模板.xls",bomPath:"/bom/标准件-BOM模板.xls",pageNum:1,pageSize:10,pageSizes:[10,20,50,100,200],total:0,pages:0,list:[]},{text:"散件",bomType:4,bomName:"散件-BOM模板.xls",bomPath:"/bom/散件-BOM模板.xls",pageNum:1,pageSize:10,pageSizes:[10,20,50,100,200],total:0,pages:0,list:[]}]},reasonContent:{isShow:!1,title:"",content:"",fileList:[]},confirmModel:{isShow:!1,confirm:-1,title:"",content:"",fileList:[],isShowUpdate3D:!1,isUpdate3D:!1,approvalType:0,opinion:-1,role:0,mouldBomListIds:[]},designVersion:{isShow:!1,list:[]}},getters:je,actions:{[ke.Init](e,t){const{state:o,dispatch:n,commit:i}=e;i(Fe.UpdateInitInfo,t)},async[ke.GetDesignList](e){var t,o,n,i,s,a,p,c,l;try{const{state:u,dispatch:m,commit:I}=e,{initInfo:g}=u,{type:h,mouldProduceId:v}=g;let y={};switch(h){case we.Dfm:break;case we.Design:y=await((e={})=>oe({url:"/supplier/planDesign/getPlanDesignRealtime",method:"GET",params:e}))({mouldProduceId:v});break;case we.Machining:y=await((e={})=>oe({url:"/supplier/planDesign/getMachinRealtime",method:"GET",params:e}))({mouldProduceId:v});break;case we.Injection:y=await((e={})=>oe({url:"/supplier/planDesign/getInjectionRealtime",method:"GET",params:e}))({mouldProduceId:v});break;case we.Hotrunner:y=await((e={})=>oe({url:"/supplier/planDesign/getHotRunnerRealtime",method:"GET",params:e}))({mouldProduceId:v})}const{success:L,message:U,data:w}=y;if(L){const{stepInfoList:e=[],canUse:u,fileInfoFor3DList:m,fileInfoForHotList:f,hotRunnerInfoList:g,mouldProduceId:v}=w||{},y=[];switch(h){case we.Dfm:break;case we.Design:if(e&&e.length){for(const[i,s]of e.entries()){const{approvalInfoList:a,fileId:p,fileName:c,filePath:l,updateTime:u,version:m,approveStatus:f,canUse:I,hotRunner:g,update3D:h,versionInfoList:v,hotRunnerInfoList:y,hotRunnerVersionInfoList:L,stepId:U}=s;if(e[i].title="1"===U?"上传3D图纸方案":"2"===U?"导入BOM表":"--",e[i].ext="1"===U?"(.stp文件)":"2"===U?"(.xls文件)":"--",e[i].versionInfoList=(null==v?void 0:v.length)?v:[],e[i].hotRunnerInfoList=(null==y?void 0:y.length)?y:[],e[i].hotRunnerVersionInfoList=(null==L?void 0:L.length)?L:[],e[i].fileList=[],e[i].hotRunnerFileList=[],e[i].hotRunner3dFileList=[],e[i].uploadType=0===I?0:1===h?3:(null==y?void 0:y.length)>0?0:0===f&&p?4:0===f?1:1===f?2:2===f?3:0,(null==y?void 0:y.length)>0||!p||e[i].versionInfoList.push({allApprovalInfoList:a,fileId:p,fileName:c,filePath:l,updateTime:u,version:m,approveStatus:f}),e[i].versionInfoList&&e[i].versionInfoList.length)for(const[t,o]of e[i].versionInfoList.entries()){const{allApprovalInfoList:n,approveStatus:s=-1}=o;e[i].versionInfoList[t].approveStatus=s,e[i].versionInfoList[t].allApprovalInfoList=(e=>{const t=[],o=new Map;for(const[n,i]of e.entries())o.set(i.type,d(r({},i),{editType:0,reasonFiles:[]}));o.get("1")||o.set("1",{approvalIds:"",approvalTime:"",cause:"",opinion:null,editType:0,opinionDesc:"",type:"1",version:0,reasonFiles:[]}),o.get("2")||o.set("2",{approvalIds:"",approvalTime:"",cause:"",opinion:null,editType:0,opinionDesc:"",type:"2",version:0,reasonFiles:[]});for(const[n,i]of o.entries())i&&t.push(i);return t})(n||[])}if(e[i].uploadHotrunnerType=0===g?0:0===(null==y?void 0:y.length)?10:11,y&&y.length)for(const[t,o]of y.entries()){const{opinion:n,cause:s,approvalFileId:a}=o;e[i].hotRunnerInfoList[t].allApprovalInfoList=[{type:"0",cause:s,opinion:0===n?0:1===n?null:2===n?1:-1,opinionDesc:"",approvalTime:"",approvalIds:a,editType:1===n?1:0,reasonFiles:[]}],1===g&&t===y.length-1?e[i].hotRunnerInfoList[t].approveStatus=0===n?2:1===n?3:null===n?1:0:e[i].hotRunnerInfoList[t].approveStatus=-1}if(e[i].uploadHotrunner3dType=0===g?0:1===h?3:0===(null==y?void 0:y.length)?0:0===f&&p?4:0===f?1:1===f?2:2===f?3:2,(null==y?void 0:y.length)>0&&p&&e[i].hotRunnerVersionInfoList.push({allApprovalInfoList:a,fileId:p,fileName:c,filePath:l,updateTime:u,version:m,approveStatus:f}),e[i].hotRunnerVersionInfoList&&e[i].hotRunnerVersionInfoList.length)for(const[t,o]of e[i].hotRunnerVersionInfoList.entries()){const{allApprovalInfoList:n,approveStatus:s=-1}=o;e[i].hotRunnerVersionInfoList[t].approveStatus=s,e[i].hotRunnerVersionInfoList[t].allApprovalInfoList=(e=>{const t=[],o=new Map;for(const[n,i]of e.entries())o.set(i.type,d(r({},i),{editType:0,reasonFiles:[]}));o.get("1")||o.set("1",{approvalIds:"",approvalTime:"",cause:"",opinion:null,editType:0,opinionDesc:"",type:"1",version:0,reasonFiles:[]}),o.get("2")||o.set("2",{approvalIds:"",approvalTime:"",cause:"",opinion:null,editType:0,opinionDesc:"",type:"2",version:0,reasonFiles:[]});for(const[n,i]of o.entries())i&&t.push(i);return t})(n||[])}e[i].versionInfoIndex=(null==(t=e[i].versionInfoList)?void 0:t.length)?e[i].versionInfoList.length-1:-1,e[i].hotRunnerInfoIndex=(null==(o=e[i].hotRunnerInfoList)?void 0:o.length)?e[i].hotRunnerInfoList.length-1:-1,e[i].hotRunnerVersionInfoIndex=(null==(n=e[i].hotRunnerVersionInfoList)?void 0:n.length)?e[i].hotRunnerVersionInfoList.length-1:-1}y.push(...e)}break;case we.Machining:if(e&&e.length){for(const[t,o]of e.entries()){const{approvalInfoList:n,fileId:p,fileName:c,filePath:l,updateTime:u,version:m,approveStatus:f,canUse:I,hotRunner:g,update3D:h,versionInfoList:v,hotRunnerInfoList:y,hotRunnerVersionInfoList:L,stepId:U}=o;if(e[t].title="1"===U?"审核3D图纸方案":"2"===U?"审核BOM表":"--",e[t].ext="1"===U?"(.stp文件)":"2"===U?"(.xls文件)":"--",e[t].versionInfoList=(null==v?void 0:v.length)?v:[],e[t].hotRunnerInfoList=(null==y?void 0:y.length)?y:[],e[t].hotRunnerVersionInfoList=(null==L?void 0:L.length)?L:[],e[t].fileList=[],e[t].hotRunnerFileList=[],e[t].hotRunner3dFileList=[],e[t].uploadType=0===I||(null==y?void 0:y.length)>0?0:0===(null==v?void 0:v.length)?10:1===f?11:0,(null==y?void 0:y.length)>0||!p||e[t].versionInfoList.push({allApprovalInfoList:n,fileId:p,fileName:c,filePath:l,updateTime:u,version:m,approveStatus:f}),e[t].versionInfoList&&e[t].versionInfoList.length)for(const[o,i]of e[t].versionInfoList.entries()){const{allApprovalInfoList:n}=i;e[t].versionInfoList[o].allApprovalInfoList=((e,t)=>{const o=[],n=new Map;for(const[i,s]of e.entries()){const{type:e,opinion:o}=s;n.set(s.type,d(r({},s),{editType:t&&"1"===e&&0!==o&&1!==o?1:0,reasonFiles:[]}))}n.get("1")||n.set("1",{approvalIds:"",approvalTime:"",cause:"",opinion:null,editType:t?1:0,opinionDesc:"",type:"1",version:0,reasonFiles:[]}),n.get("2")||n.set("2",{approvalIds:"",approvalTime:"",cause:"",opinion:null,editType:0,opinionDesc:"",type:"2",version:0,reasonFiles:[]});for(const[i,s]of n.entries())s&&o.push(s);return o})(n||[],!((null==y?void 0:y.length)>0)&&p&&o===e[t].versionInfoList.length-1),(null==y?void 0:y.length)>0||!p||o!==e[t].versionInfoList.length-1?e[t].versionInfoList[o].approveStatus=-1:(e[t].versionInfoList[o].approveStatus=f,e[t].versionInfoList[o].allApprovalInfoList.some((e=>1===e.editType))?e[t].uploadType=11:e[t].uploadType=12)}if(e[t].uploadHotrunnerType=0,y&&y.length)for(const[o,i]of y.entries()){const{opinion:n,cause:s,approvalFileId:a}=i;e[t].hotRunnerInfoList[o].allApprovalInfoList=[{type:"1",cause:s,opinion:0===n?0:1===n?null:2===n?1:-1,opinionDesc:"",approvalTime:"",approvalIds:a,editType:0,reasonFiles:[]}],1===g&&o===y.length-1?e[t].hotRunnerInfoList[o].approveStatus=0===n?2:1===n?1:2===n?3:-1:e[t].hotRunnerInfoList[o].approveStatus=-1}if(e[t].uploadHotrunner3dType=0===g||0===(null==y?void 0:y.length)?0:1===f?11:0===f&&0===(null==L?void 0:L.length)?10:12,(null==y?void 0:y.length)>0&&p&&e[t].hotRunnerVersionInfoList.push({allApprovalInfoList:n,fileId:p,fileName:c,filePath:l,updateTime:u,version:m,approveStatus:f}),e[t].hotRunnerVersionInfoList&&e[t].hotRunnerVersionInfoList.length)for(const[o,i]of e[t].hotRunnerVersionInfoList.entries()){const{allApprovalInfoList:n,approveStatus:s=-1}=i;e[t].hotRunnerVersionInfoList[o].approveStatus=s,e[t].hotRunnerVersionInfoList[o].allApprovalInfoList=((e,t)=>{const o=[],n=new Map;for(const[i,s]of e.entries()){const{type:e,opinion:o}=s;n.set(s.type,d(r({},s),{editType:t&&"1"===e&&0!==o&&1!==o?1:0,reasonFiles:[]}))}n.get("1")||n.set("1",{approvalIds:"",approvalTime:"",cause:"",opinion:null,editType:t?1:0,opinionDesc:"",type:"1",version:0,reasonFiles:[]}),n.get("2")||n.set("2",{approvalIds:"",approvalTime:"",cause:"",opinion:null,editType:0,opinionDesc:"",type:"2",version:0,reasonFiles:[]});for(const[i,s]of n.entries())s&&o.push(s);return o})(n||[],(null==y?void 0:y.length)>0&&p&&o===e[t].hotRunnerVersionInfoList.length-1)}e[t].versionInfoIndex=(null==(i=e[t].versionInfoList)?void 0:i.length)?e[t].versionInfoList.length-1:-1,e[t].hotRunnerInfoIndex=(null==(s=e[t].hotRunnerInfoList)?void 0:s.length)?e[t].hotRunnerInfoList.length-1:-1,e[t].hotRunnerVersionInfoIndex=(null==(a=e[t].hotRunnerVersionInfoList)?void 0:a.length)?e[t].hotRunnerVersionInfoList.length-1:-1}y.push(...e)}break;case we.Injection:if(e&&e.length){for(const[t,o]of e.entries()){const{approvalInfoList:n,fileId:i,fileName:s,filePath:a,updateTime:u,version:m,approveStatus:f,canUse:I,hotRunner:g,update3D:h,versionInfoList:v,hotRunnerInfoList:y,hotRunnerVersionInfoList:L,stepId:U}=o;if(e[t].title="1"===U?"审核3D图纸方案":"2"===U?"审核BOM表":"--",e[t].ext="1"===U?"(.stp文件)":"2"===U?"(.xls文件)":"--",e[t].versionInfoList=(null==v?void 0:v.length)?v:[],e[t].hotRunnerInfoList=(null==y?void 0:y.length)?y:[],e[t].hotRunnerVersionInfoList=(null==L?void 0:L.length)?L:[],e[t].fileList=[],e[t].hotRunnerFileList=[],e[t].hotRunner3dFileList=[],e[t].uploadType=0===I?0:0===(null==v?void 0:v.length)?10:1===f?11:0,(null==y?void 0:y.length)>0||!i||e[t].versionInfoList.push({allApprovalInfoList:n,fileId:i,fileName:s,filePath:a,updateTime:u,version:m,approveStatus:f}),e[t].versionInfoList&&e[t].versionInfoList.length)for(const[o,p]of e[t].versionInfoList.entries()){const{allApprovalInfoList:n}=p;e[t].versionInfoList[o].allApprovalInfoList=((e,t)=>{const o=[],n=new Map;for(const[i,s]of e.entries()){const{type:e,opinion:o}=s;n.set(s.type,d(r({},s),{editType:t&&"2"===e&&0!==o&&1!==o?1:0,reasonFiles:[]}))}n.get("2")||n.set("2",{approvalIds:"",approvalTime:"",cause:"",opinion:null,editType:t?1:0,opinionDesc:"",type:"2",version:0,reasonFiles:[]}),n.get("1")||n.set("1",{approvalIds:"",approvalTime:"",cause:"",opinion:null,editType:0,opinionDesc:"",type:"1",version:0,reasonFiles:[]});for(const[i,s]of n.entries())s&&o.push(s);return o})(n||[],!((null==y?void 0:y.length)>0)&&i&&o===e[t].versionInfoList.length-1),(null==y?void 0:y.length)>0||!i||o!==e[t].versionInfoList.length-1?e[t].versionInfoList[o].approveStatus=-1:(e[t].versionInfoList[o].approveStatus=f,e[t].versionInfoList[o].allApprovalInfoList.some((e=>1===e.editType))?e[t].uploadType=11:e[t].uploadType=12)}if(e[t].uploadHotrunnerType=0,y&&y.length)for(const[o,r]of y.entries()){const{opinion:n,cause:i,approvalFileId:s}=r;e[t].hotRunnerInfoList[o].allApprovalInfoList=[{type:"2",cause:i,opinion:0===n?0:1===n?null:2===n?1:-1,opinionDesc:"",approvalTime:"",approvalIds:s,editType:0,reasonFiles:[]}],1===g&&o===y.length-1?e[t].hotRunnerInfoList[o].approveStatus=f:e[t].hotRunnerInfoList[o].approveStatus=-1}if(e[t].uploadHotrunner3dType=0===g||0===(null==y?void 0:y.length)?0:1===f?11:0===f&&0===(null==L?void 0:L.length)?10:12,(null==y?void 0:y.length)>0&&i&&e[t].hotRunnerVersionInfoList.push({allApprovalInfoList:n,fileId:i,fileName:s,filePath:a,updateTime:u,version:m,approveStatus:f}),e[t].hotRunnerVersionInfoList&&e[t].hotRunnerVersionInfoList.length)for(const[o,p]of e[t].hotRunnerVersionInfoList.entries()){const{allApprovalInfoList:n,approveStatus:s=-1}=p;e[t].hotRunnerVersionInfoList[o].approveStatus=s,e[t].hotRunnerVersionInfoList[o].allApprovalInfoList=((e,t)=>{const o=[],n=new Map;for(const[i,s]of e.entries()){const{type:e,opinion:o}=s;n.set(s.type,d(r({},s),{editType:t&&"2"===e&&0!==o&&1!==o?1:0,reasonFiles:[]}))}n.get("2")||n.set("2",{approvalIds:"",approvalTime:"",cause:"",opinion:null,editType:t?1:0,opinionDesc:"",type:"2",version:0,reasonFiles:[]}),n.get("1")||n.set("1",{approvalIds:"",approvalTime:"",cause:"",opinion:null,editType:0,opinionDesc:"",type:"1",version:0,reasonFiles:[]});for(const[i,s]of n.entries())s&&o.push(s);return o})(n||[],(null==y?void 0:y.length)>0&&i&&o===e[t].hotRunnerVersionInfoList.length-1)}e[t].versionInfoIndex=(null==(p=e[t].versionInfoList)?void 0:p.length)?e[t].versionInfoList.length-1:-1,e[t].hotRunnerInfoIndex=(null==(c=e[t].hotRunnerInfoList)?void 0:c.length)?e[t].hotRunnerInfoList.length-1:-1,e[t].hotRunnerVersionInfoIndex=(null==(l=e[t].hotRunnerVersionInfoList)?void 0:l.length)?e[t].hotRunnerVersionInfoList.length-1:-1}y.push(...e)}break;case we.Hotrunner:{const e=[{canUse:u,fileInfoFor3DList:m,fileInfoForHotList:f,mouldProduceId:v,stepId:"1",title:"上传热流道图纸方案",ext:"(.stp文件)",fileList:[],hotRunnerFileList:[],hotRunner3dFileList:[],hotRunner:1,uploadType:0,versionInfoIndex:(null==m?void 0:m.length)?m.length-1:-1,versionInfoList:(e=>{const t=[];if(e&&e.length)for(const o of e){const{fileId3D:e,fileName3D:n,filePath3D:i,updateTime3D:s}=o;t.push({allApprovalInfoList:[],fileId:e,fileName:n,filePath:i,updateTime:s,version:0,approveStatus:-1})}return t})(m),uploadHotrunnerType:0===(null==g?void 0:g.length)||0===g[g.length-1].opinion?1:1===g[g.length-1].opinion||2===g[g.length-1].opinion?2:0,hotRunnerInfoIndex:(null==g?void 0:g.length)?g.length-1:-1,hotRunnerInfoList:(e=>{if(g&&g.length)for(const[t,o]of g.entries()){const{opinion:e,cause:n,approvalFileId:i}=o;g[t].allApprovalInfoList=0===e||2===e?[{type:"0",cause:n,opinion:0===e?0:1===e?null:2===e?1:-1,opinionDesc:"",approvalTime:"",approvalIds:i,editType:0,reasonFiles:[]}]:[],t===g.length-1?g[t].approveStatus=0===e?2:1===e?1:2===e?3:-1:g[t].approveStatus=-1}return g})(),uploadHotrunner3dType:0===(null==g?void 0:g.length)?0:(null==f?void 0:f.length)>0?12:g[g.length-1].opinion>0?0:10,hotRunnerVersionInfoIndex:(null==f?void 0:f.length)?f.length-1:-1,hotRunnerVersionInfoList:(e=>{if(e&&e.length)for(const[t,o]of e.entries()){const{allApprovalInfoList:n}=o;e[t].allApprovalInfoList=((e,t)=>{const o=[],n=new Map;for(const[i,s]of e.entries())n.set(s.type,d(r({},s),{editType:0,reasonFiles:[]}));n.get("1")||n.set("1",{approvalIds:"",approvalTime:"",cause:"",opinion:null,editType:0,opinionDesc:"",type:"1",version:0,reasonFiles:[]}),n.get("2")||n.set("2",{approvalIds:"",approvalTime:"",cause:"",opinion:null,editType:0,opinionDesc:"",type:"2",version:0,reasonFiles:[]});for(const[i,s]of n.entries())s&&o.push(s);return o})(n||[]),e.length&&t===e.length-1?e[t].approveStatus=(e=>{let t=-1;if(e&&e.length)for(const[o,n]of e.entries()){const{opinion:e}=n;if(0===e)return 2;if(null===e)return 1;1===e&&(t=3)}return t})(n||[]):e[t].approveStatus=-1}return e})(f)}];y.push(...e)}}return void I(Fe.UpdateDesign,{designList:y})}f.error(U)}catch(u){throw new Error(u)}},[ke.UpdateVersionIndex](e,t){const{state:o,dispatch:n,commit:i}=e,{design:s}=o,{b:a,d:r,status:d}=t||{},{designList:p}=s||{};p[a]&&(1===d?p[a].versionInfoIndex=r:2===d?p[a].hotRunnerInfoIndex=r:3===d&&(p[a].hotRunnerVersionInfoIndex=r),i(Fe.UpdateDesign,{designList:p}))},[ke.UpdateOpinion](e,t){const{state:o,dispatch:n,commit:i}=e,{design:s}=o,{b:a,d:r,status:d,value:p}=t||{},{designList:c}=s||{};if(c[a]){if(1===d){const{versionInfoIndex:e,versionInfoList:t}=c[a]||{},{allApprovalInfoList:o}=t[e]||{};o[r].opinion=p}else if(2===d){const{hotRunnerInfoIndex:e,hotRunnerInfoList:t}=c[a]||{},{allApprovalInfoList:o}=t[e]||{};o[r].opinion=p}else if(3===d){const{hotRunnerVersionInfoIndex:e,hotRunnerVersionInfoList:t}=c[a]||{},{allApprovalInfoList:o}=t[e]||{};o[r].opinion=p}i(Fe.UpdateDesign,{designList:c})}},[ke.UpdateCause](e,t){const{state:o,dispatch:n,commit:i}=e,{design:s}=o,{b:a,d:r,status:d,value:p,isPaste:c=!1}=t||{},{designList:l}=s||{};if(l[a]){if(1===d){const{versionInfoIndex:e,versionInfoList:t}=l[a]||{},{allApprovalInfoList:o}=t[e]||{},{cause:n}=o[r];o[r].cause=c?n+p:p}else if(2===d){const{hotRunnerInfoIndex:e,hotRunnerInfoList:t}=l[a]||{},{allApprovalInfoList:o}=t[e]||{},{cause:n}=o[r];o[r].cause=c?n+p:p}else if(3===d){const{hotRunnerVersionInfoIndex:e,hotRunnerVersionInfoList:t}=l[a]||{},{allApprovalInfoList:o}=t[e]||{},{cause:n}=o[r];o[r].cause=c?n+p:p}i(Fe.UpdateDesign,{designList:l})}},[ke.AddReasonFile](e,t){const{state:o,dispatch:n,commit:i}=e,{design:s}=o,{b:a,d:r,status:d,value:p}=t||{},{id:c,fileName:l,filePath:u}=p||{},{designList:m}=s||{};if(m[a]){if(1===d){const{versionInfoIndex:e,versionInfoList:t}=m[a]||{},{allApprovalInfoList:o}=t[e]||{},{reasonFiles:n}=o[r]||{};n.push({fileId:c,fileName:l,filePath:u})}else if(2===d){const{hotRunnerInfoIndex:e,hotRunnerInfoList:t}=m[a]||{},{allApprovalInfoList:o}=t[e]||{},{reasonFiles:n}=o[r]||{};n.push({fileId:c,fileName:l,filePath:u})}else if(3===d){const{hotRunnerVersionInfoIndex:e,hotRunnerVersionInfoList:t}=m[a]||{},{allApprovalInfoList:o}=t[e]||{},{reasonFiles:n}=o[r]||{};n.push({fileId:c,fileName:l,filePath:u})}i(Fe.UpdateDesign,{designList:m})}},[ke.DeleteReasonFile](e,t){const{state:o,dispatch:n,commit:i}=e,{design:s}=o,{b:a,d:r,f:d,status:p,value:c}=t||{},{designList:l}=s||{};if(l[a]){if(1===p){const{versionInfoIndex:e,versionInfoList:t}=l[a]||{},{allApprovalInfoList:o}=t[e]||{},{reasonFiles:n}=o[r]||{};n.splice(d,1)}else if(2===p){const{hotRunnerInfoIndex:e,hotRunnerInfoList:t}=l[a]||{},{allApprovalInfoList:o}=t[e]||{},{reasonFiles:n}=o[r]||{};n.splice(d,1)}else if(3===p){const{hotRunnerVersionInfoIndex:e,hotRunnerVersionInfoList:t}=l[a]||{},{allApprovalInfoList:o}=t[e]||{},{reasonFiles:n}=o[r]||{};n.splice(d,1)}i(Fe.UpdateDesign,{designList:l})}},[ke.UpdateFileList](e,t){const{state:o,dispatch:n,commit:i}=e,{design:s}=o,{b:a,status:r,value:d}=t||{},{id:p,fileName:c,filePath:l}=d||{},{designList:u}=s||{};u[a]&&(1===r?u[a].fileList=[{fileId:p,fileName:c,filePath:l}]:2===r?u[a].hotRunnerFileList=[{fileId:p,fileName:c,filePath:l}]:3===r&&(u[a].hotRunner3dFileList=[{fileId:p,fileName:c,filePath:l}]),i(Fe.UpdateDesign,{designList:u}))},async[ke.CommitFile](e,t){try{const{state:o,dispatch:n,commit:i}=e,{b:s,status:a}=t||{},{initInfo:r,design:d}=o,{mouldProduceId:p}=r,{designList:c=[]}=d||{};let l=null;if(1===a){const{fileList:e}=c[s]||{},{fileId:t}=e[e.length-1]||{};if(!t)return void f.error("请上传3D图纸");l=await _e({mouldProduceId:p,threeFacePlanFileId:t})}else if(2===a){const{hotRunnerFileList:e}=c[s]||{},{fileId:t}=e[e.length-1]||{};if(!t)return void f.error("请上传热流道图纸");l=await((e={},t={})=>oe({url:"/supplier/planDesign/hotRunner/commit",data:e,params:t}))({mouldProduceId:p,hotRunnerPlanFileId:t})}else if(3===a){const{hotRunner3dFileList:e}=c[s]||{},{fileId:t}=e[e.length-1]||{};if(!t)return void f.error("请上传含热流道的3D图纸");l=await _e({mouldProduceId:p,threeFacePlanFileId:t})}const{success:u,message:m,data:I}=l;u?(f.success(m),n(ke.GetDesignList),n("order/GetCountdown",null,{root:!0})):f.error(m)}catch(o){throw new Error(o)}},[ke.ApprovalDesign](e,t){const{state:o,dispatch:n,commit:i}=e,{b:s,d:a,status:r}=t||{},{initInfo:d,design:p}=o,{mouldProduceId:c}=d,{designList:l}=p||{};l[s];const u=async(e={})=>{try{const{success:t,message:o,data:i}=await((e={})=>oe({url:"/supplier/planDesign/threeFaceDesign/approval",data:e}))(e);t?(f.success(o),n(ke.GetDesignList),n("order/GetCountdown",null,{root:!0})):f.error(o)}catch(t){throw new Error(t)}},m=async(e={})=>{try{const{success:t,message:o,data:i}=await((e={})=>oe({url:"/supplier/planDesign/hotRunner/approval",data:e}))(e);t?(f.success(o),n(ke.GetDesignList),n("order/GetCountdown",null,{root:!0})):f.error(o)}catch(t){throw new Error(t)}};if(l[s])if(1===r){const{versionInfoIndex:e,versionInfoList:t}=l[s]||{},{allApprovalInfoList:o}=t[e]||{},{reasonFiles:n,cause:i,type:r,opinion:d}=o[a]||{},p=n.map((e=>e.fileId)).join(",");if(!(0!==d||i&&p))return void f.error("请输入驳回理由或上传驳回图片");u({cause:i,fileIds:p,isHotRunner:0,mouldProduceId:c,opinion:d,role:r})}else if(2===r){const{hotRunnerInfoIndex:e,hotRunnerInfoList:t}=l[s]||{},{allApprovalInfoList:o}=t[e]||{},{reasonFiles:n,cause:i,type:r,opinion:d}=o[a]||{},p=n.map((e=>e.fileId)).join(",");if(!i||!p)return void f.error("请输入驳回理由或上传驳回图片");m({cause:i,fileIds:p,mouldProduceId:c,opinion:0})}else if(3===r){const{hotRunnerVersionInfoIndex:e,hotRunnerVersionInfoList:t}=l[s]||{},{allApprovalInfoList:o}=t[e]||{},{reasonFiles:n,cause:i,type:r,opinion:d}=o[a]||{},p=n.map((e=>e.fileId)).join(",");if(!(0!==d||i&&p))return void f.error("请输入驳回理由或上传驳回图片");u({cause:i,fileIds:p,isHotRunner:1,mouldProduceId:c,opinion:d,role:r})}},[ke.GetApprovalFilePath](e,t){const{state:o,dispatch:n,commit:i}=e,{b:s,d:a,f:p,status:c}=t||{},{design:l}=o,{designList:u}=l||{},m=async e=>{try{const{approvalIds:t,cause:o}=e||{},{success:n,message:s,data:a}=await Ve({fileIds:t});if(n){const e=(e=>{const t=[];if(e&&e.length)for(const o of e){const{filePath:e}=o;e&&t.push(d(r({},o),{filePath:$+e}))}return t})(a||[]);i(Fe.UpdateReasonContent,{isShow:!0,content:o,fileList:e})}else f.error(s)}catch(t){throw new Error(t)}};if(u[s])if(1===c){const{versionInfoIndex:e,versionInfoList:t}=u[s]||{},{allApprovalInfoList:o}=t[e]||{},{approvalIds:n,cause:r}=o[a]||{};n?m({approvalIds:n,cause:r}):i(Fe.UpdateReasonContent,{isShow:!0,content:r,fileList:[]})}else if(2===c){const{hotRunnerInfoIndex:e,hotRunnerInfoList:t}=u[s]||{},{allApprovalInfoList:o}=t[e]||{},{approvalIds:n,cause:r}=o[a]||{};n?m({approvalIds:n,cause:r}):i(Fe.UpdateReasonContent,{isShow:!0,content:r,fileList:[]})}else if(3===c){const{hotRunnerVersionInfoIndex:e,hotRunnerVersionInfoList:t}=u[s]||{},{allApprovalInfoList:o}=t[e]||{},{approvalIds:n,cause:r}=o[a]||{};n?m({approvalIds:n,cause:r}):i(Fe.UpdateReasonContent,{isShow:!0,content:r,fileList:[]})}},async[ke.UpdateBOMInfo](e,t){const{state:o,dispatch:n,commit:i}=e,{BOMInfo:s,design:a}=o,{b:p,editType:c}=t||{},{designList:l}=a||{},{versionInfoIndex:u,versionInfoList:m}=l[p]||{},{allApprovalInfoList:I}=m[u]||{},g=[];if(I&&I.length)for(const[v,y]of I.entries()){const{type:e,opinion:t,cause:o,approvalIds:n}=y;if(0===t)if(n)try{const{success:t,message:i,data:s}=await Ve({fileIds:n});if(t){const t=(e=>{const t=[];if(e&&e.length)for(const o of e){const{filePath:e}=o;e&&t.push(d(r({},o),{filePath:$+e}))}return t})(s||[]);g.push({text:"1"===e?"加工方":"2"===e?"试模方":"",content:o,fileList:t})}else f.error(i)}catch(h){throw new Error(h)}else g.push({text:"1"===e?"加工方":"2"===e?"试模方":"",content:o,fileList:[]})}i(Fe.UpdateBOMInfo,{isShow:!0,editType:c,reasonList:g,reasonIndex:g.length-1}),n(ke.UpdateNavIndex,0)},[ke.UpdateReasonIndex](e,t){const{state:o,dispatch:n,commit:i}=e;i(Fe.UpdateBOMInfo,{reasonIndex:t})},[ke.UpdateNavIndex](e,t){const{state:o,dispatch:n,commit:i}=e,{BOMInfo:s}=o,{navList:a}=s||{};a[t],i(Fe.UpdateBOMInfo,{navIndex:t}),n(ke.UpdateBOMInfoPageNum,1)},[ke.UpdateBOMInfoPageSize](e,t){const{state:o,dispatch:n,commit:i}=e,{BOMInfo:s}=o,{navList:a,navIndex:r}=s||{};a[r]&&(a[r].pageSize=t,i(Fe.UpdateBOMInfo,{navList:a}),n(ke.UpdateBOMInfoPageNum,1))},[ke.UpdateBOMInfoPageNum](e,t){const{state:o,dispatch:n,commit:i}=e,{BOMInfo:s}=o,{navList:a,navIndex:r}=s||{};a[r]&&(a[r].pageNum=t,i(Fe.UpdateBOMInfo,{navList:a}),n(ke.GetBOMInfo))},async[ke.GetBOMInfo](e){try{const{state:t,dispatch:o,commit:n}=e,{initInfo:i,BOMInfo:s}=t,{mouldProduceId:a}=i,{navList:r,navIndex:d}=s||{},{pageNum:p,pageSize:c,bomType:l}=r[d]||{},{success:u,message:m,data:I}=await((e={})=>oe({url:"/supplier/planDesign/bom/list",method:"GET",params:e}))({mouldProduceId:a,pageNum:p,pageSize:c,bomType:l});if(u){const{list:e=[],pages:t,total:o=0}=I||{};r[d].list=e,r[d].pages=Number(t),r[d].total=Number(o),n(Fe.UpdateBOMInfo,{navList:r,isShow:!0})}else f.error(m)}catch(t){throw new Error(t)}},async[ke.ImportBom](e,t){try{const{state:o,dispatch:n,commit:i}=e,{initInfo:s,BOMInfo:a}=o,{mouldProduceId:r}=s,{navList:d,navIndex:p}=a||{},{bomType:c}=d[p]||{},{success:l,message:u,data:m}=await((e={})=>oe({url:"/supplier/planDesign/importBom",data:e}))({mouldProduceId:r,bomFileId:t,bomType:c});l?(f.success(u),n(ke.GetBOMInfo),n(ke.GetDesignList),n("order/GetCountdown",null,{root:!0})):f.error(u)}catch(o){throw new Error(o)}},async[ke.ImportBomImage](e,t){try{const{state:o,dispatch:n,commit:i}=e,{initInfo:s}=o,{mouldProduceId:a}=s,{success:r,message:d,data:p}=await((e={})=>oe({url:"/supplier/planDesign/bomDesign/commit",data:e}))({mouldProduceId:a,bomDesignFiles:t});r?(f.success(d),n(ke.GetBOMInfo),n(ke.GetDesignList),n("order/GetCountdown",null,{root:!0})):f.error(d)}catch(o){throw new Error(o)}},async[ke.SaveBomList](e){try{const{state:t,dispatch:o,commit:n}=e,{initInfo:i}=t,{mouldProduceId:s}=i,{success:a,message:r,data:d}=await((e={})=>oe({url:"/supplier/planDesign/bom/saveList",method:"GET",params:e}))({mouldProduceId:s});a?(f.success(r),n(Fe.UpdateBOMInfo,{isShow:!1}),o(ke.GetDesignList),o("order/GetCountdown",null,{root:!0})):f.error(r)}catch(t){throw new Error(t)}},async[ke.ApprovalBom](e){const{state:t,dispatch:o,commit:n}=e,{initInfo:i,confirmModel:s}=t,{mouldProduceId:a}=i,{content:r,fileList:d,isUpdate3D:p,opinion:c,role:l}=s||{},u=d.map((e=>e.fileId)).join(",");try{const{success:e,message:t,data:i}=await((e={})=>oe({url:"/supplier/planDesign/approvalBom",data:e}))({mouldProduceId:a,cause:r,opinion:c,role:l,fileIds:u,update3D:Number(p)});e?(f.success(t),o(ke.ClearConfirmModel),n(Fe.UpdateBOMInfo,{isShow:!1}),o(ke.GetDesignList),o("order/GetCountdown",null,{root:!0})):f.error(t)}catch(m){throw new Error(m)}},async[ke.ApprovalBomImage](e,t){const{state:o,dispatch:n,commit:i}=e,{initInfo:s,confirmModel:a}=o,{mouldProduceId:r}=s,{content:d,fileList:p,mouldBomListIds:c,opinion:l,role:u}=a||{},m=p.map((e=>e.fileId)).join(",");try{const{success:e,message:t,data:o}=await((e={})=>oe({url:"/supplier/planDesign/bomDesign/approval",data:e}))({mouldProduceId:r,cause:d,mouldBomListIds:c,opinion:l,role:u,pictureIds:m});e?(f.success(t),n(ke.ClearConfirmModel),n(ke.GetBOMInfo),n(ke.GetDesignList),n("order/GetCountdown",null,{root:!0})):f.error(t)}catch(I){throw new Error(I)}},async[ke.GetReasonContent](e,t){const{state:o,dispatch:n,commit:i}=e,{content:s="",title:a="驳回原因",fileList:p}=t||{};if(p)try{const{success:e,message:t,data:o}=await Ve({fileIds:p});if(e){const e=(e=>{const t=[];if(e&&e.length)for(const o of e){const{filePath:e}=o;e&&t.push(d(r({},o),{filePath:$+e}))}return t})(o||[]);i(Fe.UpdateReasonContent,{isShow:!0,title:a,content:s,fileList:e})}else f.error(t)}catch(c){throw new Error(c)}else i(Fe.UpdateReasonContent,{isShow:!0,title:a,content:s,fileList:[]})},[ke.GetConfirmModel](e,t){const{state:o,dispatch:n,commit:i}=e,{BOMInfo:s}=o,{navList:a,navIndex:r}=s||{},{list:d}=a[r]||{},{approvalType:p,id:c,opinion:l,role:u,isShowUpdate3D:m}=t||{},f=1===p?d.map((e=>e.id)):[c];i(Fe.UpdateConfirmModel,{isShow:!0,confirm:0,title:1===l?"通过原因":0===l?"驳回原因":"",content:"",fileList:[],isShowUpdate3D:m,isUpdate3D:!1,approvalType:p,opinion:l,role:u,mouldBomListIds:f})},[ke.ClearConfirmModel](e){const{state:t,dispatch:o,commit:n}=e;n(Fe.UpdateConfirmModel,{isShow:!1,confirm:-1,title:"",content:"",fileList:[],isShowUpdate3D:!1,isUpdate3D:!1,approvalType:0,opinion:-1,role:0,mouldBomListIds:[]})},[ke.UpdateConfirmModel](e,t){const{state:o,dispatch:n,commit:i}=e,{confirmModel:s}=o,{confirm:a}=t||{},{approvalType:d}=s;0===a?n(ke.ClearConfirmModel):1===a?(i(Fe.UpdateConfirmModel,r({},t)),1===d?n(ke.ApprovalBom):2===d&&n(ke.ApprovalBomImage)):i(Fe.UpdateConfirmModel,r({},t))}},mutations:$e};var ze;!function(e){e.UpdateInitInfo="UpdateInitInfo",e.UpdateMachinStepList="UpdateMachinStepList",e.UpdateAssembleStepList="UpdateAssembleStepList",e.UpdateInjectionStepList="UpdateInjectionStepList"}(ze||(ze={}));var He={[ze.UpdateInitInfo](e,t){const{initInfo:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.initInfo=Object.assign(o,n)}(e,t,o)},[ze.UpdateMachinStepList](e,t){e.machinStepList=t},[ze.UpdateAssembleStepList](e,t){e.assembleStepList=t},[ze.UpdateInjectionStepList](e,t){e.injectionStepList=t}};const qe=(e={})=>oe({url:"/supplier/stepFlow/finishedStep",data:e});var Je;!function(e){e.Init="Init",e.GetMachinSteps="GetMachinSteps",e.GetAssembleSteps="GetAssembleSteps",e.GetInjectionSteps="GetInjectionSteps",e.FinishedStep="FinishedStep",e.DeleteStepFile="DeleteStepFile"}(Je||(Je={}));var Xe={namespaced:!0,state:{initInfo:{},machinStepList:[],assembleStepList:[],injectionStepList:[]},getters:{},actions:{[Je.Init](e,t){const{state:o,dispatch:n,commit:i}=e;i(ze.UpdateInitInfo,t)},async[Je.GetMachinSteps](e){try{const{state:t,dispatch:o,commit:n}=e,{initInfo:i}=t,{mouldProduceId:s}=i||{},{success:a,message:r,data:d}=await((e={})=>oe({url:"/supplier/stepFlow/getMachinSteps",method:"GET",params:e}))({mouldProduceId:s});if(a){const e=(e=>{for(const[t,o]of e.entries()){const{fileInfos:n=[]}=o;e[t].fileInfos=n&&n.length?n:[]}return e})(d||[]);n(ze.UpdateMachinStepList,e)}else f.error(r)}catch(t){throw new Error(t)}},async[Je.GetAssembleSteps](e){try{const{state:t,dispatch:o,commit:n}=e,{initInfo:i}=t,{mouldProduceId:s}=i||{},{success:a,message:r,data:d}=await((e={})=>oe({url:"/supplier/stepFlow/getAssembleSteps",method:"GET",params:e}))({mouldProduceId:s});if(a){const e=(e=>{for(const[t,o]of e.entries()){const{fileInfos:n=[]}=o;e[t].fileInfos=n&&n.length?n:[]}return e})(d||[]);n(ze.UpdateAssembleStepList,e)}else f.error(r)}catch(t){throw new Error(t)}},async[Je.GetInjectionSteps](e){try{const{state:t,dispatch:o,commit:n}=e,{initInfo:i}=t,{mouldProduceId:s}=i||{},{success:a,message:r,data:d}=await((e={})=>oe({url:"/supplier/stepFlow/getInjectionSteps",method:"GET",params:e}))({mouldProduceId:s});if(a){const e=(e=>{for(const[t,o]of e.entries()){const{fileInfos:n=[]}=o;e[t].fileInfos=n&&n.length?n:[]}return e})(d||[]);n(ze.UpdateInjectionStepList,e)}else f.error(r)}catch(t){throw new Error(t)}},async[Je.FinishedStep](e,t){try{const{state:o,dispatch:n,commit:i}=e,{initInfo:s,machinStepList:a=[],assembleStepList:r=[],injectionStepList:d=[]}=o,{mouldProduceId:p}=s||{},{type:c=0,index:l}=t||{};let u=null;if(1===c){const{stepId:e,fileInfos:t}=a[l]||{},o=(e=>{const t=[];for(const o of e){const{fileId:e}=o;e&&t.push(e)}return t})(t);u=await qe({mouldProduceId:p,fileIds:o,stepId:e})}else if(2===c){const{stepId:e,fileInfos:t}=r[l]||{},o=(e=>{const t=[];for(const o of e){const{fileId:e}=o;e&&t.push(e)}return t})(t);u=await qe({mouldProduceId:p,fileIds:o,stepId:e})}else if(3===c){const{stepId:e,fileInfos:t}=d[l]||{},o=(e=>{const t=[];for(const o of e){const{fileId:e}=o;e&&t.push(e)}return t})(t);u=await qe({mouldProduceId:p,fileIds:o,stepId:e})}const{success:m,message:I,data:g}=u;m?(f.success(I),1===c?(n(Je.GetMachinSteps),n(Je.GetAssembleSteps)):2===c?n(Je.GetAssembleSteps):3===c&&n(Je.GetInjectionSteps),n("order/GetCountdown",null,{root:!0})):f.error(I)}catch(o){throw new Error(o)}},[Je.DeleteStepFile](e,t){const{state:o,dispatch:n,commit:i}=e,{machinStepList:s=[],assembleStepList:a=[],injectionStepList:r=[]}=o,{type:d,index:p,key:c}=t||{};1===d?(s[p].fileInfos.splice(c,1),i(ze.UpdateMachinStepList,s)):2===d?(a[p].fileInfos.splice(c,1),i(ze.UpdateAssembleStepList,a)):3===d&&(r[p].fileInfos.splice(c,1),i(ze.UpdateInjectionStepList,r))}},mutations:He};var Ze;!function(e){e.UpdateInitInfo="UpdateInitInfo",e.UpdatePrototype="UpdatePrototype",e.UpdateCompanyReturnIndex="UpdateCompanyReturnIndex"}(Ze||(Ze={}));var We={[Ze.UpdateInitInfo](e,t){const{initInfo:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.initInfo=Object.assign(o,n)}(e,t,o)},[Ze.UpdatePrototype](e,t){const{prototype:o}=e;!function(e,t,n){for(const o in t)n[o]=t[o];e.prototype=Object.assign(o,n)}(e,t,o)},[Ze.UpdateCompanyReturnIndex](e,t){e.companyReturnIndex=t}};const Ye=(e={})=>oe({url:"/supplier/machining/answerQuestion",data:e});var Ke;!function(e){e.Init="Init",e.GetPrototype="GetPrototype",e.UpdatePrototypeData="UpdatePrototypeData",e.DeleteFile="DeleteFile",e.CommitMailInfo="CommitMailInfo",e.GetQuestionList="GetQuestionList",e.AnswerQuestion="AnswerQuestion"}(Ke||(Ke={}));const et=g({state:{initInfo:{},loginInfo:{accessToken:"",exist:!1,openId:"",supplierInfo:{},token:"",isFirstExist:!1},accountInfo:{type:0},verificationCodeNumber:0,loginNavIndex:0,loginNavList:[{text:"扫码登录"},{text:"验证码登录"}],isCheckProtocol:!1,isShowProtocol:!1,registerNavIndex:0,registerNavList:[{text:"微信授权"},{text:"信息填写"},{text:"开通成功"}],navigationIndex:0,navigationList:[{id:"1",text:"首页",icon:"src/assets/images/n_home.png",path:"/home",query:{},itemIndex:-1,itemList:[]},{id:"2",text:"订单中心",icon:"src/assets/images/n_order.png",path:"/orderHome",query:{},itemIndex:-1,itemList:[]},{id:"3",text:"竞价",icon:"src/assets/images/n_bidding.png",path:"/bidding",query:{},itemIndex:-1,itemList:[]},{id:"4",text:"账号管理",icon:"src/assets/images/n_account.png",path:"/account",query:{},itemIndex:-1,itemList:[{id:"4_1",text:"资料信息",icon:"",path:"/account/information",query:{}},{id:"4_2",text:"资质申请",icon:"",path:"/account/application",query:{}}]}]},getters:{},actions:re,mutations:Y,modules:{account:me,home:he,bidding:Se,order:{namespaced:!0,state:{initInfo:{},advantage:{accuracy:0,anerror:0},order:{pageNum:1,pageSize:10,pageSizes:[10,20,50,100],total:0,orderNo:"",projectIndex:0,projectList:[],statusIndex:0,statusList:[],index:-1,list:[]},navigationIndex:1,navigationList:[],countdown:{finishTime:"--",remainSeconds:0,startTime:"--",state:0,isTimeout:!1,hour:0,minute:0,second:0,setTimeInterval:0},stepList:[{text:"峻垃圾费",path:"/order/report",sequenceNumber:"1",status:2},{text:"峻垃圾费",path:"/order/report",sequenceNumber:"2",status:2},{text:"峻垃圾费",path:"/order/report",sequenceNumber:"3",status:1},{text:"峻垃圾费",path:"/order/report",sequenceNumber:"4",status:0},{text:"峻垃圾费",path:"/order/report",sequenceNumber:"5",status:0}],mould:{},arrangementScheme:{isShow:!1,mouldLabeImages:[],isMatchedMould:0,matchedPlan:{attachment:[],attachmentAddress:"",cylinderNum:0,gateItems:[],gateType:"",hotRunnerHeight:"",hotRunnerNum:0,hotRunnerType:"",id:0,isHardnessMould:0,isMouldTemperature:0,isSimpleMould:0,looseCoreNum:0,moldingCycle:0,mouldCoreCncHeight:"",mouldCoreHeight:"",mouldCoreLength:"",mouldCoreWidth:"",mouldDelivery:0,mouldLabeImage:"",mouldType:"",orderMouldId:0,predictGateWeight:"",supplierName:""},moldingMaterialType:0},contact:[]},getters:De,actions:Me,mutations:Pe,modules:{report:Oe,design:Qe,process:Xe,prototype:{namespaced:!0,state:{initInfo:{},prototype:{mouldProduceId:"",customerApproval:{approvalFiles:[{fileId:0,fileName:"",filePath:""}],cause:"",opinion:0},customerQuestions:[],platApproval:{approvalFiles:[{fileId:0,fileName:"",filePath:""}],cause:"",opinion:0},platStablePostInfo:{address:"深圳市宝安区",phoneNo:"14355663455",userName:"李白"},postState:0,samplePostInfo:{expressId:0,expressName:"顺丰快递",expressNum:"SF45674564",sampleConfirmation:[{fileId:0,fileName:"",filePath:""}],sampleDesc:"",sampleFiles:[{fileId:0,fileName:"",filePath:""}],sendType:0},status:0},postIndex:0,postList:[{name:"现场确认",sendType:1,isSelected:!1},{name:"快递邮寄",sendType:2,isSelected:!1},{name:"其他",sendType:3,isSelected:!1}],companyReturnIndex:0,companyReturnList:[{code:"SF",id:"505",name:"顺丰速运",reg:"^[A-Za-z0-9-]{4,35}$"},{code:"STO",id:"100",name:"申通快递",reg:"^(888|588|688|468|568|668|768|868|968)[0-9]{9}$|^(11|22)[0-9]{10}$|^(STO)[0-9]{10}$|^(37|33|11|22|44|55|66|77|88|99)[0-9]{11}$|^(4)[0-9]{11}$"},{code:"EMS",id:"2",name:"EMS",reg:"^[A-Z]{2}[0-9]{9}[A-Z]{2}$|^(10|11)[0-9]{11}$|^(50|51)[0-9]{11}$|^(95|97)[0-9]{11}$"},{code:"YUNDA",id:"102",name:"韵达快递",reg:"^(10|11|12|13|14|15|16|17|19|18|50|55|58|80|88|66|31|77|39)[0-9]{11}$|^[0-9]{13}$"},{code:"ZTO",id:"500",name:"中通快递",reg:"^((768|765|778|828|618|680|518|528|688|010|880|660|805|988|628|205|717|718|728|761|762|763|701|757|719|751|358|100|200|118|128|689|738|359|779|852)[0-9]{9})$|^((5711|2008|7380|1180|2009|2013|2010|1000|1010)[0-9]{8})$|^((8010|8021|8831|8013)[0-9]{6})$|^((1111|90|36|11|50|53|37|39|91|93|94|95|96|98)[0-9]{10})$|^((a|b|h)[0-9]{13})$|^((90|80|60)[0-9]{7})$|^((80|81)[0-9]{6})$|^((21|23|24|25|93|94|95|96|97|110|111|112|113|114|115|116|117|118|119|121|122|123|124|125|126|127|128|129|130|131)[0-9]{8})$|^(100|101|102|103|104|105|106|107|503|504|505|506|507)[0-9]{10}$|^(4)[0-9]{11}$|^(120)[0-9]{9}$|^(780)[0-9]{9}$|^(881)[0-9]{9}$|^(882|885)[0-9]{9}$|^(91|92)[0-9]{10}$|^(54|55|56)[0-9]{10}$|^(63)[0-9]{10}$|^(7)[0-9]{9}$|^(64)[0-9]{10}$|^(72)[0-9]{10}$|^(220|221|223|224|225|226|227|228|229)[0-9]{7}$|^(21|22|23|24|25|26|27|28|29)[0-9]{10}$|^3[0-9]{9}$|^2710[0-9]{11}$|^731[0-9]{11}$|^751[0-9]{11}$|^7320[0-9]{10}$"},{code:"HTKY",id:"502",name:"百世快递",reg:"^((A|B|D|E)[0-9]{12})$|^(BXA[0-9]{10})$|^(K8[0-9]{11})$|^(02[0-9]{11})$|^(000[0-9]{10})$|^(C0000[0-9]{8})$|^((21|22|23|24|25|26|27|28|29|30|31|32|33|34|35|36|37|38|39|61|63)[0-9]{10})$|^((50|51)[0-9]{12})$|^7[0-9]{13}$|^6[0-9]{13}$|^58[0-9]{14}$"},{code:"YTO",id:"101",name:"圆通速递",reg:"^[A-Za-z0-9]{2}[0-9]{10}$|^[A-Za-z0-9]{2}[0-9]{8}$|^[6-9][0-9]{17}$|^[DD]{2}[8-9][0-9]{15}$|^[Y][0-9]{12}$"},{code:"ZJS",id:"103",name:"宅急送",reg:"^[a-zA-Z0-9]{10}$|^(42|16)[0-9]{8}$|^A[0-9]{12}"},{code:"QFKD",id:"1216",name:"全峰快递",reg:"^[0-6|9][0-9]{11}$|^[7][0-8][0-9]{10}$|^[0-9]{15}$|^[S][0-9]{9,11}(-|)P[0-9]{1,2}$|^[0-9]{13}$|^[8][0,2-9][0,2-9][0-9]{9}$|^[8][1][0,2-9][0-9]{9}$|^[8][0,2-9][0-9]{10}$|^[8][1][1][0][8][9][0-9]{6}$"},{code:"TTKDEX",id:"504",name:"天天快递",reg:"^[0-9]{12}$"},{code:"EYB",id:"3",name:"EMS经济快递",reg:"^[A-Z]{2}[0-9]{9}[A-Z]{2}$|^(10|11)[0-9]{11}$|^(50|51)[0-9]{11}$|^(95|97)[0-9]{11}$"},{code:"UC",id:"1207",name:"优速快递",reg:"^VIP[0-9]{9}|V[0-9]{11}|[0-9]{12}$|^LBX[0-9]{15}-[2-9AZ]{1}-[1-9A-Z]{1}$|^(9001)[0-9]{8}$"},{code:"DBKD",id:"5000000110730",name:"德邦快递",reg:"^[5789]d{9}$"},{code:"GTO",id:"200143",name:"国通快递",reg:"^(3(([0-6]|[8-9])d{8})|((2|4|5|6)d{9})|(7(?![0|1|2|3|4|5|7|8|9])d{9})|(8(?![2-9])d{9})|(2|4)d{11})$"},{code:"SURE",id:"201174",name:"速尔快递",reg:"^(SUR)[0-9]{12}$|^[0-9]{12}$"},{code:"FEDEX",id:"106",name:"联邦快递",reg:"^[0-9]{12}$"},{code:"SHQ",id:"108",name:"华强物流",reg:"^[A-Za-z0-9]*[0|2|4|6|8]$"},{code:"UAPEX",id:"1259",name:"全一快递",reg:"^d{12}|d{11}$"},{code:"HOAU",id:"1191",name:"天地华宇",reg:"^[A-Za-z0-9]{8,9}$"},{code:"BEST",id:"105",name:"百世物流",reg:"^[0-9]{11,12}$"},{code:"LB",id:"1195",name:"龙邦速递",reg:"^[0-9]{12}$|^LBX[0-9]{15}-[2-9AZ]{1}-[1-9A-Z]{1}$|^[0-9]{15}$|^[0-9]{15}-[1-9A-Z]{1}-[1-9A-Z]{1}$"},{code:"XB",id:"1186",name:"新邦物流",reg:"^[0-9]{8}$|^[0-9]{10}$"},{code:"FAST",id:"1204",name:"快捷快递",reg:"^(?!440)(?!510)(?!520)(?!5231)([0-9]{9,13})$|^(P330[0-9]{8})$|^(D[0-9]{11})$|^(319)[0-9]{11}$|^(56)[0-9]{10}$|^(536)[0-9]{9}$"},{code:"POSTB",id:"200734",name:"邮政快递包裹",reg:"^([GA]|[KQ]|[PH]){2}[0-9]{9}([2-5][0-9]|[1][1-9]|[6][0-5])$|^[99]{2}[0-9]{11}$|^[96]{2}[0-9]{11}$|^[98]{2}[0-9]{11}$"},{code:"NEDA",id:"1192",name:"能达速递",reg:"^((88|)[0-9]{10})$|^((1|2|3|5|)[0-9]{9})$|^(90000[0-9]{7})$"},{code:"BJRFD-001",id:"100034107",name:"如风达配送",reg:"^[!-~]{1,100}$"},{code:"DBL",id:"107",name:"德邦物流",reg:"^[5789]d{9}$"},{code:"YCT",id:"1185",name:"黑猫宅急便",reg:"^[0-9]{12}$"},{code:"LTS",id:"1214",name:"联昊通",reg:"^[0-9]{9,12}$"},{code:"CNEX",id:"1056",name:"佳吉快递",reg:"^[7,1,9][0-9]{9}$"},{code:"HZABC",id:"1121",name:"飞远(爱彼西)配送",reg:"^[0-9]{10,11}$|^T[0-9]{10}$|^FYPS[0-9]{12}$|^LBX[0-9]{15}-[2-9AZ]{1}-[1-9A-Z]{1}$"},{code:"XFWL",id:"202855",name:"信丰物流",reg:"^130[0-9]{9}|13[7-9]{1}[0-9]{9}|18[8-9]{1}[0-9]{9}$"},{code:"ESB",id:"200740",name:"E速宝",reg:"[0-9a-zA-Z-]{5,20}"},{code:"GDEMS",id:"1269",name:"广东EMS",reg:"^[a-zA-Z]{2}[0-9]{9}[a-zA-Z]{2}$"},{code:"BESTQJT",id:"105031",name:"百世快运",reg:"^[A-Za-z0-9-]{4,35}$"},{code:"QRT",id:"1208",name:"增益速递",reg:"^[0-9]{12,13}$"}]},getters:{},actions:{[Ke.Init](e,t){const{state:o,dispatch:n,commit:i}=e;i(Ze.UpdateInitInfo,t)},async[Ke.GetPrototype](e){try{const{state:t,dispatch:o,commit:n}=e,{initInfo:i}=t,{type:s,id:a}=i||{};let p={};switch(s){case we.Dfm:break;case we.Machining:p=await((e={})=>oe({url:"/supplier/machining/getSampleAcceptanceInfo",method:"GET",params:e}))({supplierOrderId:a});break;case we.Injection:}const{success:c,message:l,data:u}=p;if(c){const{customerQuestions:e}=u||{},t=(e=>{for(const[t,o]of e.entries()){const{problemApprovalLogs:n=[]}=o;e[t].reason=(e=>{let t="";for(const[o,n]of e.entries()){const{approvalType:e,description:o}=n;2===e&&(t=o)}return t})(n||[])}return e})(e);n(Ze.UpdatePrototype,d(r({},u||{}),{questionList:t}))}else f.error(l)}catch(t){throw new Error(t)}},[Ke.UpdatePrototypeData](e,t){const{state:o,dispatch:n,commit:i}=e,{name:s,value:a,isPaste:r=!1}=t||{},{prototype:d,companyReturnIndex:p,companyReturnList:c}=o,{reg:l}=c[p]||{},{samplePostInfo:u}=d||{};"expressNum"===s&&a?new RegExp(l).test(a)?u[s]=r?(u[s]||"")+a:a:(f.error("请输入正确的快递号"),u[s]=""):u[s]=r?(u[s]||"")+a:a,i(Ze.UpdatePrototype,{samplePostInfo:u})},[Ke.DeleteFile](e,t){const{state:o,dispatch:n,commit:i}=e,{prototype:s}=o,{samplePostInfo:a}=s||{},{sampleFiles:r}=a||{};r.splice(t,1),i(Ze.UpdatePrototype,{samplePostInfo:a})},async[Ke.CommitMailInfo](e){try{const{state:t,dispatch:o,commit:n}=e,{initInfo:i,prototype:s,companyReturnIndex:a,companyReturnList:r}=t,{type:d,id:p}=i||{},{samplePostInfo:c}=s||{},{expressNum:l,sampleConfirmation:u,sampleDesc:m,sampleFiles:I,sendType:g}=c||{},{name:h}=r[a]||{};if(!h)return void f.error("请选择快递公司！");if(!l)return void f.error("请输入快递单号！");const v={postCompany:h,postOrderNo:l,sampleDesc:m,sampleFiles:I.map((e=>e.fileId)),sendType:g};let y={};switch(d){case we.Dfm:break;case we.Machining:y=await((e={})=>oe({url:"/supplier/machining/commitSampleAcceptInfo",data:e}))({samplePostInfo:v,supplierOrderId:p});break;case we.Injection:}const{success:L,message:U,data:w}=y;L?(f.success(U),o(Ke.GetPrototype),o("order/GetCountdown",null,{root:!0})):f.error(U)}catch(t){throw new Error(t)}},async[Ke.AnswerQuestion](e,t){try{const{state:o,dispatch:n,commit:i}=e,{initInfo:s,prototype:a}=o,{questionList:r}=a||{},{opinion:d=-1,index:p,replyContent:c=""}=t||{},{type:l,mouldProduceId:u}=s||{},{id:m,isRepair:I=-1,supplierAnswer:g}=r[p]||{};let h=null;if(null===I||-1===I)return void f.error("请选择是否需要修模");if(d>-1){if(0===d&&!c)return void f.error("请输入不接受的理由");h=await Ye({needAdjust:I,opinion:d,problemId:m,replyContent:c})}else{if(!g)return void f.error("请输入分析内容和改善建议");h=await Ye({needAdjust:I,opinion:1,problemId:m,replyContent:g})}const{success:v,message:y,data:L}=h;v?(f.success(y),n(Ke.GetPrototype),n("order/GetCountdown",null,{root:!0})):f.error(y)}catch(o){throw new Error(o)}}},mutations:We}}}}});var tt=h({name:"AsideNotification",components:{},setup:()=>({})});const ot=b();v("data-v-4016606d");const nt={class:"notification"},it=S("div",{class:"notification-item"},[S("div",{class:"notification-item-image"},[S("img",{class:"notification-item-image-icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA8BAMAAADMJxR8AAAAElBMVEUAAAD///////////////////8+Uq06AAAABXRSTlMA7g/x3pNbWKgAAACVSURBVDjL7dVNCoMwGIThgeK+Qr2ApfvSG/QGiTD3v4rx82cIoogJ6sIXAiHPIoskBP9SASifYagXSBWcDvFSteoeVYOhz+Rauj2zA5f2ws2canSV7lHmUamu/bWx09Qn+0L81daif2Fd1Tc3P1+AOV2XMaf3x/jwO906wYEjHGd5wa4tXlvv4FSY0vvkqjP+X9X4v7abQ64OXPro2wAAAABJRU5ErkJggg==",alt:""}),S("img",{class:"notification-item-image-icon-active",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABABAMAAABRrMyXAAAAD1BMVEUAAAA3efQ3efQ4efQ3efSq78DYAAAABHRSTlMA7t7Oc4icFgAAAJtJREFUSMft1lsKwjAQRuEjdAOWbEDdiJHZ/5rEQJwhvw9K7JWehxKG76HQNC2Xcwg4vS5xNmIxYDBohim/fXIShpl0pzY4CcODrI7A5kmzMQ3dmOY5CX1F2gxpNpLivfrS17mPPK6lG5I8hN2QP/d5S2G/Ed3eSuJLMgGp34TcQ2pLElZHmJxYqZNoeu56fr5YSEip/Tnx6mx8AkgDf/MHBdSoAAAAAElFTkSuQmCC",alt:""})]),S("div",{class:"notification-item-text"},"微信公众号"),S("div",{class:"notification-item-model"},[S("img",{class:"notification-item-model-icon",src:"/assets/wechat_image.67313adc.jpg",alt:""}),w(' <div class="notification-item-model-text">关注公众号</div>\r\n        <div class="notification-item-model-text">如果未收到信息情况下，请取消再重新关注公众号</div> '),w(' <div class="notification-item-model-text">获取订单最新动态</div> ')])],-1);y();const st=ot(((e,t,o,n,i,s)=>(L(),U("div",nt,[it,w(' <div class="notification-item">\r\n      <div class="notification-item-image">\r\n        <img\r\n          class="notification-item-image-icon"\r\n          src="../../assets/images/wechat_phone.png"\r\n          alt=""\r\n        />\r\n        <img\r\n          class="notification-item-image-icon-active"\r\n          src="../../assets/images/wechat_phone_blue.png"\r\n          alt=""\r\n        />\r\n      </div>\r\n      <div class="notification-item-text">客服热线</div>\r\n      <div class="notification-item-model">\r\n        <div class="notification-item-model-title">客服热线</div>\r\n        <div class="notification-item-model-text">400-062-065</div>\r\n        <div class="notification-item-model-title">工作时间</div>\r\n        <div class="notification-item-model-text">周一至周日</div>\r\n        <div class="notification-item-model-text">09:00-21:30</div>\r\n      </div>\r\n    </div> ')]))));tt.render=st,tt.__scopeId="data-v-4016606d";var at=h({name:"App",components:{AsideNotification:tt},setup(){const e=x();return D((()=>{const t=J("storeCache");var o;t&&!(e=>{if(null!==e&&"object"==typeof e){for(const t in e)return!1;return!0}return!0})(t)&&(e.replaceState(Object.assign({},e.state,t)),o="storeCache",window.sessionStorage.removeItem(`supplier___${o}`)),window.addEventListener("beforeunload",(()=>{X("storeCache",e.state)}))})),{}}});at.render=function(e,t,o,n,i,s){const a=A("router-view"),r=A("AsideNotification");return L(),U(P,null,[S(a),S(r)],64)};T(at).use(B).use(et).use(C,{locale:M}).use((e=>{e.directive("paste",{bind(e,t,o){e.addEventListener("paste",(function(e){t.value(e)}))}}),e.directive("dialogDrag",{bind(e,t,o){const n=e.querySelector(".model-wrapper"),i=n.currentStyle||window.getComputedStyle(n,null),s=e.querySelector(".model-header");s.style.cursor="move",s.onmousedown=e=>{let t=0,o=0,a=0,r=0;i.left.includes("%")?(t=+document.body.clientWidth*(+i.left.replace(/\%/g,"")/100),o=+document.body.clientHeight*(+i.top.replace(/\%/g,"")/100),a=+document.body.clientWidth*(+i.width.replace(/\%/g,"")/100),r=+document.body.clientHeight*(+i.height.replace(/\%/g,"")/100)):(t=+i.left.replace(/\px/g,""),o=+i.top.replace(/\px/g,""),a=+i.width.replace(/\px/g,""),r=+i.height.replace(/\px/g,""));const d=a/2,p=r/2,c=window.innerWidth-a/2,l=window.innerHeight-r/2,u=e.clientX-s.offsetLeft,m=e.clientY-s.offsetTop;document.onmousemove=function(e){const i=e.clientX-u+t,s=e.clientY-m+o,a=i<d?d:i>c?c:i,r=s<p?p:s>l?l:s;n.style.left=`${a}px`,n.style.top=`${r}px`},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}})})).mount("#app");export{le as A,$ as B,j as E,ne as G,de as M,Z as R,we as S,V as W,G as _,se as a,z as b,_ as c,Ue as d,ve as e,Q as f,H as g,Te as h,ge as i,Ce as j,Ae as k,xe as l,Ge as m,Re as n,oe as o,ke as p,Fe as q,Je as r,ze as s,Ke as t,Ze as u};
