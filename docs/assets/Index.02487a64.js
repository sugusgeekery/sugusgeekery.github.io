var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,s,n)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,o=(e,t)=>{for(var s in t||(t={}))l.call(t,s)&&a(e,s,t[s]);if(n)for(var s of n(t))i.call(t,s)&&a(e,s,t[s]);return e},d=(e,n)=>t(e,s(n));import{d as c,B as r,i as p,K as g,p as m,e as u,H as v,x as f,C as x,o as k,f as y,h,v as I,F as b,t as A,g as C,w,m as O,u as R,n as B,j as F,L as M,q as L}from"./vendor.54beb8e3.js";import{B as S,S as U,p as D,q as V,h as T}from"./index.9997e8f1.js";import{U as E}from"./upload.13485518.js";import{b as N,_ as j,a as P}from"./pictrue_add.294a7a44.js";var z=c({name:"ConfirmModelComponent",components:{},props:{data:{type:Object,default:{}}},setup(e,t){const s=r(e.data),n=e=>{t.emit("updateData",o(o({},s),e))},l=e=>{const{fileList:t}=s,{id:l,fileName:i,filePath:a}=e||{};l&&a&&(t.push({fileId:l,fileName:i,filePath:a}),n({fileList:t,confirm:-1}))},i=e=>{const{value:t,isPaste:l}=e||{};if(t){const e=l?s.content+t:t;n({content:e,confirm:-1})}},a=async e=>{const{clipboardData:t}=e||window,{items:s}=t||{};if(!s||!s.length)return;const n=async e=>{const t=await E({files:[e]});for(const s of t)l(s)};for(let l=0,a=s.length;l<a;l++){const{type:e}=s[l];if(e.includes("image")){const e=s[l].getAsFile();e&&n(e);break}s[l].getAsString((e=>{e&&i({value:e,isPaste:!0})}));break}};return p((()=>{document.addEventListener("paste",a)})),g((()=>{document.removeEventListener("paste",a)})),{data:s,updateData:n,checkfile:()=>{document.querySelector("#singlefileOfConfirmModelComponent").click()},uploadFile:async e=>{try{const t=e.target.files,s=await E({files:t});for(const e of s)l(e);e.target.value=null}catch(t){throw new Error(t)}},addFile:l,deleteFile:e=>{const{fileList:t}=s,l=JSON.parse(JSON.stringify(t));l&&l.length&&(l.splice(e,1),n({fileList:l,confirm:-1}))},updateContent:i,handlePaste:a}}});const Y=w();m("data-v-ce569688");const G={class:"model-container"},Q={class:"model-wrapper"},q={class:"model-header"},K={class:"model-title"},X={class:"model-title-text"},J={class:"model-body"},W={class:"form-container"},H={class:"form-wrapper"},Z={class:"form-content"},_={class:"form-textarea"},$={class:"form-list"},ee={class:"form-li-text"},te=h("img",{class:"form-add-img",src:N,alt:""},null,-1),se={key:0,class:"form-selects"},ne={key:0,class:"form-select-img",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAB6UlEQVRIS+3WMUwTURgH8P/3aO5qCK0JxMWFhcAEcdLqJiVxMsYBZgYmGBRSRRMjOhCigckFDepMAjviSoCJhAFCWEwwGhy0rcXrNe195LW95I571/aaaxe58e7d93vf9969+wgAbqYyfUJEFog4CSAm74V4ZZnpq2UVZ3ffxo/pzpNsP5PYAeFqiIg3FCNNbN2ixNOzNSJ+2FKsGpyZ1un2bC7TgjL6zJ9yEuR2ZGcbl2DgagsBaBEgX1C/GmpJJfZqTEdPjDD9yYRR8G6P0EAbuzsYKae2/62kRH3Ba3HCPxPI5etv4ouYXcyNvSJer5qu2ipBib2biCJrAI9W8jVRic2N6RiuZmZH//GbMfnewK+Me8Ie0Maud4vyu4ffLV80KCbjecAXozru3aisg32p0GYwJRjVgKXxKIZ6O1zowYmFxx8r5ZXYy1EdySH3xPzK6AykXMNa6MznPGbua0ps6oOB03TtTea7S/3QM5PRqZMre5lZI5iypM5IfqhzTBCsLigHXNEIi+O6Z03ls6BYQ6Af+vNP5Turt2YXT9SGjzZnps1iDWdoz1KiqQcalr8UAmf2f/2A29tEtb1NTDzLDpAlttvRCLOwEuUzSnbfFnXME/EIgC51N9L03b/MtCm49HzrTezoHOSlGn73fE1aAAAAAElFTkSuQmCC",alt:""},le={key:1,class:"form-select-img",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAABBElEQVRIS+2WQU6DQBiF32PBTmPgDAaOoGwgpF6gpzEeoOll9AIaZtjQHoHiGSDVdgMLfjMaNibakEy66cxq5p/8/5v58haPAFCW5a2IrAEsROTa1Gwtkp8A3kg+pmn6zqIoIpJbADe2RP6YsxeRO2qtn0VkGQQB4jiG7/tWdYdhQF3X6LoOJF+M4IfBmCSJdbHp5Ua0qipzPFIpJWaXZZnVn/0eprX+LjlBa5gdUmsop0EOqUM6m4AzzWxkpxoc0lOEZt9fENKzh6gpJoZhiCiKrCe3vu/RNA3atv2JiUqpGMDmHEEYwD2N3Uz69jxvJSIPAK5mW/D/hgPJ13Ecn/I8330B4JHczW+D6awAAAAASUVORK5CYII=",alt:""},ie=h("span",{class:"form-select-text"},"需更新3D图纸",-1),ae={class:"model-footer"},oe={class:"model-buttons"};u();const de=Y(((e,t,s,n,l,i)=>{const a=v("dialogDrag");return f((k(),y("div",G,[h("input",{type:"file",name:"singlefileOfConfirmModelComponent",id:"singlefileOfConfirmModelComponent",hidden:"hidden",accept:"image/*",onChange:t[1]||(t[1]=(...t)=>e.uploadFile&&e.uploadFile(...t))},null,32),h("div",Q,[h("div",q,[h("div",K,[h("div",X,I(0===e.data.opinion?"驳回":1===e.data.opinion?"通过":"")+"原因 ",1)]),h("div",{class:"model-cancel",onClick:t[2]||(t[2]=t=>e.updateData({isShow:!1,confirm:0}))})]),h("div",J,[h("div",W,[h("div",H,[h("div",Z,[h("div",_,[h("textarea",{value:e.data.content,placeholder:`请填写${0===e.data.opinion?"驳回":1===e.data.opinion?"通过":""}原因`,cols:"30",rows:"10",onChange:t[3]||(t[3]=t=>e.updateContent({value:t.target.value}))},null,40,["value","placeholder"])]),h("div",$,[(k(!0),y(b,null,A(e.data.fileList,((t,s)=>(k(),y("div",{class:"form-li",key:s},[h("div",ee,I(t.fileName),1),h("div",{class:"form-li-del",onClick:t=>e.deleteFile({index:s})},"+",8,["onClick"])])))),128))])]),h("div",{class:"form-add",onClick:t[4]||(t[4]=t=>e.checkfile())},[te])]),e.data.isShowUpdate3D?(k(),y("div",se,[h("div",{class:"form-select",onClick:t[5]||(t[5]=t=>e.updateData({isUpdate3D:!e.data.isUpdate3D,confirm:-1}))},[e.data.isUpdate3D?(k(),y("img",ne)):(k(),y("img",le)),ie])])):C("v-if",!0)])]),h("div",ae,[h("div",oe,[h("div",{class:"model-button",onClick:t[6]||(t[6]=t=>e.updateData({isShow:!1,confirm:0}))},"取消"),h("div",{class:"model-button model-button-blue",onClick:t[7]||(t[7]=t=>e.updateData({isShow:!1,confirm:1}))},"提交")])])])],512)),[[a],[x,e.data.isShow]])}));z.render=de,z.__scopeId="data-v-ce569688";var ce=c({name:"BOMInfo",components:{ReasonContent:j,ConfirmModel:z},setup(){O();const e=R(),t=B((()=>e.state.order.design.initInfo)),s=B((()=>e.state.order.design.BOMInfo)),n=B((()=>e.state.order.design.reasonContent)),l=B((()=>e.state.order.design.confirmModel)),i=B((()=>e.state.order.design.BOMInfo.navList[e.state.order.design.BOMInfo.navIndex]||{})),a=B((()=>e.state.order.design.BOMInfo.reasonList[e.state.order.design.BOMInfo.reasonIndex]||{})),o=t=>e.dispatch(`order/design/${D.ImportBom}`,t),d=t=>e.dispatch(`order/design/${D.ImportBomImage}`,t),c=r({checkType:1,status:0}),p=e=>{const{status:t}=c||{},s=e.map((e=>e.id));switch(t){case 1:o(s[0]||"");break;case 2:case 3:case 4:d(s)}};return{BASE_IMAGE_URL:S,Supplier:U,initInfo:t,BOMInfo:s,reasonContent:n,confirmModel:l,BOMObject:i,reasonObject:a,updateNavIndex:t=>e.dispatch(`order/design/${D.UpdateNavIndex}`,t),updateBOMInfoPageSize:t=>e.dispatch(`order/design/${D.UpdateBOMInfoPageSize}`,t),updateBOMInfoPageNum:t=>e.dispatch(`order/design/${D.UpdateBOMInfoPageNum}`,t),importBom:o,importBomImage:d,getReasonContent:t=>e.dispatch(`order/design/${D.GetReasonContent}`,t),saveBomList:t=>e.dispatch(`order/design/${D.SaveBomList}`,t),getConfirmModel:t=>e.dispatch(`order/design/${D.GetConfirmModel}`,t),updateReasonIndex:t=>e.dispatch(`order/design/${D.UpdateReasonIndex}`,t),updateConfirmModel:t=>e.dispatch(`order/design/${D.UpdateConfirmModel}`,t),updateBOMInfo:t=>e.commit(`order/design/${V.UpdateBOMInfo}`,t),updateReasonContent:t=>e.commit(`order/design/${V.UpdateReasonContent}`,t),downloadFile:(e,t)=>{e&&T(e,t)},checkfile:e=>{const{checkType:t,status:s}=e;if(c.checkType=t,c.status=s,1===t){document.querySelector("#singlefile").click()}else if(2===t){document.querySelector("#multiplefile").click()}},uploadFile:async e=>{try{const t=e.target.files,s=await E({files:t});e.target.value=null,s&&s.length&&p(s)}catch(t){throw new Error(t)}},updateFile:p}}}),re="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAaCAYAAACkVDyJAAAAtklEQVRIS+3TMQ6DMAwFUP89F4KDFQa6tAMIzlVOVAamVBmqIijYP+lQEIyR44ftGBLx5cVQAX58NK5jr4O9EDCBv4d7ELmwKAVOsfePsqgZ/IbFoCYwK4crxN822w8p+tq12ohU0IR9SlXRTZDCjOgqGIUZULWl85nk5dNPz/rGUTmo4ACdYPJa7H+G7CNIjUdqAm0t5vlPcPHKU0fw/y3VFlvbW7rCn4NsQjZ+USGbgI0/PvgCUMyf17tEJpIAAAAASUVORK5CYII=";const pe=w();m("data-v-48adeeeb");const ge={class:"model-container"},me={class:"model-wrapper"},ue={class:"model-header"},ve={class:"model-title"},fe={key:0,class:"model-title-text"},xe={key:1,class:"model-title-text"},ke={key:2,class:"model-title-text"},ye={class:"model-body"},he={key:0,class:"model-navs"},Ie={key:1,class:"model-steps"},be={class:"model-step"},Ae=h("div",{class:"model-step-label"},"1",-1),Ce={class:"model-step-content"},we={class:"model-step-title"},Oe=h("div",{class:"model-step-title-line"},null,-1),Re={class:"model-step-text"},Be={class:"model-step"},Fe=h("div",{class:"model-step-label"},"2",-1),Me={class:"model-step-content"},Le={class:"model-step-title"},Se=h("div",{class:"model-step-title-line"},null,-1),Ue=h("div",{class:"model-step-text"},[h("span",null,"请按模板格式填写表格信息")],-1),De={class:"model-step"},Ve=h("div",{class:"model-step-label"},"3",-1),Te={class:"model-step-content"},Ee={class:"model-step-title"},Ne=h("div",{class:"model-step-title-line"},null,-1),je=h("div",{class:"model-step-text"},[h("span",{class:"model-step-text-red"},"*"),h("span",null,"使用批量导入零件图纸，需要将零件图纸以零件编号加“-2D或-3D”命名")],-1),Pe={class:"model-table"},ze={class:"model-table-box"},Ye={class:"model-table-header"},Ge=h("div",{class:"model-table-header-item"},"序号",-1),Qe=h("div",{class:"model-table-header-item"},"中文名称",-1),qe=h("div",{class:"model-table-header-item"},"零件编号",-1),Ke={key:0,class:"model-table-header-item model-table-header-item-x"},Xe={key:1,class:"model-table-header-item model-table-header-item-x"},Je={key:2,class:"model-table-header-item"},We=M('<div class="model-table-header-item" data-v-48adeeeb>材质</div><div class="model-table-header-item model-table-header-item-x" data-v-48adeeeb>订料规格(mm)</div><div class="model-table-header-item" data-v-48adeeeb>数量</div><div class="model-table-header-item model-table-header-item-x" data-v-48adeeeb>备注</div><div class="model-table-header-item model-table-header-item-x model-table-header-item-bl" data-v-48adeeeb>2D图纸(.pdf)</div><div class="model-table-header-item model-table-header-item-x" data-v-48adeeeb>3D图纸(.stp)</div><div class="model-table-header-item model-table-header-item-x model-table-header-item-bl" data-v-48adeeeb>加工方审核</div><div class="model-table-header-item model-table-header-item-x" data-v-48adeeeb>注塑方审核</div>',8),He={key:0,class:"model-table-cells"},Ze={class:"model-table-cell-item"},_e={class:"model-table-cell-item"},$e={class:"model-table-cell-item"},et={key:0,class:"model-table-cell-item model-table-cell-item-x"},tt={key:1,class:"model-table-cell-item model-table-cell-item-x"},st={key:2,class:"model-table-cell-item"},nt={class:"model-table-cell-item"},lt={class:"model-table-cell-item model-table-cell-item-x"},it={class:"model-table-cell-item"},at={class:"model-table-cell-item model-table-cell-item-x"},ot={class:"model-table-cell-item model-table-cell-item-x model-table-cell-item-bl"},dt={key:0},ct={class:"model-text model-text-blue"},rt={key:0,class:"model-text"},pt={key:0},gt=h("span",{class:"model-text-gray model-text-arrow"},"更新",-1),mt={key:1},ut=h("span",{class:"model-text-tip"},null,-1),vt={key:1},ft=h("img",{class:"model-text-img",src:re},null,-1),xt=h("span",{class:"model-text-blue"},"上传图纸",-1),kt={key:1,class:"model-text model-text-gray"},yt={class:"model-table-cell-item model-table-cell-item-x"},ht={key:0},It={class:"model-text model-text-blue"},bt={key:0,class:"model-text"},At={key:0},Ct=h("span",{class:"model-text-gray model-text-arrow"},"更新",-1),wt={key:1},Ot=h("span",{class:"model-text-tip"},null,-1),Rt={key:1},Bt=h("img",{class:"model-text-img",src:re},null,-1),Ft=h("span",{class:"model-text-blue"},"上传图纸",-1),Mt={key:1,class:"model-text model-text-gray"},Lt={class:"model-table-cell-item model-table-cell-item-x model-table-cell-item-bl"},St={key:0},Ut=h("span",{class:"model-text model-text-blue"},"通过",-1),Dt=h("img",{class:"model-text-img",src:P},null,-1),Vt={key:1},Tt=h("span",{class:"model-text model-text-red"},"驳回",-1),Et=h("img",{class:"model-text-img",src:P},null,-1),Nt={key:2},jt={key:0},Pt={key:1},zt=h("span",{class:"model-text model-text-gray"},"待审核",-1),Yt={class:"model-table-cell-item model-table-cell-item-x"},Gt={key:0},Qt=h("span",{class:"model-text model-text-blue"},"通过",-1),qt=h("img",{class:"model-text-img",src:P},null,-1),Kt={key:1},Xt=h("span",{class:"model-text model-text-red"},"驳回",-1),Jt=h("img",{class:"model-text-img",src:P},null,-1),Wt={key:2},Ht={key:0},Zt={key:1},_t=h("span",{class:"model-text model-text-gray"},"待审核",-1),$t={class:"model-table-footer"},es={key:2,class:"model-item"},ts={class:"model-item-navs"},ss={class:"model-item-content"},ns=h("div",{class:"model-item-content-label"},"驳回原因：",-1),ls={class:"model-item-content-text"},is={class:"model-item-images"},as={class:"model-footer"},os={key:0,class:"model-buttons"},ds={key:1,class:"model-buttons"};u();const cs=pe(((e,t,s,n,l,i)=>{const a=F("el-pagination"),o=F("el-image"),d=F("ReasonContent"),c=F("ConfirmModel"),r=v("dialogDrag");return f((k(),y("div",ge,[h("input",{type:"file",name:"multiplefile",id:"multiplefile",hidden:"hidden",multiple:"multiple",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel, .step, .stp, .stl, .prt, .pdf",onChange:t[1]||(t[1]=(...t)=>e.uploadFile&&e.uploadFile(...t))},null,32),h("input",{type:"file",name:"singlefile",id:"singlefile",hidden:"hidden",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel, .step, .stp, .stl, .prt, .pdf",onChange:t[2]||(t[2]=(...t)=>e.uploadFile&&e.uploadFile(...t))},null,32),h("div",me,[h("div",ue,[h("div",ve,[e.Supplier.Design===e.initInfo.type&&1===e.BOMInfo.editType?(k(),y("div",fe," 导入/更新BOM表 ")):e.Supplier.Machining!==e.initInfo.type&&e.Supplier.Injection!==e.initInfo.type||1!==e.BOMInfo.editType?(k(),y("div",ke," 查看BOM表 ")):(k(),y("div",xe," 审核BOM表 "))]),h("div",{class:"model-cancel",onClick:t[3]||(t[3]=t=>e.updateBOMInfo({isShow:!1}))})]),h("div",ye,[e.BOMInfo.navList.length?(k(),y("div",he,[(k(!0),y(b,null,A(e.BOMInfo.navList,((t,s)=>(k(),y("div",{class:"model-nav",key:s,onClick:t=>e.updateNavIndex(s)},[h("div",{class:["model-nav-text",{"model-nav-text-active":e.BOMInfo.navIndex===s}]},I(t.text),3)],8,["onClick"])))),128))])):C("v-if",!0),e.Supplier.Design===e.initInfo.type&&1===e.BOMInfo.editType?(k(),y("div",Ie,[h("div",be,[Ae,h("div",Ce,[h("div",we,[h("div",{class:"model-step-title-text",onClick:t[4]||(t[4]=t=>e.downloadFile(e.BASE_IMAGE_URL+e.BOMObject.bomPath,e.BOMObject.bomName))},"下载模板"),Oe]),h("div",Re,[h("span",null,"下载"+I(e.BOMObject.text)+"模板",1)])])]),h("div",Be,[Fe,h("div",Me,[h("div",Le,[h("div",{class:"model-step-title-text",onClick:t[5]||(t[5]=t=>e.checkfile({checkType:1,status:1}))},"导入BOM表"),Se]),Ue])]),h("div",De,[Ve,h("div",Te,[h("div",Ee,[h("div",{class:"model-step-title-text",onClick:t[6]||(t[6]=t=>e.checkfile({checkType:2,status:2}))},"批量导入零件图纸"),Ne]),je])])])):C("v-if",!0),h("div",Pe,[h("div",ze,[h("div",Ye,[Ge,Qe,qe,0===e.BOMInfo.navIndex?(k(),y("div",Ke,"模胚规格")):C("v-if",!0),e.BOMInfo.navIndex>0?(k(),y("div",Xe,"参考规格(mm)")):C("v-if",!0),1===e.BOMInfo.navIndex||3===e.BOMInfo.navIndex?(k(),y("div",Je,"热处理")):C("v-if",!0),We]),e.BOMObject.list&&e.BOMObject.list.length?(k(),y("div",He,[(k(!0),y(b,null,A(e.BOMObject.list,((s,n)=>(k(),y("div",{class:"model-table-cell",key:"_BOM_"+n},[h("div",Ze,I(s.serialNo||"--"),1),h("div",_e,I(s.partName||"--"),1),h("div",$e,I(s.partCode||"--"),1),0===e.BOMInfo.navIndex?(k(),y("div",et,I(s.referenceStandard||"--"),1)):C("v-if",!0),e.BOMInfo.navIndex>0?(k(),y("div",tt,I(s.referenceStandard||"--"),1)):C("v-if",!0),1===e.BOMInfo.navIndex||3===e.BOMInfo.navIndex?(k(),y("div",st,I(s.heatTreatment||"--"),1)):C("v-if",!0),h("div",nt,I(s.material||"--"),1),h("div",lt,I(s.orderingStandard||"--"),1),h("div",it,I(s.num||"--"),1),h("div",at,I(s.remark||"--"),1),h("div",ot,[s.twoFaceFileId&&s.twoFaceFileName&&s.twoFaceFileUrl?(k(),y("span",dt,[h("span",ct,I(s.twoFaceFileName||"--"),1),e.Supplier.Design===e.initInfo.type?(k(),y("span",rt,[1===s.machiningState&&1===s.injectionState?(k(),y("span",pt,[gt])):(k(),y("span",mt,[h("span",{class:"model-text-gray model-text-arrow",onClick:t[7]||(t[7]=t=>e.checkfile({checkType:1,status:3}))},"更新"),ut]))])):C("v-if",!0),h("span",{class:"model-text model-text-gray",onClick:t=>e.downloadFile(s.twoFaceFileUrl,s.twoFaceFileName)},"下载",8,["onClick"])])):(k(),y("span",vt,[e.Supplier.Design===e.initInfo.type?(k(),y("span",{key:0,class:"model-text",onClick:t[8]||(t[8]=t=>e.checkfile({checkType:1,status:3}))},[ft,xt])):(k(),y("span",kt,"未上传图纸"))]))]),h("div",yt,[s.threeFaceFileId&&s.threeFaceFileName&&s.threeFaceFileUrl?(k(),y("span",ht,[h("span",It,I(s.threeFaceFileName||"--"),1),e.Supplier.Design===e.initInfo.type?(k(),y("span",bt,[1===s.machiningState&&1===s.injectionState?(k(),y("span",At,[Ct])):(k(),y("span",wt,[h("span",{class:"model-text-gray model-text-arrow",onClick:t[9]||(t[9]=t=>e.checkfile({checkType:1,status:4}))},"更新"),Ot]))])):C("v-if",!0),h("span",{class:"model-text model-text-gray",onClick:t=>e.downloadFile(s.threeFaceFileUrl,s.threeFaceFileName)},"下载",8,["onClick"])])):(k(),y("span",Rt,[e.Supplier.Design===e.initInfo.type?(k(),y("span",{key:0,class:"model-text",onClick:t[10]||(t[10]=t=>e.checkfile({checkType:1,status:4}))},[Bt,Ft])):(k(),y("span",Mt,"未上传图纸"))]))]),h("div",Lt,[1===s.machiningState?(k(),y("span",St,[Ut,Dt,h("span",{class:"model-text model-text-blue",onClick:t=>e.getReasonContent({title:"通过原因",content:s.machiningCause,fileList:s.machiningPicture})},"查看原因",8,["onClick"])])):0===s.machiningState?(k(),y("span",Vt,[Tt,Et,h("span",{class:"model-text model-text-blue",onClick:t=>e.getReasonContent({content:s.machiningCause,fileList:s.machiningPicture})},"查看原因",8,["onClick"])])):(k(),y("span",Nt,[e.Supplier.Machining===e.initInfo.type?(k(),y("span",jt,[h("span",{class:"model-text model-text-gray",onClick:t=>e.getConfirmModel({approvalType:2,id:s.id,opinion:1,role:1,isShowUpdate3D:!1})},"通过",8,["onClick"]),h("span",{class:"model-text model-text-gray",onClick:t=>e.getConfirmModel({approvalType:2,id:s.id,opinion:0,role:1,isShowUpdate3D:!1})},"驳回",8,["onClick"])])):(k(),y("span",Pt,[zt]))]))]),h("div",Yt,[1===s.injectionState?(k(),y("span",Gt,[Qt,qt,h("span",{class:"model-text model-text-blue",onClick:t=>e.getReasonContent({title:"通过原因",content:s.injectionCause,fileList:s.injectionPicture})},"查看原因",8,["onClick"])])):0===s.injectionState?(k(),y("span",Kt,[Xt,Jt,h("span",{class:"model-text model-text-blue",onClick:t=>e.getReasonContent({content:s.injectionCause,fileList:s.injectionPicture})},"查看原因",8,["onClick"])])):(k(),y("span",Wt,[e.Supplier.Injection===e.initInfo.type?(k(),y("span",Ht,[h("span",{class:"model-text model-text-gray",onClick:t=>e.getConfirmModel({approvalType:2,id:s.id,opinion:1,role:2,isShowUpdate3D:!1})},"通过",8,["onClick"]),h("span",{class:"model-text model-text-gray",onClick:t=>e.getConfirmModel({approvalType:2,id:s.id,opinion:0,role:2,isShowUpdate3D:!1})},"驳回",8,["onClick"])])):(k(),y("span",Zt,[_t]))]))])])))),128))])):C("v-if",!0)]),h("div",$t,[h(a,{onSizeChange:e.updateBOMInfoPageSize,onCurrentChange:e.updateBOMInfoPageNum,"current-page":e.BOMObject.pageNo,"page-sizes":e.BOMObject.pageSizes,"page-size":e.BOMObject.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.BOMObject.total},null,8,["onSizeChange","onCurrentChange","current-page","page-sizes","page-size","total"])])]),e.BOMInfo.reasonList&&e.BOMInfo.reasonList.length?(k(),y("div",es,[h("div",ts,[(k(!0),y(b,null,A(e.BOMInfo.reasonList,((t,s)=>(k(),y("div",{class:["model-item-nav",{"model-item-nav-active":s===e.BOMInfo.reasonIndex}],key:s,onClick:t=>e.updateReasonIndex(s)},I(t.text),11,["onClick"])))),128))]),h("div",ss,[ns,h("div",ls,I(e.reasonObject.content||"--"),1)]),h("div",is,[(k(!0),y(b,null,A(e.reasonObject.fileList,((e,t)=>(k(),y("div",{class:"model-item-image",key:t},[C(' <img class="model-item-image-url" :src="a.filePath" alt="" /> '),h(o,{class:"model-item-image-url",src:e.filePath,"preview-src-list":[e.filePath]},null,8,["src","preview-src-list"])])))),128))])])):C("v-if",!0)]),h("div",as,[e.Supplier.Machining!==e.initInfo.type&&e.Supplier.Injection!==e.initInfo.type||1!==e.BOMInfo.editType?e.Supplier.Design===e.initInfo.type&&1===e.BOMInfo.editType?(k(),y("div",ds,[h("div",{class:"model-button",onClick:t[13]||(t[13]=t=>e.updateBOMInfo({isShow:!1}))},"暂存"),h("div",{class:"model-button model-button-blue",onClick:t[14]||(t[14]=t=>e.saveBomList())},"提交")])):C("v-if",!0):(k(),y("div",os,[h("div",{class:"model-button",onClick:t[11]||(t[11]=t=>e.getConfirmModel({approvalType:1,opinion:0,role:e.Supplier.Machining===e.initInfo.type?1:e.Supplier.Injection===e.initInfo.type?2:0,isShowUpdate3D:!0}))}," 驳回 "),h("div",{class:"model-button model-button-blue",onClick:t[12]||(t[12]=t=>e.getConfirmModel({approvalType:1,opinion:1,role:e.Supplier.Machining===e.initInfo.type?1:e.Supplier.Injection===e.initInfo.type?2:0,isShowUpdate3D:!0}))}," 审核通过 ")]))])]),h(d,{data:e.reasonContent,onUpdateData:e.updateReasonContent},null,8,["data","onUpdateData"]),h(c,{data:e.confirmModel,onUpdateData:e.updateConfirmModel},null,8,["data","onUpdateData"])],512)),[[r],[x,e.BOMInfo.isShow]])}));ce.render=cs,ce.__scopeId="data-v-48adeeeb";var rs=c({name:"DesignView",components:{BOMInfo:ce,ReasonContent:j},setup(){O();const e=R(),t=B((()=>e.state.order.design.initInfo)),s=B((()=>e.state.order.design.design)),n=B((()=>e.state.order.design.reasonContent)),l=t=>e.dispatch(`order/design/${D.GetDesignList}`,t),i=t=>e.dispatch(`order/design/${D.UpdateCause}`,t),a=t=>e.dispatch(`order/design/${D.AddReasonFile}`,t),c=t=>e.dispatch(`order/design/${D.UpdateFileList}`,t),m=L(0),u=r({b:-1,d:-1,status:0}),v=e=>{1===m.value?c(d(o({},u),{value:e})):2===m.value&&a(d(o({},u),{value:e}))},f=async e=>{const{b:t=-1,d:n=-1,status:l=0}=u,{designList:a}=s;if(1===l){const{versionInfoIndex:e=-1,versionInfoList:s=[]}=a[t]||{},{allApprovalInfoList:l=[]}=s[e]||{},{editType:i=0}=l[n]||{};if(!i)return}else if(2===l){const{hotRunnerInfoIndex:e=-1,hotRunnerInfoList:s=[]}=a[t]||{},{allApprovalInfoList:l=[]}=s[e]||{},{editType:i=0}=l[n]||{};if(!i)return}else if(3===l){const{hotRunnerVersionInfoIndex:e=-1,hotRunnerVersionInfoList:s=[]}=a[t]||{},{allApprovalInfoList:l=[]}=s[e]||{},{editType:i=0}=l[n]||{};if(!i)return}const{clipboardData:c}=e||window,{items:r}=c||{};if(!r||!r.length)return;const p=async e=>{const t=await E({files:[e]});for(const s of t)v(s)};for(let s=0,g=r.length;s<g;s++){const{type:e}=r[s];if(e.includes("image")){const e=r[s].getAsFile();e&&p(e);break}r[s].getAsString((e=>{e&&i(d(o({},u),{value:e,isPaste:!0}))}));break}};return l(),p((()=>{document.addEventListener("paste",f)})),g((()=>{document.removeEventListener("paste",f)})),{BASE_IMAGE_URL:S,Supplier:U,initInfo:t,design:s,reasonContent:n,getDesignList:l,updateVersionIndex:t=>e.dispatch(`order/design/${D.UpdateVersionIndex}`,t),updateOpinion:t=>e.dispatch(`order/design/${D.UpdateOpinion}`,t),updateCause:i,addReasonFile:a,deleteReasonFile:t=>e.dispatch(`order/design/${D.DeleteReasonFile}`,t),updateFileList:c,commitFile:t=>e.dispatch(`order/design/${D.CommitFile}`,t),approvalDesign:t=>e.dispatch(`order/design/${D.ApprovalDesign}`,t),updateBOMInfo:t=>e.dispatch(`order/design/${D.UpdateBOMInfo}`,t),getReasonContent:t=>e.dispatch(`order/design/${D.GetReasonContent}`,t),updateReasonContent:t=>e.commit(`order/design/${V.UpdateReasonContent}`,t),fileType:m,fileParams:u,selectFile:(e,t)=>{const{b:s,d:n,status:l}=t;if(m.value=e,u.b=s,u.d=n,u.status=l,1===m.value){document.querySelector("#stpFile").click()}else if(2===m.value){document.querySelector("#imageFile").click()}},uploadFile:async e=>{const t=e.target.files,s=await E({files:t});for(const n of s)v(n);e.target.value=null},updateFile:v,handlePaste:f,downloadFile:(e,t)=>{e&&T(e,t)}}}}),ps="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAcCAYAAAB2+A+pAAABZElEQVRIS+2WP06EQBTGv0lQttCWs2yhrQnoATwBA+ESXEG6Ca2FIdG1cC1sXf+cBljXTuEZDCRIGGAIFhooZ97Mb74333sMw8gvCAJ9sVhcEtEF53yjug1TXVDEF1Bd11cATAA7AJYqXBkcRdF+kiS3JbQ69y7Pc9N13aehQpTAEugo+GBwAU3TdEVEVoeqN8aYadv2c5/yQeCB0Io1CN4LLtN7A+C0T0VtfssYs7qUd4ILaBzH14yxMwVoFbolItNxnJe2tZ1g3/c1wzAOmws1TVsS0X1t/CHLsvNmHBF9eJ73rgyWqRRCHAF4rM2vOedKWem94zb4DAbwx1IdhuEyz/O6S18559IOpXrHQogTAFf1Kvg2V8tGG8758VSuFkIUzeeuXgUzuMrGnOofPmv28K6eXJp3GnOp/qlUXP1ZPuJUGbL4PQAHQ8ppKqBsn7Wsjv85WPbS+C3ZRRWMeghMcaAvCUP+0NLfkl0AAAAASUVORK5CYII=",gs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAEMUlEQVRIS7VWa2gcVRg9526yeeykKY1ojUqUSou2VErTx862VCIKRSr4aDCxlFIx+lMRdif0hyuS7tr6QyhSarGgUhUtKFqwVrFWm12sVhSxRFoj2sSINVGzM3l1Zz6Z6UzYjWmyI/T+mrn3fOfc797vcQl3pEVtnDSbvsg0XPT+Z4zVqZHGGlRvBtAGYoUIF5NQAP4E0EfyhKN4LN9TPzibfekcV3dJde0i62sBlgrZkc/E3gsAiVRhuVA9C5G7QCych6wIwUlGpKd3d8OJK2EZ3zV2A21nwAMQb+UyWof7qRuFAwC7ZjG8BGDMn68BUDsL5miEsnO2EwsEfwWgQHblMrGDCcP8ToCVJUQXCOwj+CkVfotErYK7Zk/W1RUdLga5hnAeA7h+2oYYEVttzu+pP112pImk1SxKfgFQReA1Ia6H4G4fVATl6UZTO/DhPk7Odz+JVKFdyD0AWnzspIjTln9+QS6wpS/oehiZQXg4VxvbjjSd+YRK19c9M7xATdUcpKDdn7dRlObcCw1/eLc2h+AhCn+CksHejPZqGFEvBlLWO6A85NudyWW1Vk+wLGiuxKqwKrdb+zasaDxl9pO4xbUT8n43A7guOXZjRDkX5iAbUqjacCpb2x9WUDesNYAEQTOQy2o3cXlaogvGC61QrFaO2LaCuMQRQIlDRuu005+lORFWLMDrhnkUwL2el4KV/L9Eldrp3WNxiHM5Ssn9V13wzvRfC6cmqoe9PBd8c9UFvYg1zJ8B3AxggInk6DJHqcchzpHSBK30yCrB6Yb5OYCNXrDqhtkHYBmAiX9qY40/pDlVCUkYTCJptYpy3NL4NnXDOgfIrR5BUa4LKkIYwjBY6t3mmxA87BrZtr30y72N58IQhMUyblg7CXnFi1pgW29WOxyWJAyeXjdn9G/fqC+X1W4LQzAT6zZ0NKP62mHYwdp4Exg1ETmuYdxLC90o5INeJuSWfCbmVoeQww1A60UC7UJEIZ6gW7VcDUJQBXCbL1hW84YmR2ItZ16m29krHlu3SmRwiVWcy0CAzunE1w3zIwD3uAYCfJDPavdVrOYDE4b1hFA2QTgCyA4A9aUcAvXAtGAiebFBVJ37anPfKSDxxsRwbEdYT13bRLf1qIi8FHAFoqQ8WFba4smxtVSOWxU8UQHOEngql9WOV+LthpR5h008R2CLj3efJR/73YJlHgaEfnX/pOw4hEdAZ/8lm2e/2qv9Xiq+tnu0KWJXLVF0OoR4smxjIpso6rwo8d6r//FwWnTXeAts+3W//pVyuIH0I4ghCATEIghun3lXAM9TOV3u+zSeMjtJXM5tYvuc3SJhmI8IYABYUcmRAtIPqEO5bKwnwK/vHk0oUae8f4VVFbWneGpUVyrS6Yi0krwGIpq7XxFYJEYAfE/y3d5M7P3ZNqYbhTYh7Hym4eS/FMScINXYek8AAAAASUVORK5CYII=",ms="/assets/file_icon_2.27c516ef.png",us="data:image/png;base64,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";const vs=w();m("data-v-1ca7972c");const fs={class:"design"},xs={class:"design-item-title"},ks={class:"design-item-title-black"},ys={class:"design-item-title-gray design-item-title-left"},hs={class:"design-cells"},Is={class:"design-cell"},bs={key:0,class:"design-cell-title"},As={class:"design-cell-text"},Cs=h("span",{class:"design-cell-text-black"},"3D图纸方案",-1),ws=h("img",{class:"design-cell-text-image",src:re,alt:""},null,-1),Os=h("span",{class:"design-cell-text-blue"},"上传文件",-1),Rs={key:1,class:"design-cell-text-left"},Bs=h("img",{class:"design-cell-text-image",src:ps,alt:""},null,-1),Fs=h("span",{class:"design-cell-text-gray"},"上传文件",-1),Ms={key:0,class:"design-cell-text"},Ls=h("span",{class:"design-cell-text-gray"},"等待设计方导入",-1),Ss={key:1,class:"design-cell-title"},Us={class:"design-cell-text"},Ds=h("span",{class:"design-cell-text-black"},"BOM表",-1),Vs=h("img",{class:"design-cell-text-image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAs0lEQVRIS+3WsRGAIAwFUFI7pY6gA4gD6Ag6pTUeBXdcUL4frDxsbEKehgQVQ179drp4yTF2wqSggn3ialAn0E+r3wCBKJ+ggAaiCugtSkqKug7toQZ0fAOTmW4lLW6aYT2tEzMz52SIFWeWfers3VGY7dISNMZo0C9gUI0VgW/RO6wYROgTVgU+oTmsGtQowj4BA+rvofVzo1N9eLNz2UCDPsCfl5RNyMbDvzY2IYr/P3gBsVAIOpX0V50AAAAASUVORK5CYII=",alt:""},null,-1),Ts=h("span",{class:"design-cell-text-blue"},"导入BOM表",-1),Es=h("img",{class:"design-cell-text-image",src:gs,alt:""},null,-1),Ns=h("span",{class:"design-cell-text-blue"},"更新BOM表",-1),js=h("img",{class:"design-cell-text-image",src:P,alt:""},null,-1),Ps=h("span",{class:"design-cell-text-blue"},"查看BOM表",-1),zs=h("img",{class:"design-cell-text-image",src:gs,alt:""},null,-1),Ys=h("span",{class:"design-cell-text-blue"},"更新BOM表",-1),Gs=h("img",{class:"design-cell-text-image",src:P,alt:""},null,-1),Qs=h("span",{class:"design-cell-text-blue"},"审核BOM表",-1),qs=h("img",{class:"design-cell-text-image",src:P,alt:""},null,-1),Ks=h("span",{class:"design-cell-text-blue"},"查看BOM表",-1),Xs={key:0,class:"design-cell-text"},Js=h("span",{class:"design-cell-text-gray"},"等待设计方导入",-1),Ws={class:"design-list"},Hs={key:0,class:"design-li-box-header"},Zs={key:0,class:"design-li-box-content-icon",src:ms,alt:""},_s={key:1,class:"design-li-box-content-icon",src:us,alt:""},$s={class:"design-li-box-content-text"},en={class:"design-li-text"},tn={class:"design-li-box design-li-box-active"},sn={class:"design-li-box-content"},nn={key:0,class:"design-li-box-content-icon",src:ms,alt:""},ln={key:1,class:"design-li-box-content-icon",src:us,alt:""},an={class:"design-li-box-content-text"},on={key:0,class:"design-li"},dn={class:"design-li-buttons"},cn={key:2,class:"design-col"},rn={key:0,class:"design-row-label"},pn={key:1,class:"design-row-label"},gn={key:2,class:"design-row-label"},mn={class:"design-row-content"},un={key:0,class:"design-row-content-text"},vn=h("span",{class:"design-row-content-text-red"},"已驳回",-1),fn=h("img",{class:"design-row-content-text-icon design-row-content-text-left",src:P},null,-1),xn=h("span",{class:"design-row-content-text-blue"},"查看原因",-1),kn={key:2,class:"design-row-content-text"},yn=h("span",{class:"design-row-content-text-blue"},"通过",-1),hn={key:3,class:"design-row-content-text"},In=h("span",{class:"design-row-content-text-gray"},"待审核",-1),bn={class:"form-wrapper"},An={class:"form-content"},Cn={class:"form-textarea"},wn={class:"form-list"},On={class:"form-li-text"},Rn=h("img",{class:"form-add-img",src:N,alt:""},null,-1),Bn={key:5,class:"design-row-content-buttons"},Fn={key:3,class:"design-cell-text"},Mn=h("span",{class:"design-cell-text-blue"},"方案正在审核中，不可上传更新",-1),Ln={key:4,class:"design-cell-text"},Sn=h("span",{class:"design-cell-text-gray"},"方案被驳回，请重新上传文件提交审核",-1),Un={key:5,class:"design-cell-text"},Dn=h("span",{class:"design-cell-text-red"},"BOM表被驳回需修改3D图纸，请重新上传文件提交审核",-1),Vn={key:6,class:"design-cell-text"},Tn=h("span",{class:"design-cell-text-red"},"BOM表被驳回且需修改3D图纸，请检查并更新",-1),En={key:0,class:"design-cell"},Nn={class:"design-cell-title"},jn={class:"design-cell-text"},Pn=h("span",{class:"design-cell-text-black"},"热流道图纸",-1),zn=h("img",{class:"design-cell-text-image",src:re,alt:""},null,-1),Yn=h("span",{class:"design-cell-text-blue"},"上传文件",-1),Gn={key:1,class:"design-cell-text-left"},Qn=h("img",{class:"design-cell-text-image",src:ps,alt:""},null,-1),qn=h("span",{class:"design-cell-text-gray"},"上传文件",-1),Kn={key:0,class:"design-cell-text"},Xn=h("span",{class:"design-cell-text-gray"},"等待热流道供应商上传图纸",-1),Jn={class:"design-list"},Wn={key:0,class:"design-li-box-header"},Hn={key:0,class:"design-li-box-content-icon",src:ms,alt:""},Zn={key:1,class:"design-li-box-content-icon",src:us,alt:""},_n={class:"design-li-box-content-text"},$n={class:"design-li-text"},el={class:"design-li-box design-li-box-active"},tl={class:"design-li-box-content"},sl={key:0,class:"design-li-box-content-icon",src:ms,alt:""},nl={key:1,class:"design-li-box-content-icon",src:us,alt:""},ll={class:"design-li-box-content-text"},il={key:0,class:"design-li"},al={class:"design-li-buttons"},ol={key:0,class:"design-col"},dl={key:0,class:"design-row-label"},cl={key:1,class:"design-row-label"},rl={key:2,class:"design-row-label"},pl={class:"design-row-content"},gl={key:0,class:"design-row-content-text"},ml=h("span",{class:"design-row-content-text-gray"},"热流道图纸已上传，请及时更新3D图纸方案",-1),ul=h("span",{class:"design-row-content-text-red"},"已驳回",-1),vl=h("img",{class:"design-row-content-text-icon design-row-content-text-left",src:P},null,-1),fl=h("span",{class:"design-row-content-text-blue"},"查看原因",-1),xl={key:2,class:"design-row-content-text"},kl=h("span",{class:"design-row-content-text-blue"},"通过",-1),yl={key:3,class:"design-row-content-text"},hl=h("span",{class:"design-row-content-text-gray"},"待审核",-1),Il={class:"form-wrapper"},bl={class:"form-content"},Al={class:"form-textarea"},Cl={class:"form-list"},wl={class:"form-li-text"},Ol=h("img",{class:"form-add-img",src:N,alt:""},null,-1),Rl={key:5,class:"design-row-content-buttons"},Bl={key:1,class:"design-cell-text"},Fl=h("span",{class:"design-cell-text-blue"},"文件已提交，请等待设计方审核",-1),Ml={key:2,class:"design-cell-text"},Ll=h("span",{class:"design-cell-text-gray"},"文件被驳回，请重新上传文件提交审核",-1),Sl={key:3,class:"design-cell-text"},Ul=h("span",{class:"design-cell-text-red"},"BOM表被驳回需修改3D图纸，请重新上传文件提交审核",-1),Dl={key:1,class:"design-cell"},Vl={class:"design-cell-title"},Tl={class:"design-cell-text"},El=h("span",{class:"design-cell-text-black"},"3D图纸方案(含热流道)",-1),Nl=h("img",{class:"design-cell-text-image",src:re,alt:""},null,-1),jl=h("span",{class:"design-cell-text-blue"},"上传文件",-1),Pl={key:1,class:"design-cell-text-left"},zl=h("img",{class:"design-cell-text-image",src:ps,alt:""},null,-1),Yl=h("span",{class:"design-cell-text-gray"},"上传文件",-1),Gl={key:0,class:"design-cell-text"},Ql=h("span",{class:"design-cell-text-gray"},"等待设计方上传图纸",-1),ql={class:"design-list"},Kl={key:0,class:"design-li-box-header"},Xl=h("img",{class:"design-li-box-content-icon",src:ms,alt:""},null,-1),Jl={class:"design-li-box-content-text"},Wl={class:"design-li-text"},Hl={class:"design-li-box design-li-box-active"},Zl={class:"design-li-box-content"},_l={key:0,class:"design-li-box-content-icon",src:ms,alt:""},$l={key:1,class:"design-li-box-content-icon",src:us,alt:""},ei={class:"design-li-box-content-text"},ti={key:0,class:"design-li"},si={class:"design-li-buttons"},ni={key:0,class:"design-col"},li={key:0,class:"design-row-label"},ii={key:1,class:"design-row-label"},ai={key:2,class:"design-row-label"},oi={class:"design-row-content"},di={key:0,class:"design-row-content-text"},ci=h("span",{class:"design-row-content-text-red"},"已驳回",-1),ri=h("img",{class:"design-row-content-text-icon design-row-content-text-left",src:P},null,-1),pi=h("span",{class:"design-row-content-text-blue"},"查看原因",-1),gi={key:2,class:"design-row-content-text"},mi=h("span",{class:"design-row-content-text-blue"},"通过",-1),ui={key:3,class:"design-row-content-text"},vi=h("span",{class:"design-row-content-text-gray"},"待审核",-1),fi={class:"form-wrapper"},xi={class:"form-content"},ki={class:"form-textarea"},yi={class:"form-list"},hi={class:"form-li-text"},Ii=h("img",{class:"form-add-img",src:N,alt:""},null,-1),bi={key:5,class:"design-row-content-buttons"},Ai={key:1,class:"design-cell-text"},Ci=h("span",{class:"design-cell-text-blue"},"方案正在审核中，不可上传更新",-1),wi={key:2,class:"design-cell-text"},Oi=h("span",{class:"design-cell-text-gray"},"文件被驳回，请重新上传文件提交审核",-1),Ri={key:3,class:"design-cell-text"},Bi=h("span",{class:"design-cell-text-red"},"BOM表被驳回需修改3D图纸，请重新上传文件提交审核",-1);u();const Fi=vs(((e,t,s,n,l,i)=>{const a=F("BOMInfo"),o=F("ReasonContent");return k(),y("div",fs,[h("input",{type:"file",name:"stpFile",id:"stpFile",hidden:"hidden",accept:".step, .stp, .stl",onChange:t[1]||(t[1]=(...t)=>e.uploadFile&&e.uploadFile(...t))},null,32),h("input",{type:"file",name:"imageFile",id:"imageFile",hidden:"hidden",accept:"image/*",onChange:t[2]||(t[2]=(...t)=>e.uploadFile&&e.uploadFile(...t))},null,32),(k(!0),y(b,null,A(e.design.designList,((t,s)=>(k(),y("div",{class:"design-item",key:"_方案设计_"+s},[h("div",xs,[h("span",ks,I(t.title),1),h("span",ys,I(t.ext),1)]),h("div",hs,[h("div",Is,["1"===t.stepId?(k(),y("div",bs,[h("div",As,[Cs,1===t.uploadType||3===t.uploadType?(k(),y("span",{key:0,class:"design-cell-text-left",onClick:t=>e.selectFile(1,{b:s,d:-1,status:1})},[ws,Os],8,["onClick"])):2===t.uploadType?(k(),y("span",Rs,[Bs,Fs])):C("v-if",!0)]),10===t.uploadType?(k(),y("div",Ms,[Ls])):C("v-if",!0)])):C("v-if",!0),"2"===t.stepId?(k(),y("div",Ss,[h("div",Us,[Ds,1===t.uploadType?(k(),y("span",{key:0,class:"design-cell-text-left",onClick:t=>e.updateBOMInfo({b:s,editType:1})},[Vs,Ts],8,["onClick"])):4===t.uploadType?(k(),y("span",{key:1,class:"design-cell-text-left",onClick:t=>e.updateBOMInfo({b:s,editType:1})},[Es,Ns],8,["onClick"])):2===t.uploadType?(k(),y("span",{key:2,class:"design-cell-text-left",onClick:t=>e.updateBOMInfo({b:s,editType:2})},[js,Ps],8,["onClick"])):3===t.uploadType?(k(),y("span",{key:3,class:"design-cell-text-left",onClick:t=>e.updateBOMInfo({b:s,editType:1})},[zs,Ys],8,["onClick"])):11===t.uploadType?(k(),y("span",{key:4,class:"design-cell-text-left",onClick:t=>e.updateBOMInfo({b:s,editType:1})},[Gs,Qs],8,["onClick"])):12===t.uploadType?(k(),y("span",{key:5,class:"design-cell-text-left",onClick:t=>e.updateBOMInfo({b:s,editType:2})},[qs,Ks],8,["onClick"])):C("v-if",!0)]),10===t.uploadType?(k(),y("div",Xs,[Js])):C("v-if",!0)])):C("v-if",!0),h("div",Ws,[(k(!0),y(b,null,A(t.versionInfoList,((n,l)=>f((k(),y("div",{class:"design-li",key:s+"_3D图纸_"+l},[h("div",{class:["design-li-box",{"design-li-box-active":l===t.versionInfoIndex&&!(t.fileList&&t.fileList.length)}]},[t.versionInfoList.length>1&&l===t.versionInfoList.length-1?(k(),y("div",Hs,"new")):C("v-if",!0),h("div",{class:["design-li-box-content",{"design-li-box-content-mask":l!==t.versionInfoList.length-1}],onClick:t=>e.updateVersionIndex({b:s,d:l,status:1})},["1"===t.stepId?(k(),y("img",Zs)):"2"===t.stepId?(k(),y("img",_s)):C("v-if",!0),h("div",$s,I(n.fileName),1)],10,["onClick"]),n.filePath?(k(),y("div",{key:1,class:"design-li-box-footer",onClick:t=>e.downloadFile(e.BASE_IMAGE_URL+n.filePath,n.fileName)},"下载",8,["onClick"])):C("v-if",!0)],2),h("div",en,I(n.updateTime),1)],512)),[[x,t.versionInfoList&&t.versionInfoList.length]]))),128)),(k(!0),y(b,null,A(t.fileList,((e,n)=>f((k(),y("div",{class:"design-li",key:s+"新增3D图纸_"+n},[h("div",tn,[h("div",sn,["1"===t.stepId?(k(),y("img",nn)):"2"===t.stepId?(k(),y("img",ln)):C("v-if",!0),h("div",an,I(e.fileName),1)])])],512)),[[x,t.fileList&&t.fileList.length]]))),128)),t.fileList&&t.fileList.length?(k(),y("div",on,[h("div",dn,[h("div",{class:"design-li-button design-li-button-blue",onClick:t=>e.commitFile({b:s,status:1})},"提交",8,["onClick"])])])):C("v-if",!0)]),t.versionInfoList&&t.versionInfoList[t.versionInfoIndex]&&t.versionInfoList[t.versionInfoIndex].allApprovalInfoList&&t.versionInfoList[t.versionInfoIndex].allApprovalInfoList.length?(k(),y("div",cn,[(k(!0),y(b,null,A(t.versionInfoList[t.versionInfoIndex].allApprovalInfoList,((n,l)=>(k(),y("div",{class:"design-row",key:s+"_3D图纸审批_"+l},["0"===n.type?(k(),y("div",rn,"设计方：")):"1"===n.type?(k(),y("div",pn,"加工方：")):"2"===n.type?(k(),y("div",gn,"试模方：")):C("v-if",!0),h("div",mn,["1"===t.stepId&&1===n.editType?(k(),y("div",un,[h("span",{class:["design-row-content-text-circle",{"design-row-content-text-circle-active":1===n.opinion}],onClick:t=>e.updateOpinion({b:s,d:l,status:1,value:1})},null,10,["onClick"]),h("span",{class:"design-row-content-text-black",onClick:t=>e.updateOpinion({b:s,d:l,status:1,value:1})},"确认",8,["onClick"]),h("span",{class:["design-row-content-text-circle design-row-content-text-left",{"design-row-content-text-circle-active":0===n.opinion}],onClick:t=>e.updateOpinion({b:s,d:l,status:1,value:0})},null,10,["onClick"]),h("span",{class:"design-row-content-text-black",onClick:t=>e.updateOpinion({b:s,d:l,status:1,value:0})},"驳回",8,["onClick"])])):0===n.opinion?(k(),y("div",{key:1,class:"design-row-content-text",onClick:t=>e.getReasonContent({content:n.cause,fileList:n.approvalIds})},[vn,fn,xn],8,["onClick"])):1===n.opinion?(k(),y("div",kn,[yn])):(k(),y("div",hn,[In])),"1"===t.stepId&&1===n.editType?(k(),y("div",{key:4,class:"form-container",onKeydown:t=>e.fileParams={b:s,d:l,status:1}},[h("div",bn,[h("div",An,[h("div",Cn,[h("textarea",{value:n.cause,placeholder:`请填写${0===n.opinion?"驳回":1===n.opinion?"通过":""}原因`,cols:"30",rows:"10",onChange:t=>e.updateCause({b:s,d:l,status:1,value:t.target.value})},null,40,["value","placeholder","onChange"])]),h("div",wn,[(k(!0),y(b,null,A(n.reasonFiles,((t,n)=>(k(),y("div",{class:"form-li",key:s+"_3D图纸审批_"+l+"_原因_"+n},[h("div",On,I(t.fileName),1),h("div",{class:"form-li-del",onClick:t=>e.deleteReasonFile({b:s,d:l,f:n,status:1})},"+",8,["onClick"])])))),128))])]),h("div",{class:"form-add",onClick:t=>e.selectFile(2,{b:s,d:l,status:1})},[Rn],8,["onClick"])])],40,["onKeydown"])):C("v-if",!0),"1"===t.stepId&&1===n.editType?(k(),y("div",Bn,[h("span",{class:"design-row-content-button design-row-content-button-blue",onClick:t=>e.approvalDesign({b:s,d:l,status:1})},"提交",8,["onClick"])])):C("v-if",!0)])])))),128))])):C("v-if",!0),t.versionInfoList[t.versionInfoIndex]&&1===t.versionInfoList[t.versionInfoIndex].approveStatus?(k(),y("div",Fn,[Mn])):t.versionInfoList[t.versionInfoIndex]&&2===t.versionInfoList[t.versionInfoIndex].approveStatus?(k(),y("div",Ln,[Sn])):C("v-if",!0),"1"===t.stepId&&0===t.hotRunner&&1===t.update3D?(k(),y("div",Un,[Dn,C(' <span class="design-cell-text-left">\r\n              <img class="design-cell-text-image" src="../../../../assets/images/enlarge.png" alt="" />\r\n              <span class="design-cell-text-blue">查看原因</span>\r\n            </span> ')])):"2"===t.stepId&&1===t.update3D?(k(),y("div",Vn,[Tn])):C("v-if",!0)]),"1"===t.stepId&&t.uploadHotrunnerType>0?(k(),y("div",En,[h("div",Nn,[h("div",jn,[Pn,1===t.uploadHotrunnerType?(k(),y("span",{key:0,class:"design-cell-text-left",onClick:t=>e.selectFile(1,{b:s,d:-1,status:2})},[zn,Yn],8,["onClick"])):2===t.uploadHotrunnerType?(k(),y("span",Gn,[Qn,qn])):C("v-if",!0)]),10===t.uploadHotrunnerType?(k(),y("div",Kn,[Xn])):C("v-if",!0)]),h("div",Jn,[(k(!0),y(b,null,A(t.hotRunnerInfoList,((n,l)=>f((k(),y("div",{class:"design-li",key:s+"_热流道图纸_"+l},[h("div",{class:["design-li-box",{"design-li-box-active":l===t.hotRunnerInfoIndex&&!(t.hotRunnerFileList&&t.hotRunnerFileList.length)}]},[t.hotRunnerInfoList.length>1&&l===t.hotRunnerInfoList.length-1?(k(),y("div",Wn,"new")):C("v-if",!0),h("div",{class:["design-li-box-content",{"design-li-box-content-mask":l!==t.hotRunnerInfoList.length-1}],onClick:t=>e.updateVersionIndex({b:s,d:l,status:2})},["1"===t.stepId?(k(),y("img",Hn)):"2"===t.stepId?(k(),y("img",Zn)):C("v-if",!0),h("div",_n,I(n.fileName),1)],10,["onClick"]),n.filePath?(k(),y("div",{key:1,class:"design-li-box-footer",onClick:t=>e.downloadFile(e.BASE_IMAGE_URL+n.filePath,n.fileName)},"下载",8,["onClick"])):C("v-if",!0)],2),h("div",$n,I(n.updateTime),1)],512)),[[x,t.hotRunnerInfoList&&t.hotRunnerInfoList.length]]))),128)),(k(!0),y(b,null,A(t.hotRunnerFileList,((e,n)=>f((k(),y("div",{class:"design-li",key:s+"_新增热流道图纸_"+n},[h("div",el,[h("div",tl,["1"===t.stepId?(k(),y("img",sl)):"2"===t.stepId?(k(),y("img",nl)):C("v-if",!0),h("div",ll,I(e.fileName),1)])])],512)),[[x,t.hotRunnerFileList&&t.hotRunnerFileList.length]]))),128)),t.hotRunnerFileList&&t.hotRunnerFileList.length?(k(),y("div",il,[h("div",al,[h("div",{class:"design-li-button design-li-button-blue",onClick:t=>e.commitFile({b:s,status:2})},"提交",8,["onClick"])])])):C("v-if",!0)]),t.hotRunnerInfoList&&t.hotRunnerInfoList[t.hotRunnerInfoIndex]&&t.hotRunnerInfoList[t.hotRunnerInfoIndex].allApprovalInfoList&&t.hotRunnerInfoList[t.hotRunnerInfoIndex].allApprovalInfoList.length?(k(),y("div",ol,[(k(!0),y(b,null,A(t.hotRunnerInfoList[t.hotRunnerInfoIndex].allApprovalInfoList,((t,n)=>(k(),y("div",{class:"design-row",key:s+"_热流道图纸审批_"+n},["0"===t.type?(k(),y("div",dl,"设计方：")):"1"===t.type?(k(),y("div",cl,"加工方：")):"2"===t.type?(k(),y("div",rl,"试模方：")):C("v-if",!0),h("div",pl,[C(' <div class="design-row-content-text" v-if="c.editType === 1">\r\n                  <span class="design-row-content-text-circle" :class="{\'design-row-content-text-circle-active\': c.opinion === 1}" @click="updateOpinion({ b, d, status: 2, value: 1 })"></span>\r\n                  <span class="design-row-content-text-black" @click="updateOpinion({ b, d, status: 2, value: 1 })">确认</span>\r\n                  <span class="design-row-content-text-circle design-row-content-text-left" :class="{\'design-row-content-text-circle-active\': c.opinion === 0}" @click="updateOpinion({ b, d, status: 2, value: 0 })"></span>\r\n                  <span class="design-row-content-text-black" @click="updateOpinion({ b, d, status: 2, value: 0 })">驳回</span>\r\n                </div> '),1===t.editType?(k(),y("div",gl,[ml,h("span",{class:"design-row-content-text-blue design-row-content-text-left",onClick:t=>e.updateOpinion({b:s,d:n,status:2,value:0})},"驳回图纸",8,["onClick"])])):0===t.opinion?(k(),y("div",{key:1,class:"design-row-content-text",onClick:s=>e.getReasonContent({content:t.cause,fileList:t.approvalIds})},[ul,vl,fl],8,["onClick"])):1===t.opinion?(k(),y("div",xl,[kl])):(k(),y("div",yl,[hl])),1!==t.editType||0!==t.opinion&&1!==t.opinion?C("v-if",!0):(k(),y("div",{key:4,class:"form-container",onKeydown:t=>e.fileParams={b:s,d:n,status:2}},[h("div",Il,[h("div",bl,[h("div",Al,[h("textarea",{value:t.cause,placeholder:`请填写${0===t.opinion?"驳回":1===t.opinion?"通过":""}原因`,cols:"30",rows:"10",onChange:t=>e.updateCause({b:s,d:n,status:2,value:t.target.value})},null,40,["value","placeholder","onChange"])]),h("div",Cl,[(k(!0),y(b,null,A(t.reasonFiles,((t,l)=>(k(),y("div",{class:"form-li",key:s+"_热流道图纸审批_"+n+"_原因_"+l},[h("div",wl,I(t.fileName),1),h("div",{class:"form-li-del",onClick:t=>e.deleteReasonFile({b:s,d:n,f:l,status:2})},"+",8,["onClick"])])))),128))])]),h("div",{class:"form-add",onClick:t=>e.selectFile(2,{b:s,d:n,status:2})},[Ol],8,["onClick"])])],40,["onKeydown"])),1!==t.editType||0!==t.opinion&&1!==t.opinion?C("v-if",!0):(k(),y("div",Rl,[h("span",{class:"design-row-content-button design-row-content-button-blue",onClick:t=>e.approvalDesign({b:s,d:n,status:2})},"提交",8,["onClick"])]))])])))),128))])):C("v-if",!0),t.hotRunnerInfoList&&t.hotRunnerInfoList[t.hotRunnerInfoIndex]&&1===t.hotRunnerInfoList[t.hotRunnerInfoIndex].approveStatus?(k(),y("div",Bl,[Fl])):t.hotRunnerInfoList&&t.hotRunnerInfoList[t.hotRunnerInfoIndex]&&2===t.hotRunnerInfoList[t.hotRunnerInfoIndex].approveStatus?(k(),y("div",Ml,[Ll])):C("v-if",!0),1!==t.hotRunner||1!==t.update3D||t.hotRunnerInfoList&&t.hotRunnerInfoList.length?C("v-if",!0):(k(),y("div",Sl,[Ul,C(' <span class="design-cell-text-left">\r\n              <img class="design-cell-text-image" src="../../../../assets/images/enlarge.png" alt="" />\r\n              <span class="design-cell-text-blue">查看原因</span>\r\n            </span> ')]))])):C("v-if",!0),"1"===t.stepId&&t.uploadHotrunner3dType>0?(k(),y("div",Dl,[h("div",Vl,[h("div",Tl,[El,1===t.uploadHotrunner3dType||3===t.uploadHotrunner3dType?(k(),y("span",{key:0,class:"design-cell-text-left",onClick:t=>e.selectFile(1,{b:s,d:-1,status:3})},[Nl,jl],8,["onClick"])):2===t.uploadHotrunner3dType?(k(),y("span",Pl,[zl,Yl])):C("v-if",!0)]),10===t.uploadHotrunner3dType?(k(),y("div",Gl,[Ql])):C("v-if",!0)]),h("div",ql,[(k(!0),y(b,null,A(t.hotRunnerVersionInfoList,((n,l)=>f((k(),y("div",{class:"design-li",key:s+"_3D含热流道图纸_"+l},[h("div",{class:["design-li-box",{"design-li-box-active":l===t.hotRunnerVersionInfoIndex&&!(t.hotRunner3dFileList&&t.hotRunner3dFileList.length)}]},[t.hotRunnerVersionInfoList.length>1&&l===t.hotRunnerVersionInfoList.length-1?(k(),y("div",Kl,"new")):C("v-if",!0),h("div",{class:["design-li-box-content",{"design-li-box-content-mask":l!==t.hotRunnerVersionInfoList.length-1}],onClick:t=>e.updateVersionIndex({b:s,d:l,status:3})},[Xl,h("div",Jl,I(n.fileName),1)],10,["onClick"]),n.filePath?(k(),y("div",{key:1,class:"design-li-box-footer",onClick:t=>e.downloadFile(e.BASE_IMAGE_URL+n.filePath,n.fileName)},"下载",8,["onClick"])):C("v-if",!0)],2),h("div",Wl,I(n.updateTime),1)],512)),[[x,t.hotRunnerVersionInfoList&&t.hotRunnerVersionInfoList.length]]))),128)),(k(!0),y(b,null,A(t.hotRunner3dFileList,((e,n)=>f((k(),y("div",{class:"design-li",key:s+"_新增3D含热流道图纸_"+n},[h("div",Hl,[h("div",Zl,["1"===t.stepId?(k(),y("img",_l)):"2"===t.stepId?(k(),y("img",$l)):C("v-if",!0),h("div",ei,I(e.fileName),1)])])],512)),[[x,t.hotRunner3dFileList&&t.hotRunner3dFileList.length]]))),128)),t.hotRunner3dFileList&&t.hotRunner3dFileList.length?(k(),y("div",ti,[h("div",si,[h("div",{class:"design-li-button design-li-button-blue",onClick:t=>e.commitFile({b:s,status:3})},"提交",8,["onClick"])])])):C("v-if",!0)]),t.hotRunnerVersionInfoList&&t.hotRunnerVersionInfoList[t.hotRunnerVersionInfoIndex]&&t.hotRunnerVersionInfoList[t.hotRunnerVersionInfoIndex].allApprovalInfoList&&t.hotRunnerVersionInfoList[t.hotRunnerVersionInfoIndex].allApprovalInfoList.length?(k(),y("div",ni,[(k(!0),y(b,null,A(t.hotRunnerVersionInfoList[t.hotRunnerVersionInfoIndex].allApprovalInfoList,((t,n)=>(k(),y("div",{class:"design-row",key:s+"_3D含热流道图纸审批_"+n},["0"===t.type?(k(),y("div",li,"设计方：")):"1"===t.type?(k(),y("div",ii,"加工方：")):"2"===t.type?(k(),y("div",ai,"试模方：")):C("v-if",!0),h("div",oi,[1===t.editType?(k(),y("div",di,[h("span",{class:["design-row-content-text-circle",{"design-row-content-text-circle-active":1===t.opinion}],onClick:t=>e.updateOpinion({b:s,d:n,status:3,value:1})},null,10,["onClick"]),h("span",{class:"design-row-content-text-black",onClick:t=>e.updateOpinion({b:s,d:n,status:3,value:1})},"确认",8,["onClick"]),h("span",{class:["design-row-content-text-circle design-row-content-text-left",{"design-row-content-text-circle-active":0===t.opinion}],onClick:t=>e.updateOpinion({b:s,d:n,status:3,value:0})},null,10,["onClick"]),h("span",{class:"design-row-content-text-black",onClick:t=>e.updateOpinion({b:s,d:n,status:3,value:0})},"驳回",8,["onClick"])])):0===t.opinion?(k(),y("div",{key:1,class:"design-row-content-text",onClick:s=>e.getReasonContent({content:t.cause,fileList:t.approvalIds})},[ci,ri,pi],8,["onClick"])):1===t.opinion?(k(),y("div",gi,[mi])):(k(),y("div",ui,[vi])),1===t.editType?(k(),y("div",{key:4,class:"form-container",onKeydown:t=>e.fileParams={b:s,d:n,status:3}},[h("div",fi,[h("div",xi,[h("div",ki,[h("textarea",{value:t.cause,placeholder:`请填写${0===t.opinion?"驳回":1===t.opinion?"通过":""}原因`,cols:"30",rows:"10",onChange:t=>e.updateCause({b:s,d:n,status:3,value:t.target.value})},null,40,["value","placeholder","onChange"])]),h("div",yi,[(k(!0),y(b,null,A(t.reasonFiles,((t,l)=>(k(),y("div",{class:"form-li",key:s+"_3D含热流道图纸审批_"+n+"_原因_"+l},[h("div",hi,I(t.fileName),1),h("div",{class:"form-li-del",onClick:t=>e.deleteReasonFile({b:s,d:n,f:l,status:3})},"+",8,["onClick"])])))),128))])]),h("div",{class:"form-add",onClick:t=>e.selectFile(2,{b:s,d:n,status:3})},[Ii],8,["onClick"])])],40,["onKeydown"])):C("v-if",!0),1===t.editType?(k(),y("div",bi,[h("span",{class:"design-row-content-button design-row-content-button-blue",onClick:t=>e.approvalDesign({b:s,d:n,status:3})},"提交",8,["onClick"])])):C("v-if",!0)])])))),128))])):C("v-if",!0),t.hotRunnerVersionInfoList&&t.hotRunnerVersionInfoList[t.hotRunnerVersionInfoIndex]&&1===t.hotRunnerVersionInfoList[t.hotRunnerVersionInfoIndex].approveStatus?(k(),y("div",Ai,[Ci])):t.hotRunnerVersionInfoList&&t.hotRunnerVersionInfoList[t.hotRunnerVersionInfoIndex]&&2===t.hotRunnerVersionInfoList[t.hotRunnerVersionInfoIndex].approveStatus?(k(),y("div",wi,[Oi])):C("v-if",!0),1===t.hotRunner&&1===t.update3D&&t.hotRunnerInfoList.length?(k(),y("div",Ri,[Bi,C(' <span class="design-cell-text-left">\r\n              <img class="design-cell-text-image" src="../../../../assets/images/enlarge.png" alt="" />\r\n              <span class="design-cell-text-blue">查看原因</span>\r\n            </span> ')])):C("v-if",!0)])):C("v-if",!0)])])))),128)),h(a),h(o,{data:e.reasonContent,onUpdateData:e.updateReasonContent},null,8,["data","onUpdateData"])])}));rs.render=Fi,rs.__scopeId="data-v-1ca7972c";export default rs;
