import{d as a,m as e,u as l,n as i,q as s,I as t,p as c,e as n,j as o,o as d,f as r,h as u,A as p,g as m,w as y}from"./vendor.54beb8e3.js";import{A as v,M as f,B as g}from"./index.9997e8f1.js";import{V as I,v as Q}from"./validate.a5cb3ebf.js";import{_ as b}from"./Selection.c5e00a06.js";import C from"./headicon.cb66ce3a.js";var U=a({name:"ApplicationView",components:{Selection:b},setup(){e();const a=l(),c=i((()=>a.state.account.initInfo)),n=i((()=>a.state.account.userQualify)),o=i((()=>a.state.account.companyQualify)),d=e=>a.dispatch(`account/${v.GetQualifyDefInfo}`,e),r=e=>a.dispatch(`account/${v.UploadForm}`,e),u=e=>a.commit(`account/${f.UpdateUserQualify}`,e),p=e=>a.commit(`account/${f.UpdateCompanyQualify}`,e),m=s(g),y=s(""),b=s(0);return d(),{initInfo:c,userQualify:n,companyQualify:o,getQualifyDefInfo:d,uploadForm:r,saveUserQualifyInfo:e=>a.dispatch(`account/${v.SavePersonQualifyInfo}`,e),saveCompanyQualifyInfo:e=>a.dispatch(`account/${v.SaveCompanyQualifyInfo}`,e),updateUserQualify:u,updateCompanyQualify:p,BASE_IMAGE_URL:m,date:y,updateUserQualifyLabelIndex:a=>{const{labelList:e=[]}=n||{},{isSelected:l}=e[a]||{};e[a].isSelected=~~!l,p({labelList:e})},updateCompanyQualifyLabelIndex:a=>{const{labelList:e=[]}=o.value||{},{isSelected:l}=e[a]||{};e[a].isSelected=~~!l,p({labelList:e})},fileType:b,selectFile:a=>{document.querySelector("#file").click()},uploadFile:a=>{const e=a.target.files;let l=e.length;for(;l>0;)r({file:e[e.length-l]}).then((e=>{const{filePath:l,id:i}=e||{};switch(b.value){case 1:p({businessLicenseImgUrl:l,businessLicenseImgId:i});break;case 2:p({operIdcardFrontUrl:l,operIdcardFrontId:i});break;case 3:p({operIdcardBackendUrl:l,operIdcardBackendId:i});break;case 4:u({idcardFrontImgUrl:l,idcardFrontImgId:i});break;case 5:u({idcardBackImgUrl:l,idcardBackImgId:i})}a.target.value=null})),l--},changeCompanyQualifyInput:(a,e)=>{const l={creditCode:I.ValidateCreditCode,operIdcardNo:I.ValidateIdentityCard,operPhoneNo:I.ValidatePhone};for(const[i,s]of Object.entries(l))if(i===e)return void Q[s]({value:a,success:({value:a})=>{p({[e]:a})},failed:({value:a,message:l})=>{a&&(t.error(l),p({[e]:""}))}});p({[e]:a})}}}});const k=y();c("data-v-576d8ea7");const h={class:"context"},x=u("div",{class:"context-title"},"资质申请",-1),L={class:"context-body"},F={key:0,class:"list"},S={class:"li"},A=u("div",{class:"li-title"},"营业执照",-1),B={class:"li-row"},_={class:"li-flex"},E={class:"li-items"},j={class:"li-item"},M=u("div",{class:"li-item-label"},[u("span",{class:"li-item-label-gray"},"统一社会信用代码")],-1),N={class:"li-item-input"},G={class:"li-text"},P=u("span",{class:"li-text-gray"}," 支持 jpg、png、jpeg格式，大小不超过5M ",-1),R=u("div",{class:"li-text"},[u("span",{class:"li-text-gray"}," 说明“上传之后，按钮显示为”重新上传” ")],-1),$={class:"li-img"},V={key:1,class:"li-img-icon",src:C,alt:""},w={class:"li"},K=u("div",{class:"li-title"},"法人信息",-1),q={class:"li-items"},D={class:"li-item"},O=u("div",{class:"li-item-label"},[u("span",{class:"li-item-label-gray"},"法人姓名")],-1),T={class:"li-item-input"},z={class:"li-item"},H=u("div",{class:"li-item-label"},[u("span",{class:"li-item-label-gray"},"身份证号码")],-1),J={class:"li-item-input"},W={class:"li-item"},X=u("div",{class:"li-item-label"},[u("span",{class:"li-item-label-gray"},"手机号码")],-1),Y={class:"li-item-input"},Z={class:"li-images"},aa={class:"li-image"},ea={key:1,class:"li-image-icon-span"},la=u("div",{class:"li-image-text"},"法人身份证正面",-1),ia={class:"li-image"},sa={key:1,class:"li-image-icon-span"},ta=u("div",{class:"li-image-text"},"法人身份证背面",-1),ca={class:"li"},na=u("div",{class:"li-title"},"选择你拥有的生产能力标签",-1),oa={class:"li-content"},da={class:"buttons"},ra={key:1,class:"list"},ua={class:"li"},pa=u("div",{class:"li-title"},"个人信息",-1),ma={class:"li-images"},ya={class:"li-image"},va={key:1,class:"li-image-icon-span"},fa=u("div",{class:"li-image-text"},"法人身份证正面",-1),ga={class:"li-image"},Ia={key:1,class:"li-image-icon-span"},Qa=u("div",{class:"li-image-text"},"法人身份证背面",-1),ba={class:"li"},Ca=u("div",{class:"li-title"},"选择你拥有的生产能力标签",-1),Ua={class:"li-content"},ka={class:"buttons"};n();const ha=k(((a,e,l,i,s,t)=>{const c=o("Selection");return d(),r("div",h,[u("input",{type:"file",name:"file",hidden:"hidden",id:"file",accept:"image/*",onChange:e[1]||(e[1]=(...e)=>a.uploadFile&&a.uploadFile(...e))},null,32),x,u("div",L,[1===a.initInfo.type?(d(),r("div",F,[u("div",S,[A,u("div",B,[u("div",_,[u("div",E,[u("div",j,[M,u("div",N,[u("input",{type:"text",placeholder:"请输入统一社会信用代码",value:a.companyQualify.creditCode,onChange:e[2]||(e[2]=e=>a.changeCompanyQualifyInput(e.target.value,"creditCode")),onKeyup:e[3]||(e[3]=p((e=>a.saveCompanyQualifyInfo()),["enter"]))},null,40,["value"])])])]),u("div",G,[u("span",{class:"li-button",onClick:e[4]||(e[4]=e=>a.selectFile(1))},"上传营业执照"),P]),R]),u("div",$,[a.companyQualify.businessLicenseImgUrl?(d(),r("img",{key:0,class:"li-img-icon",src:a.BASE_IMAGE_URL+a.companyQualify.businessLicenseImgUrl,alt:""},null,8,["src"])):(d(),r("img",V))])])]),u("div",w,[K,u("div",q,[u("div",D,[O,u("div",T,[u("input",{type:"text",placeholder:"请输入法人姓名",value:a.companyQualify.operName,onChange:e[5]||(e[5]=e=>a.changeCompanyQualifyInput(e.target.value,"operName")),onKeyup:e[6]||(e[6]=p((e=>a.saveCompanyQualifyInfo()),["enter"]))},null,40,["value"])])]),u("div",z,[H,u("div",J,[u("input",{type:"text",placeholder:"请输入身份证号码",value:a.companyQualify.operIdcardNo,onChange:e[7]||(e[7]=e=>a.changeCompanyQualifyInput(e.target.value,"operIdcardNo")),onKeyup:e[8]||(e[8]=p((e=>a.saveCompanyQualifyInfo()),["enter"]))},null,40,["value"])])]),u("div",W,[X,u("div",Y,[u("input",{type:"text",placeholder:"请输入手机号码",value:a.companyQualify.operPhoneNo,onChange:e[9]||(e[9]=e=>a.changeCompanyQualifyInput(e.target.value,"operPhoneNo")),onKeyup:e[10]||(e[10]=p((e=>a.saveCompanyQualifyInfo()),["enter"]))},null,40,["value"])])])]),u("div",Z,[u("div",aa,[u("div",{class:"li-image-icon",onClick:e[11]||(e[11]=e=>a.selectFile(2))},[a.companyQualify.operIdcardFrontUrl?(d(),r("img",{key:0,class:"li-image-icon-src",src:a.BASE_IMAGE_URL+a.companyQualify.operIdcardFrontUrl,alt:""},null,8,["src"])):(d(),r("div",ea,"+"))]),la]),u("div",ia,[u("div",{class:"li-image-icon",onClick:e[12]||(e[12]=e=>a.selectFile(3))},[a.companyQualify.operIdcardBackendUrl?(d(),r("img",{key:0,class:"li-image-icon-src",src:a.BASE_IMAGE_URL+a.companyQualify.operIdcardBackendUrl,alt:""},null,8,["src"])):(d(),r("div",sa,"+"))]),ta])])]),u("div",ca,[na,u("div",oa,[u(c,{type:"生产能力标签",label:"选择生产能力标签",list:a.companyQualify.labelList,name:"name",onUpdateindex:a.updateCompanyQualifyLabelIndex},null,8,["list","onUpdateindex"])])]),u("div",da,[u("div",{class:"button button-blue",onClick:e[13]||(e[13]=e=>a.saveCompanyQualifyInfo())}," 提交 ")])])):2===a.initInfo.type?(d(),r("div",ra,[u("div",ua,[pa,u("div",ma,[u("div",ya,[u("div",{class:"li-image-icon",onClick:e[14]||(e[14]=e=>a.selectFile(4))},[a.userQualify.idcardFrontImgUrl?(d(),r("img",{key:0,class:"li-image-icon-src",src:a.BASE_IMAGE_URL+a.userQualify.idcardFrontImgUrl,alt:""},null,8,["src"])):(d(),r("div",va,"+"))]),fa]),u("div",ga,[u("div",{class:"li-image-icon",onClick:e[15]||(e[15]=e=>a.selectFile(5))},[a.userQualify.idcardBackImgUrl?(d(),r("img",{key:0,class:"li-image-icon-src",src:a.BASE_IMAGE_URL+a.userQualify.idcardBackImgUrl,alt:""},null,8,["src"])):(d(),r("div",Ia,"+"))]),Qa])])]),u("div",ba,[Ca,u("div",Ua,[u(c,{type:"生产能力标签",label:"选择生产能力标签",list:a.userQualify.labelList,name:"name",onUpdateindex:a.updateUserQualifyLabelIndex},null,8,["list","onUpdateindex"])])]),u("div",ka,[u("div",{class:"button button-blue",onClick:e[16]||(e[16]=e=>a.saveUserQualifyInfo())}," 提交 ")])])):m("v-if",!0)])])}));U.render=ha,U.__scopeId="data-v-576d8ea7";export default U;
